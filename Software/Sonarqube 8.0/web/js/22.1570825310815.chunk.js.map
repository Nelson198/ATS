{"version":3,"sources":["webpack:///./src/main/js/components/common/OrganizationHelmet.tsx","webpack:///./src/main/js/apps/permission-templates/utils.ts","webpack:///./src/main/js/apps/permission-templates/components/Form.tsx","webpack:///./src/main/js/apps/permission-templates/components/Header.tsx","webpack:///./src/main/js/apps/permission-templates/components/ListHeader.tsx","webpack:///./src/main/js/apps/permission-templates/components/DeleteForm.tsx","webpack:///./src/main/js/apps/permission-templates/components/ActionsCell.tsx","webpack:///./src/main/js/apps/permission-templates/components/Defaults.tsx","webpack:///./src/main/js/apps/permission-templates/components/NameCell.tsx","webpack:///./src/main/js/apps/permission-templates/components/PermissionCell.tsx","webpack:///./src/main/js/apps/permission-templates/components/ListItem.tsx","webpack:///./src/main/js/apps/permission-templates/components/List.tsx","webpack:///./src/main/js/apps/permission-templates/components/Home.tsx","webpack:///./src/main/js/apps/permission-templates/components/TemplateDetails.tsx","webpack:///./src/main/js/apps/permission-templates/components/TemplateHeader.tsx","webpack:///./src/main/js/apps/permission-templates/components/Template.tsx","webpack:///./src/main/js/apps/permission-templates/components/App.tsx","webpack:///./src/main/js/app/components/embed-docs-modal/Suggestions.tsx"],"names":["__webpack_require__","d","__webpack_exports__","OrganizationHelmet","react__WEBPACK_IMPORTED_MODULE_0__","react_helmet__WEBPACK_IMPORTED_MODULE_1__","react_helmet__WEBPACK_IMPORTED_MODULE_1___default","n","_a","title","organization","defaultTitle","name","a","titleTemplate","PERMISSIONS_ORDER","_super","Form","props","_this","call","this","mounted","handleSubmit","onSubmit","description","state","projectKeyPattern","then","onClose","handleNameChange","event","setState","currentTarget","value","handleDescriptionChange","handleProjectKeyPatternChange","permissionTemplate","__extends","prototype","render","index_js_exposed","SimpleModal_default","header","size","onCloseClick","onFormSubmit","submitting","id","className","htmlFor","Object","l10n","autoFocus","maxLength","onChange","required","type","DeferredSpinner_default","loading","buttons","disabled","confirmButtonText","onClick","Header_Header","Header","apply","arguments","createModal","handleCreateClick","handleCreateModalClose","handleCreateModalSubmit","data","key","api_permissions","Header_assign","response","refresh","pathname","router","push","query","Header_extends","componentDidMount","componentWillUnmount","ready","components_Form","components_Header","withRouter","ListHeader","ListHeader_extends","renderTooltip","permission","InstanceMessage","message","Alert","variant","cells","permissions","map","HelpTooltip_default","overlay","DeleteForm","t","ActionsCell_ActionsCell","ActionsCell","deleteForm","updateModal","handleUpdateClick","handleCloseUpdateModal","handleSubmitUpdateModal","ActionsCell_assign","handleDeleteClick","handleCloseDeleteForm","handleDeleteSubmit","templateId","replace","setDefault","qualifier","ActionsCell_extends","getAvailableQualifiers","topQualifiers","isDefault","difference_default","defaultFor","renderSetDefaultsControl","availableQualifiers","length","renderIfSingleTopQualifier","renderIfMultipleTopQualifiers","renderSetDefaultLink","child","ActionsDropdown","data-qualifier","QualifierIcon_default","ActionsDropdown_default","fromDetails","to","destructive","components_ActionsCell","Defaults","template","qualifiersToDisplay","qualifiers","sortBy_default","join","NameCell","react_router_es","PermissionCell","p","data-permission","withProjectCreator","system","usersCount","groupsCount","ListItem","data-id","data-name","List","permissionTemplates","components_ListHeader","Home","Helmet_default","TemplateDetails","TemplateHeader","Template","filter","groups","users","requestHolders","realQuery","selectedPermission","requests","finalQuery","Promise","resolve","all","responses","handleToggleUser","user","login","handleToggleProjectCreator","hasPermission","includes","handleToggleGroup","group","groupName","assign","handleSearch","handleFilter","handleSelectPermission","undefined","shouldDisplayCreator","creatorPermissions","CREATOR_NAME","isFiltered","matchQuery","toLocaleLowerCase","toLowerCase","matchPermission","Template_extends","utils","allUsers","slice","creator","unshift","HoldersList","onSelectPermission","onToggleGroup","onToggleUser","showPublicProjectsWarning","SearchForm","onFilter","onSearch","App_App","App","requestPermissions","r","indexOf","sortPermissions","defaultTemplates","forEach","defaultTemplate","__assign","mergeDefaultsToTemplates","basePermissions","basePermission","projectPermission","find","mergePermissionsToTemplates","App_extends","renderTemplate","components_Template","renderHome","location","Suggestions","suggestions","es","rootReducer","_SuggestionsContext__WEBPACK_IMPORTED_MODULE_1__","Consumer","addSuggestions","removeSuggestions","SuggestionsInner","componentDidUpdate","prevProps"],"mappings":"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","file":"js/22.1570825310815.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Helmet from 'react-helmet';\n\ninterface Props {\n  organization?: { name: string };\n  title: string;\n}\n\nexport default function OrganizationHelmet({ title, organization }: Props) {\n  const defaultTitle = title + (organization ? ' - ' + organization.name : '');\n  return <Helmet defaultTitle={defaultTitle} titleTemplate={'%s - ' + defaultTitle} />;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sortBy } from 'lodash';\n\nexport const PERMISSIONS_ORDER = [\n  'user',\n  'codeviewer',\n  'issueadmin',\n  'securityhotspotadmin',\n  'admin',\n  'scan'\n];\n\nexport function sortPermissions(permissions: T.Permission[]) {\n  return sortBy(permissions, p => PERMISSIONS_ORDER.indexOf(p.key));\n}\n\nexport function mergePermissionsToTemplates(\n  permissionTemplates: T.PermissionTemplate[],\n  basePermissions: T.Permission[]\n): T.PermissionTemplate[] {\n  return permissionTemplates.map(permissionTemplate => {\n    // it's important to keep the order of the permission template's permissions\n    // the same as the order of base permissions\n    const permissions = basePermissions.map(basePermission => {\n      const projectPermission = permissionTemplate.permissions.find(\n        p => p.key === basePermission.key\n      );\n      return { usersCount: 0, groupsCount: 0, ...basePermission, ...projectPermission };\n    });\n\n    return { ...permissionTemplate, permissions };\n  });\n}\n\nexport function mergeDefaultsToTemplates(\n  permissionTemplates: T.PermissionTemplate[],\n  defaultTemplates: Array<{ templateId: string; qualifier: string }> = []\n): T.PermissionTemplate[] {\n  return permissionTemplates.map(permissionTemplate => {\n    const defaultFor: string[] = [];\n\n    defaultTemplates.forEach(defaultTemplate => {\n      if (defaultTemplate.templateId === permissionTemplate.id) {\n        defaultFor.push(defaultTemplate.qualifier);\n      }\n    });\n\n    return { ...permissionTemplate, defaultFor };\n  });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport SimpleModal from 'sonar-ui-common/components/controls/SimpleModal';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  confirmButtonText: string;\n  header: string;\n  onClose: () => void;\n  onSubmit: (data: {\n    description: string;\n    name: string;\n    projectKeyPattern: string;\n  }) => Promise<void>;\n  permissionTemplate?: { description?: string; name: string; projectKeyPattern?: string };\n}\n\ninterface State {\n  description: string;\n  name: string;\n  projectKeyPattern: string;\n}\n\nexport default class Form extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      description: (props.permissionTemplate && props.permissionTemplate.description) || '',\n      name: (props.permissionTemplate && props.permissionTemplate.name) || '',\n      projectKeyPattern:\n        (props.permissionTemplate && props.permissionTemplate.projectKeyPattern) || ''\n    };\n  }\n\n  handleSubmit = () => {\n    return this.props\n      .onSubmit({\n        description: this.state.description,\n        name: this.state.name,\n        projectKeyPattern: this.state.projectKeyPattern\n      })\n      .then(this.props.onClose);\n  };\n\n  handleNameChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ name: event.currentTarget.value });\n  };\n\n  handleDescriptionChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    this.setState({ description: event.currentTarget.value });\n  };\n\n  handleProjectKeyPatternChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ projectKeyPattern: event.currentTarget.value });\n  };\n\n  render() {\n    return (\n      <SimpleModal\n        header={this.props.header}\n        onClose={this.props.onClose}\n        onSubmit={this.handleSubmit}\n        size=\"small\">\n        {({ onCloseClick, onFormSubmit, submitting }) => (\n          <form id=\"permission-template-form\" onSubmit={onFormSubmit}>\n            <header className=\"modal-head\">\n              <h2>{this.props.header}</h2>\n            </header>\n\n            <div className=\"modal-body\">\n              <div className=\"modal-field\">\n                <label htmlFor=\"permission-template-name\">\n                  {translate('name')}\n                  <em className=\"mandatory\">*</em>\n                </label>\n                <input\n                  autoFocus={true}\n                  id=\"permission-template-name\"\n                  maxLength={256}\n                  name=\"name\"\n                  onChange={this.handleNameChange}\n                  required={true}\n                  type=\"text\"\n                  value={this.state.name}\n                />\n                <div className=\"modal-field-description\">{translate('should_be_unique')}</div>\n              </div>\n\n              <div className=\"modal-field\">\n                <label htmlFor=\"permission-template-description\">{translate('description')}</label>\n                <textarea\n                  id=\"permission-template-description\"\n                  name=\"description\"\n                  onChange={this.handleDescriptionChange}\n                  value={this.state.description}\n                />\n              </div>\n\n              <div className=\"modal-field\">\n                <label htmlFor=\"permission-template-project-key-pattern\">\n                  {translate('permission_template.key_pattern')}\n                </label>\n                <input\n                  id=\"permission-template-project-key-pattern\"\n                  maxLength={500}\n                  name=\"projectKeyPattern\"\n                  onChange={this.handleProjectKeyPatternChange}\n                  type=\"text\"\n                  value={this.state.projectKeyPattern}\n                />\n                <div className=\"modal-field-description\">\n                  {translate('permission_template.key_pattern.description')}\n                </div>\n              </div>\n            </div>\n\n            <footer className=\"modal-foot\">\n              <DeferredSpinner className=\"spacer-right\" loading={submitting} />\n              <SubmitButton disabled={submitting} id=\"permission-template-submit\">\n                {this.props.confirmButtonText}\n              </SubmitButton>\n              <ResetButtonLink\n                disabled={submitting}\n                id=\"permission-template-cancel\"\n                onClick={onCloseClick}>\n                {translate('cancel')}\n              </ResetButtonLink>\n            </footer>\n          </form>\n        )}\n      </SimpleModal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { createPermissionTemplate } from '../../../api/permissions';\nimport { Router, withRouter } from '../../../components/hoc/withRouter';\nimport Form from './Form';\n\ninterface Props {\n  organization?: { key: string };\n  ready?: boolean;\n  refresh: () => Promise<void>;\n  router: Pick<Router, 'push'>;\n}\n\ninterface State {\n  createModal: boolean;\n}\n\nclass Header extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { createModal: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleCreateClick = () => {\n    this.setState({ createModal: true });\n  };\n\n  handleCreateModalClose = () => {\n    if (this.mounted) {\n      this.setState({ createModal: false });\n    }\n  };\n\n  handleCreateModalSubmit = (data: {\n    description: string;\n    name: string;\n    projectKeyPattern: string;\n  }) => {\n    const organization = this.props.organization && this.props.organization.key;\n    return createPermissionTemplate({ ...data, organization }).then(response => {\n      this.props.refresh().then(() => {\n        const pathname = organization\n          ? `/organizations/${organization}/permission_templates`\n          : '/permission_templates';\n        this.props.router.push({ pathname, query: { id: response.permissionTemplate.id } });\n      });\n    });\n  };\n\n  render() {\n    return (\n      <header className=\"page-header\" id=\"project-permissions-header\">\n        <h1 className=\"page-title\">{translate('permission_templates.page')}</h1>\n\n        {!this.props.ready && <i className=\"spinner\" />}\n\n        <div className=\"page-actions\">\n          <Button onClick={this.handleCreateClick}>{translate('create')}</Button>\n\n          {this.state.createModal && (\n            <Form\n              confirmButtonText={translate('create')}\n              header={translate('permission_template.new_template')}\n              onClose={this.handleCreateModalClose}\n              onSubmit={this.handleCreateModalSubmit}\n            />\n          )}\n        </div>\n\n        <p className=\"page-description\">{translate('permission_templates.page.description')}</p>\n      </header>\n    );\n  }\n}\n\nexport default withRouter(Header);\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport InstanceMessage from '../../../components/common/InstanceMessage';\n\ninterface Props {\n  organization: T.Organization | undefined;\n  permissions: T.Permission[];\n}\n\nexport default class ListHeader extends React.PureComponent<Props> {\n  renderTooltip(permission: T.Permission) {\n    return permission.key === 'user' || permission.key === 'codeviewer' ? (\n      <div>\n        <InstanceMessage message={translate('projects_role', permission.key, 'desc')} />\n        <Alert className=\"spacer-top\" variant=\"warning\">\n          {translate('projects_role.public_projects_warning')}\n        </Alert>\n      </div>\n    ) : (\n      <InstanceMessage message={translate('projects_role', permission.key, 'desc')} />\n    );\n  }\n\n  render() {\n    const cells = this.props.permissions.map(permission => (\n      <th className=\"permission-column\" key={permission.key}>\n        <div className=\"permission-column-inner\">\n          <span className=\"text-middle\">{translate('projects_role', permission.key)}</span>\n          <HelpTooltip className=\"spacer-left\" overlay={this.renderTooltip(permission)} />\n        </div>\n      </th>\n    ));\n\n    return (\n      <thead>\n        <tr>\n          <th>&nbsp;</th>\n          {cells}\n          <th className=\"thin nowrap text-right\">&nbsp;</th>\n        </tr>\n      </thead>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport SimpleModal from 'sonar-ui-common/components/controls/SimpleModal';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  onClose: () => void;\n  onSubmit: () => Promise<void>;\n  permissionTemplate: T.PermissionTemplate;\n}\n\nexport default function DeleteForm({ onClose, onSubmit, permissionTemplate: t }: Props) {\n  const header = translate('permission_template.delete_confirm_title');\n\n  return (\n    <SimpleModal header={header} onClose={onClose} onSubmit={onSubmit}>\n      {({ onCloseClick, onFormSubmit, submitting }) => (\n        <form onSubmit={onFormSubmit}>\n          <header className=\"modal-head\">\n            <h2>{header}</h2>\n          </header>\n\n          <div className=\"modal-body\">\n            {translateWithParameters(\n              'permission_template.do_you_want_to_delete_template_xxx',\n              t.name\n            )}\n          </div>\n\n          <footer className=\"modal-foot\">\n            <DeferredSpinner className=\"spacer-right\" loading={submitting} />\n            <SubmitButton className=\"button-red\" disabled={submitting}>\n              {translate('delete')}\n            </SubmitButton>\n            <ResetButtonLink disabled={submitting} onClick={onCloseClick}>\n              {translate('cancel')}\n            </ResetButtonLink>\n          </footer>\n        </form>\n      )}\n    </SimpleModal>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { difference } from 'lodash';\nimport * as React from 'react';\nimport ActionsDropdown, {\n  ActionsDropdownItem\n} from 'sonar-ui-common/components/controls/ActionsDropdown';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport {\n  deletePermissionTemplate,\n  setDefaultPermissionTemplate,\n  updatePermissionTemplate\n} from '../../../api/permissions';\nimport { Router, withRouter } from '../../../components/hoc/withRouter';\nimport DeleteForm from './DeleteForm';\nimport Form from './Form';\n\ninterface Props {\n  fromDetails?: boolean;\n  organization?: { isDefault?: boolean; key: string };\n  permissionTemplate: T.PermissionTemplate;\n  refresh: () => void;\n  router: Pick<Router, 'replace'>;\n  topQualifiers: string[];\n}\n\ninterface State {\n  deleteForm: boolean;\n  updateModal: boolean;\n}\n\nexport class ActionsCell extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { deleteForm: false, updateModal: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleUpdateClick = () => {\n    this.setState({ updateModal: true });\n  };\n\n  handleCloseUpdateModal = () => {\n    if (this.mounted) {\n      this.setState({ updateModal: false });\n    }\n  };\n\n  handleSubmitUpdateModal = (data: {\n    description: string;\n    name: string;\n    projectKeyPattern: string;\n  }) => {\n    return updatePermissionTemplate({ id: this.props.permissionTemplate.id, ...data }).then(\n      this.props.refresh\n    );\n  };\n\n  handleDeleteClick = () => {\n    this.setState({ deleteForm: true });\n  };\n\n  handleCloseDeleteForm = () => {\n    if (this.mounted) {\n      this.setState({ deleteForm: false });\n    }\n  };\n\n  handleDeleteSubmit = () => {\n    return deletePermissionTemplate({ templateId: this.props.permissionTemplate.id }).then(() => {\n      const pathname = this.props.organization\n        ? `/organizations/${this.props.organization.key}/permission_templates`\n        : '/permission_templates';\n      this.props.router.replace(pathname);\n      this.props.refresh();\n    });\n  };\n\n  setDefault = (qualifier: string) => () => {\n    setDefaultPermissionTemplate(this.props.permissionTemplate.id, qualifier).then(\n      this.props.refresh,\n      () => {}\n    );\n  };\n\n  getAvailableQualifiers() {\n    const topQualifiers =\n      this.props.organization && !this.props.organization.isDefault\n        ? ['TRK']\n        : this.props.topQualifiers;\n    return difference(topQualifiers, this.props.permissionTemplate.defaultFor);\n  }\n\n  renderSetDefaultsControl() {\n    const availableQualifiers = this.getAvailableQualifiers();\n\n    if (availableQualifiers.length === 0) {\n      return null;\n    }\n\n    return this.props.topQualifiers.length === 1\n      ? this.renderIfSingleTopQualifier(availableQualifiers)\n      : this.renderIfMultipleTopQualifiers(availableQualifiers);\n  }\n\n  renderSetDefaultLink(qualifier: string, child: React.ReactNode) {\n    return (\n      <ActionsDropdownItem\n        className=\"js-set-default\"\n        data-qualifier={qualifier}\n        key={qualifier}\n        onClick={this.setDefault(qualifier)}>\n        {child}\n      </ActionsDropdownItem>\n    );\n  }\n\n  renderIfSingleTopQualifier(availableQualifiers: string[]) {\n    return availableQualifiers.map(qualifier =>\n      this.renderSetDefaultLink(\n        qualifier,\n        <span>{translate('permission_templates.set_default')}</span>\n      )\n    );\n  }\n\n  renderIfMultipleTopQualifiers(availableQualifiers: string[]) {\n    return availableQualifiers.map(qualifier =>\n      this.renderSetDefaultLink(\n        qualifier,\n        <span>\n          {translate('permission_templates.set_default_for')}{' '}\n          <QualifierIcon qualifier={qualifier} /> {translate('qualifiers', qualifier)}\n        </span>\n      )\n    );\n  }\n\n  render() {\n    const { permissionTemplate: t, organization } = this.props;\n\n    const pathname = organization\n      ? `/organizations/${organization.key}/permission_templates`\n      : '/permission_templates';\n\n    return (\n      <>\n        <ActionsDropdown>\n          {this.renderSetDefaultsControl()}\n\n          {!this.props.fromDetails && (\n            <ActionsDropdownItem to={{ pathname, query: { id: t.id } }}>\n              {translate('edit_permissions')}\n            </ActionsDropdownItem>\n          )}\n\n          <ActionsDropdownItem className=\"js-update\" onClick={this.handleUpdateClick}>\n            {translate('update_details')}\n          </ActionsDropdownItem>\n\n          {t.defaultFor.length === 0 && (\n            <ActionsDropdownItem\n              className=\"js-delete\"\n              destructive={true}\n              onClick={this.handleDeleteClick}>\n              {translate('delete')}\n            </ActionsDropdownItem>\n          )}\n        </ActionsDropdown>\n\n        {this.state.updateModal && (\n          <Form\n            confirmButtonText={translate('update_verb')}\n            header={translate('permission_template.edit_template')}\n            onClose={this.handleCloseUpdateModal}\n            onSubmit={this.handleSubmitUpdateModal}\n            permissionTemplate={t}\n          />\n        )}\n\n        {this.state.deleteForm && (\n          <DeleteForm\n            onClose={this.handleCloseDeleteForm}\n            onSubmit={this.handleDeleteSubmit}\n            permissionTemplate={t}\n          />\n        )}\n      </>\n    );\n  }\n}\n\nexport default withRouter(ActionsCell);\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sortBy } from 'lodash';\nimport * as React from 'react';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  organization: T.Organization | undefined;\n  template: T.PermissionTemplate;\n}\n\nexport default function Defaults({ organization, template }: Props) {\n  const qualifiersToDisplay =\n    organization && !organization.isDefault ? ['TRK'] : template.defaultFor;\n\n  const qualifiers = sortBy(qualifiersToDisplay)\n    .map(qualifier => translate('qualifiers', qualifier))\n    .join(', ');\n\n  return (\n    <div>\n      <span className=\"badge spacer-right\">\n        {translateWithParameters('permission_template.default_for', qualifiers)}\n      </span>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport Defaults from './Defaults';\n\ninterface Props {\n  organization: T.Organization | undefined;\n  template: T.PermissionTemplate;\n}\n\nexport default function NameCell({ template, organization }: Props) {\n  const pathname = organization\n    ? `/organizations/${organization.key}/permission_templates`\n    : '/permission_templates';\n\n  return (\n    <td>\n      <Link to={{ pathname, query: { id: template.id } }}>\n        <strong className=\"js-name\">{template.name}</strong>\n      </Link>\n\n      {template.defaultFor.length > 0 && (\n        <div className=\"spacer-top js-defaults\">\n          <Defaults organization={organization} template={template} />\n        </div>\n      )}\n\n      {!!template.description && (\n        <div className=\"spacer-top js-description\">{template.description}</div>\n      )}\n\n      {!!template.projectKeyPattern && (\n        <div className=\"spacer-top js-project-key-pattern\">\n          Project Key Pattern: <code>{template.projectKeyPattern}</code>\n        </div>\n      )}\n    </td>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { isSonarCloud } from '../../../helpers/system';\n\ninterface Props {\n  permission: {\n    key: string;\n    usersCount: number;\n    groupsCount: number;\n    withProjectCreator?: boolean;\n  };\n}\n\nexport default function PermissionCell({ permission: p }: Props) {\n  return (\n    <td className=\"permission-column\" data-permission={p.key}>\n      <div className=\"permission-column-inner\">\n        <ul>\n          {p.withProjectCreator && (\n            <li className=\"little-spacer-bottom display-flex-center\">\n              {translate('permission_templates.project_creators')}\n              <HelpTooltip\n                className=\"little-spacer-left\"\n                overlay={translate(\n                  isSonarCloud()\n                    ? 'permission_templates.project_creators.explanation.sonarcloud'\n                    : 'permission_templates.project_creators.explanation'\n                )}\n              />\n            </li>\n          )}\n          <li className=\"little-spacer-bottom\">\n            <strong>{p.usersCount}</strong>\n            {'  user(s)'}\n          </li>\n          <li>\n            <strong>{p.groupsCount}</strong>\n            {' group(s)'}\n          </li>\n        </ul>\n      </div>\n    </td>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ActionsCell from './ActionsCell';\nimport NameCell from './NameCell';\nimport PermissionCell from './PermissionCell';\n\ninterface Props {\n  organization: T.Organization | undefined;\n  refresh: () => Promise<void>;\n  template: T.PermissionTemplate;\n  topQualifiers: string[];\n}\n\nexport default function ListItem(props: Props) {\n  const permissions = props.template.permissions.map(p => (\n    <PermissionCell key={p.key} permission={p} />\n  ));\n\n  return (\n    <tr data-id={props.template.id} data-name={props.template.name}>\n      <NameCell organization={props.organization} template={props.template} />\n\n      {permissions}\n\n      <td className=\"nowrap thin text-right\">\n        <ActionsCell\n          organization={props.organization}\n          permissionTemplate={props.template}\n          refresh={props.refresh}\n          topQualifiers={props.topQualifiers}\n        />\n      </td>\n    </tr>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ListHeader from './ListHeader';\nimport ListItem from './ListItem';\n\ninterface Props {\n  organization: T.Organization | undefined;\n  permissionTemplates: T.PermissionTemplate[];\n  permissions: T.Permission[];\n  refresh: () => Promise<void>;\n  topQualifiers: string[];\n}\n\nexport default function List(props: Props) {\n  const permissionTemplates = props.permissionTemplates.map(p => (\n    <ListItem\n      key={p.id}\n      organization={props.organization}\n      refresh={props.refresh}\n      template={p}\n      topQualifiers={props.topQualifiers}\n    />\n  ));\n\n  return (\n    <div className=\"boxed-group boxed-group-inner\">\n      <table className=\"data zebra permissions-table\" id=\"permission-templates\">\n        <ListHeader organization={props.organization} permissions={props.permissions} />\n        <tbody>{permissionTemplates}</tbody>\n      </table>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Helmet from 'react-helmet';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport Header from './Header';\nimport List from './List';\n\ninterface Props {\n  organization: T.Organization | undefined;\n  permissionTemplates: T.PermissionTemplate[];\n  permissions: T.Permission[];\n  ready: boolean;\n  refresh: () => Promise<void>;\n  topQualifiers: string[];\n}\n\nexport default function Home(props: Props) {\n  return (\n    <div className=\"page page-limited\">\n      <Helmet title={translate('permission_templates.page')} />\n\n      <Header organization={props.organization} ready={props.ready} refresh={props.refresh} />\n\n      <List\n        organization={props.organization}\n        permissionTemplates={props.permissionTemplates}\n        permissions={props.permissions}\n        refresh={props.refresh}\n        topQualifiers={props.topQualifiers}\n      />\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Defaults from './Defaults';\n\ninterface Props {\n  organization: T.Organization | undefined;\n  template: T.PermissionTemplate;\n}\n\nexport default function TemplateDetails({ organization, template }: Props) {\n  return (\n    <div className=\"big-spacer-bottom\">\n      {template.defaultFor.length > 0 && (\n        <div className=\"spacer-top js-defaults\">\n          <Defaults organization={organization} template={template} />\n        </div>\n      )}\n\n      {!!template.description && (\n        <div className=\"spacer-top js-description\">{template.description}</div>\n      )}\n\n      {!!template.projectKeyPattern && (\n        <div className=\"spacer-top js-project-key-pattern\">\n          Project Key Pattern: <code>{template.projectKeyPattern}</code>\n        </div>\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport ActionsCell from './ActionsCell';\n\ninterface Props {\n  loading: boolean;\n  organization: T.Organization | undefined;\n  refresh: () => void;\n  template: T.PermissionTemplate;\n  topQualifiers: string[];\n}\n\nexport default function TemplateHeader(props: Props) {\n  const { template, organization } = props;\n\n  const pathname = organization\n    ? `/organizations/${organization.key}/permission_templates`\n    : '/permission_templates';\n\n  return (\n    <header className=\"page-header\" id=\"project-permissions-header\">\n      <div className=\"note spacer-bottom\">\n        <Link className=\"text-muted\" to={pathname}>\n          {translate('permission_templates.page')}\n        </Link>\n      </div>\n\n      <h1 className=\"page-title\">{template.name}</h1>\n\n      {props.loading && <i className=\"spinner\" />}\n\n      <div className=\"pull-right\">\n        <ActionsCell\n          fromDetails={true}\n          organization={organization}\n          permissionTemplate={template}\n          refresh={props.refresh}\n          topQualifiers={props.topQualifiers}\n        />\n      </div>\n    </header>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Helmet from 'react-helmet';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport * as api from '../../../api/permissions';\nimport HoldersList from '../../permissions/shared/components/HoldersList';\nimport SearchForm from '../../permissions/shared/components/SearchForm';\nimport {\n  convertToPermissionDefinitions,\n  PERMISSIONS_ORDER_FOR_PROJECT_TEMPLATE\n} from '../../permissions/utils';\nimport TemplateDetails from './TemplateDetails';\nimport TemplateHeader from './TemplateHeader';\n\ninterface Props {\n  organization: T.Organization | undefined;\n  refresh: () => void;\n  template: T.PermissionTemplate;\n  topQualifiers: string[];\n}\n\ninterface State {\n  filter: string;\n  groups: T.PermissionGroup[];\n  loading: boolean;\n  query: string;\n  selectedPermission?: string;\n  users: T.PermissionUser[];\n}\n\nexport default class Template extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = {\n    filter: 'all',\n    groups: [],\n    loading: false,\n    query: '',\n    users: []\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.requestHolders();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  requestHolders = (realQuery?: string) => {\n    this.setState({ loading: true });\n\n    const { template } = this.props;\n    const { query, filter, selectedPermission } = this.state;\n    const requests = [];\n\n    const finalQuery = realQuery != null ? realQuery : query;\n\n    if (filter !== 'groups') {\n      requests.push(api.getPermissionTemplateUsers(template.id, finalQuery, selectedPermission));\n    } else {\n      requests.push(Promise.resolve([]));\n    }\n\n    if (filter !== 'users') {\n      requests.push(api.getPermissionTemplateGroups(template.id, finalQuery, selectedPermission));\n    } else {\n      requests.push(Promise.resolve([]));\n    }\n\n    return Promise.all(requests).then(responses => {\n      if (this.mounted) {\n        this.setState({\n          users: responses[0],\n          groups: responses[1],\n          loading: false\n        });\n      }\n    });\n  };\n\n  handleToggleUser = (user: T.PermissionUser, permission: string) => {\n    if (user.login === '<creator>') {\n      return this.handleToggleProjectCreator(user, permission);\n    }\n    const { template, organization } = this.props;\n    const hasPermission = user.permissions.includes(permission);\n    const data: { templateId: string; login: string; permission: string; organization?: string } = {\n      templateId: template.id,\n      login: user.login,\n      permission\n    };\n    if (organization) {\n      data.organization = organization.key;\n    }\n    const request = hasPermission\n      ? api.revokeTemplatePermissionFromUser(data)\n      : api.grantTemplatePermissionToUser(data);\n    return request.then(() => this.requestHolders()).then(this.props.refresh);\n  };\n\n  handleToggleProjectCreator = (user: T.PermissionUser, permission: string) => {\n    const { template } = this.props;\n    const hasPermission = user.permissions.includes(permission);\n    const request = hasPermission\n      ? api.removeProjectCreatorFromTemplate(template.id, permission)\n      : api.addProjectCreatorToTemplate(template.id, permission);\n    return request.then(() => this.requestHolders()).then(this.props.refresh);\n  };\n\n  handleToggleGroup = (group: T.PermissionGroup, permission: string) => {\n    const { template, organization } = this.props;\n    const hasPermission = group.permissions.includes(permission);\n    const data = {\n      templateId: template.id,\n      groupName: group.name,\n      permission\n    };\n    if (organization) {\n      Object.assign(data, { organization: organization.key });\n    }\n    const request = hasPermission\n      ? api.revokeTemplatePermissionFromGroup(data)\n      : api.grantTemplatePermissionToGroup(data);\n    return request.then(() => this.requestHolders()).then(this.props.refresh);\n  };\n\n  handleSearch = (query: string) => {\n    this.setState({ query });\n    this.requestHolders(query);\n  };\n\n  handleFilter = (filter: string) => {\n    this.setState({ filter }, this.requestHolders);\n  };\n\n  handleSelectPermission = (selectedPermission: string) => {\n    if (selectedPermission === this.state.selectedPermission) {\n      this.setState({ selectedPermission: undefined }, this.requestHolders);\n    } else {\n      this.setState({ selectedPermission }, this.requestHolders);\n    }\n  };\n\n  shouldDisplayCreator = (creatorPermissions: string[]) => {\n    const { filter, query, selectedPermission } = this.state;\n    const CREATOR_NAME = translate('permission_templates.project_creators');\n\n    const isFiltered = filter !== 'all';\n\n    const matchQuery = !query || CREATOR_NAME.toLocaleLowerCase().includes(query.toLowerCase());\n\n    const matchPermission =\n      selectedPermission === undefined || creatorPermissions.includes(selectedPermission);\n\n    return !isFiltered && matchQuery && matchPermission;\n  };\n\n  render() {\n    const permissions = convertToPermissionDefinitions(\n      PERMISSIONS_ORDER_FOR_PROJECT_TEMPLATE,\n      'projects_role'\n    );\n\n    const allUsers = [...this.state.users];\n\n    const creatorPermissions = this.props.template.permissions\n      .filter(p => p.withProjectCreator)\n      .map(p => p.key);\n\n    if (this.shouldDisplayCreator(creatorPermissions)) {\n      const creator = {\n        login: '<creator>',\n        name: translate('permission_templates.project_creators'),\n        permissions: creatorPermissions\n      };\n\n      allUsers.unshift(creator);\n    }\n\n    return (\n      <div className=\"page page-limited\">\n        <Helmet title={this.props.template.name} />\n\n        <TemplateHeader\n          loading={this.state.loading}\n          organization={this.props.organization}\n          refresh={this.props.refresh}\n          template={this.props.template}\n          topQualifiers={this.props.topQualifiers}\n        />\n\n        <TemplateDetails organization={this.props.organization} template={this.props.template} />\n\n        <HoldersList\n          groups={this.state.groups}\n          onSelectPermission={this.handleSelectPermission}\n          onToggleGroup={this.handleToggleGroup}\n          onToggleUser={this.handleToggleUser}\n          permissions={permissions}\n          selectedPermission={this.state.selectedPermission}\n          showPublicProjectsWarning={true}\n          users={allUsers}>\n          <SearchForm\n            filter={this.state.filter}\n            onFilter={this.handleFilter}\n            onSearch={this.handleSearch}\n            query={this.state.query}\n          />\n        </HoldersList>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { Location } from 'history';\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getPermissionTemplates } from '../../../api/permissions';\nimport Suggestions from '../../../app/components/embed-docs-modal/Suggestions';\nimport OrganizationHelmet from '../../../components/common/OrganizationHelmet';\nimport { getAppState, Store } from '../../../store/rootReducer';\nimport '../../permissions/styles.css';\nimport { mergeDefaultsToTemplates, mergePermissionsToTemplates, sortPermissions } from '../utils';\nimport Home from './Home';\nimport Template from './Template';\n\ninterface Props {\n  location: Location;\n  organization: T.Organization | undefined;\n  topQualifiers: string[];\n}\n\ninterface State {\n  ready: boolean;\n  permissions: T.Permission[];\n  permissionTemplates: T.PermissionTemplate[];\n}\n\nexport class App extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = {\n    ready: false,\n    permissions: [],\n    permissionTemplates: []\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.requestPermissions();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  requestPermissions = () => {\n    const { organization } = this.props;\n    const request = organization\n      ? getPermissionTemplates(organization.key)\n      : getPermissionTemplates();\n    return request.then(r => {\n      if (this.mounted) {\n        const permissions = sortPermissions(r.permissions);\n        const permissionTemplates = mergeDefaultsToTemplates(\n          mergePermissionsToTemplates(r.permissionTemplates, permissions),\n          r.defaultTemplates\n        );\n        this.setState({ ready: true, permissionTemplates, permissions });\n      }\n    });\n  };\n\n  renderTemplate(id: string) {\n    if (!this.state.ready) {\n      return null;\n    }\n\n    const template = this.state.permissionTemplates.find(t => t.id === id);\n    if (!template) {\n      return null;\n    }\n\n    return (\n      <Template\n        organization={this.props.organization}\n        refresh={this.requestPermissions}\n        template={template}\n        topQualifiers={this.props.topQualifiers}\n      />\n    );\n  }\n\n  renderHome() {\n    return (\n      <Home\n        organization={this.props.organization}\n        permissionTemplates={this.state.permissionTemplates}\n        permissions={this.state.permissions}\n        ready={this.state.ready}\n        refresh={this.requestPermissions}\n        topQualifiers={this.props.topQualifiers}\n      />\n    );\n  }\n\n  render() {\n    const { id } = this.props.location.query;\n    return (\n      <div>\n        <Suggestions suggestions=\"permission_templates\" />\n        <OrganizationHelmet\n          organization={this.props.organization}\n          title={translate('permission_templates.page')}\n        />\n\n        {id && this.renderTemplate(id)}\n        {!id && this.renderHome()}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state: Store) => ({ topQualifiers: getAppState(state).qualifiers });\n\nexport default connect(mapStateToProps)(App);\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { SuggestionsContext } from './SuggestionsContext';\n\ninterface Props {\n  suggestions: string;\n}\n\nexport default function Suggestions({ suggestions }: Props) {\n  return (\n    <SuggestionsContext.Consumer>\n      {({ addSuggestions, removeSuggestions }) => (\n        <SuggestionsInner\n          addSuggestions={addSuggestions}\n          removeSuggestions={removeSuggestions}\n          suggestions={suggestions}\n        />\n      )}\n    </SuggestionsContext.Consumer>\n  );\n}\n\ninterface SuggestionsInnerProps {\n  addSuggestions: (key: string) => void;\n  removeSuggestions: (key: string) => void;\n  suggestions: string;\n}\n\nclass SuggestionsInner extends React.PureComponent<SuggestionsInnerProps> {\n  componentDidMount() {\n    this.props.addSuggestions(this.props.suggestions);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.suggestions !== this.props.suggestions) {\n      this.props.removeSuggestions(this.props.suggestions);\n      this.props.addSuggestions(prevProps.suggestions);\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.removeSuggestions(this.props.suggestions);\n  }\n\n  render() {\n    return null;\n  }\n}\n"],"sourceRoot":""}