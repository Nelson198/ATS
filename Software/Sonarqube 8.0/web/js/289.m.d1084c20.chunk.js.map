{"version":3,"sources":["webpack:///./src/main/js/components/issue/actions.ts","webpack:///./src/main/js/components/common/SelectListItem.tsx","webpack:///./src/main/js/components/common/SelectList.tsx","webpack:///./src/main/js/components/issue/popups/SetAssigneePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueAssign.tsx","webpack:///./src/main/js/components/issue/popups/CommentPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueCommentAction.tsx","webpack:///./src/main/js/components/issue/popups/SetSeverityPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueSeverity.tsx","webpack:///./src/main/js/components/issue/popups/SetIssueTagsPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueTags.tsx","webpack:///./src/main/js/components/issue/popups/SetTransitionPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueTransition.tsx","webpack:///./src/main/js/components/issue/popups/SetTypePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueType.tsx","webpack:///./src/main/js/components/issue/components/IssueActionsBar.tsx","webpack:///./src/main/js/components/issue/popups/CommentDeletePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueCommentLine.tsx","webpack:///./src/main/js/components/issue/components/IssueChangelogDiff.tsx","webpack:///./src/main/js/components/issue/popups/ChangelogPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueChangelog.tsx","webpack:///./src/main/js/components/issue/components/IssueMessage.tsx","webpack:///./src/main/js/components/issue/popups/SimilarIssuesPopup.tsx","webpack:///./src/main/js/components/issue/components/SimilarIssuesFilter.tsx","webpack:///./src/main/js/components/issue/components/IssueTitleBar.tsx","webpack:///./src/main/js/components/issue/IssueView.tsx","webpack:///./src/main/js/components/issue/Issue.tsx","webpack:///./src/main/js/components/SourceViewer/styles.css?b990","webpack:///./src/main/js/components/SourceViewer/styles.css","webpack:///./src/main/js/components/intl/DateFormatter.tsx","webpack:///./src/main/js/components/intl/DateTimeFormatter.tsx","webpack:///./src/main/js/components/intl/DateFromNow.tsx","webpack:///./src/main/js/components/shared/SeverityHelper.tsx","webpack:///./src/main/js/components/measure/Measure.tsx","webpack:///./src/main/js/components/measure/utils.ts","webpack:///./src/main/js/helpers/periods.ts","webpack:///./src/main/js/components/tags/TagsList.css?aed4","webpack:///./src/main/js/components/tags/TagsList.tsx","webpack:///./src/main/js/components/ui/CoverageRating.tsx","webpack:///./src/main/js/components/tags/TagsList.css","webpack:///./src/main/js/components/common/MultiSelectOption.tsx","webpack:///./src/main/js/components/common/MultiSelect.tsx","webpack:///./src/main/js/components/common/MarkdownTips.tsx","webpack:///./src/main/js/components/tags/TagsSelector.tsx","webpack:///./src/main/js/components/shared/StatusHelper.tsx","webpack:///./src/main/js/components/common/LocationIndex.tsx","webpack:///./src/main/js/components/SourceViewer/helpers/loadIssues.ts","webpack:///./src/main/js/components/SourceViewer/SourceViewerCode.tsx","webpack:///./src/main/js/components/SourceViewer/components/MeasuresOverlayMeasure.tsx","webpack:///./src/main/js/components/SourceViewer/components/MeasuresOverlay.tsx","webpack:///./src/main/js/components/SourceViewer/SourceViewerHeader.tsx","webpack:///./src/main/js/components/SourceViewer/SourceViewerBase.tsx","webpack:///./src/main/js/components/common/LocationIndex.css?e5a0","webpack:///./src/main/js/components/common/LocationIndex.css","webpack:///./src/main/js/components/common/LocationMessage.tsx","webpack:///./src/main/js/components/common/LocationMessage.css?8e38","webpack:///./src/main/js/components/common/LocationMessage.css","webpack:///./src/main/js/components/issue/Issue.css?30c0","webpack:///./src/main/js/components/issue/Issue.css"],"names":["updateIssue","onChange","resultPromise","oldIssue","newIssue","optimisticUpdate","undefined","then","response","issue","Object","helpers_issues","components","users","rules","SelectListItem_SelectListItem","index_js_exposed","[object Object]","this","handleSelect","event","preventDefault","props","onSelect","item","handleHover","onHover","children","className","classnames_default","active","href","onClick","onFocus","onMouseOver","Tooltip_default","a","overlay","title","placement","renderLink","SelectList_SelectList","super","attachShortcuts","previousKeyScope","keymaster","previousFilter","currentKeyScope","uniqueId_default","tagName","target","srcElement","isInput","includes","keyCode","setState","selectNextElement","selectPreviousElement","state","detachShortcuts","idx","items","indexOf","length","renderChild","child","type","currentItem","prevProps","hasChildren","count","map","key","LIST_SIZE","popups_SetAssigneePopup","withCurrentUser","searchMembers","query","organizations","organization","projectOrganization","q","ps","handleSearchResult","searchUsers","api_users","_ref","activeUsers","filter","helpers_users","currentUser","login","handleSearchChange","defaultUsersArray","system","name","l10n","Dropdown","noPadding","SearchBox_default","autoFocus","minLength","placeholder","value","map_default","user","Avatar","hash","avatar","size","style","marginLeft","IssueAssign_IssueAssign","toggleAssign","open","togglePopup","handleClose","assigneeName","assignee","assigneeAvatar","assigneeActive","canAssign","Toggler_default","closeOnEscape","onRequestClose","isOpen","onAssign","buttons","renderAssignee","DropdownIcon_default","CommentPopup_CommentPopup","handleCommentChange","textComment","handleCommentClick","trim","onComment","handleCancelClick","toggleComment","handleKeyboard","metaKey","ctrlKey","stopPropagation","comment","markdown","_this$props","autoTriggered","onKeyDown","rows","disabled","MarkdownTips","IssueCommentAction_IssueCommentAction","addComment","text","issues","issueKey","closeOnClickOutside","currentPopup","commentAutoTriggered","commentPlaceholder","SEVERITY","SetSeverityPopup","severity","SeverityIcon_default","IssueSeverity_IssueSeverity","toggleSetSeverity","setSeverity","setIssueProperty","canSetSeverity","SeverityHelper","SetIssueTagsPopup_LIST_SIZE","SetIssueTagsPopup_SetIssueTagsPopup","mounted","searchResult","onSearch","Math","min","selectedTags","tags","tag","setTags","onUnselect","without_default","availableTags","difference_default","popups","BottomRight","TagsSelector","listSize","IssueTags_IssueTags","toggleSetTags","assign","join","_issue$tags","canSetTags","TagsList","allowUpdate","SetTransitionPopup","fromHotspot","transitions","isManualVulnerability","transition","_translateTransition2","_slicedToArray","translateTransition","description","IssueTransition_IssueTransition","setTransition","toggleSetTransition","hasTransitions","StatusHelper","resolution","status","TYPES","SetTypePopup","IssueTypeIcon_default","IssueType_IssueType","toggleSetType","setType","canSetType","IssueActionsBar_IssueActionsBar","_this","property","popup","apiCall","arguments","handleTransition","actions","canComment","isSecurityHotspot","effort","CommentDeletePopup","onDelete","IssueCommentLine_IssueCommentLine","openPopup","handleEdit","onEdit","toggleEditPopup","handleDelete","toggleDeletePopup","popupName","force","prevState","closePopups","author","authorName","displayName","authorActive","authorAvatar","dangerouslySetInnerHTML","__html","purify","htmlText","DateFromNow","date","createdAt","updatable","IssueChangelogDiff","message","diff","oldValue","newValue","measures","concat","ChangelogPopup_ChangelogPopup","changelog","loadChangelog","DateTimeFormatter","creationDate","userName","isUserActive","diffs","IssueChangelog_IssueChangelog","toggleChangelog","handleClick","mouseEnterDelay","IssueMessage_IssueMessage","openRule","rule","aria-label","engine","manualVulnerability","SimilarIssuesPopup_SimilarIssuesPopup","onFilter","subProject","path","ruleName","TagsIcon_default","QualifierIcon_default","qualifier","projectName","subProjectName","componentQualifier","componentLongName","SimilarIssuesFilter_SimilarIssuesFilter","handleFilter","FilterIcon_default","IssueTitleBar","hasSimilarIssuesFilter","issueUrl","urls","project","branches","branchLike","types","context","Consumer","externalRuleEngine","textRange","endLine","es","to","LinkIcon_default","IssueView_IssueView","handleCheck","onCheck","isClickable","node","toUpperCase","parentElement","editComment","deleteComment","hasCheckbox","issueClass","hotspot","issue-with-checkbox","selected","data-issue","role","tabIndex","comments","Checkbox_default","checked","__webpack_require__","d","__webpack_exports__","Issue_Issue","onPopupToggle","handleAssignement","bindShortcuts","nextProps","unbindShortcuts","defaultProps","content","module","i","options","hmr","transform","insertInto","locals","exports","push","longFormatterOption","DateFormatter","react__WEBPACK_IMPORTED_MODULE_0__","react_intl__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_helpers_dates__WEBPACK_IMPORTED_MODULE_2__","formatterOption","year","month","day","long","hour","minute","sonar_ui_common_components_icons_SeverityIcon__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_components_icons_SeverityIcon__WEBPACK_IMPORTED_MODULE_1___default","n","sonar_ui_common_helpers_l10n__WEBPACK_IMPORTED_MODULE_2__","Measure","sonar_ui_common_components_controls_Tooltip__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_components_controls_Tooltip__WEBPACK_IMPORTED_MODULE_1___default","sonar_ui_common_components_ui_Level__WEBPACK_IMPORTED_MODULE_2__","sonar_ui_common_components_ui_Level__WEBPACK_IMPORTED_MODULE_2___default","sonar_ui_common_components_ui_Rating__WEBPACK_IMPORTED_MODULE_3__","sonar_ui_common_components_ui_Rating__WEBPACK_IMPORTED_MODULE_3___default","sonar_ui_common_helpers_measures__WEBPACK_IMPORTED_MODULE_4__","_utils__WEBPACK_IMPORTED_MODULE_5__","decimals","metricKey","metricType","small","level","formattedValue","tooltip","Number","rating","enhanceMeasure","getLeakValue","getRatingTooltip","_helpers_measures__WEBPACK_IMPORTED_MODULE_0__","_helpers_periods__WEBPACK_IMPORTED_MODULE_1__","KNOWN_RATINGS","measure","metrics","metric","leak","periods","period","finalMetricKey","substr","getLeakPeriod","getPeriodLabel","getPeriodDate","sonar_ui_common_helpers_dates__WEBPACK_IMPORTED_MODULE_0__","sonar_ui_common_helpers_l10n__WEBPACK_IMPORTED_MODULE_1__","index","Array","isArray","find","getPeriod","dateFormatter","parameter","modeParam","mode","toLowerCase","classnames__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_components_icons_DropdownIcon__WEBPACK_IMPORTED_MODULE_2__","sonar_ui_common_components_icons_DropdownIcon__WEBPACK_IMPORTED_MODULE_2___default","sonar_ui_common_components_icons_TagsIcon__WEBPACK_IMPORTED_MODULE_3__","sonar_ui_common_components_icons_TagsIcon__WEBPACK_IMPORTED_MODULE_3___default","_ref$allowUpdate","CoverageRating","sonar_ui_common_components_lazyLoad__WEBPACK_IMPORTED_MODULE_1__","_app_theme__WEBPACK_IMPORTED_MODULE_2__","DonutChart","e","t","bind","SIZE_TO_WIDTH_MAPPING","normal","big","huge","SIZE_TO_THICKNESS_MAPPING","_ref$muted","muted","_ref$size","data","fill","numberValue","gray71","green","barBackgroundColor","red","width","thickness","height","MultiSelectOption_MultiSelectOption","evt","currentTarget","blur","onSelectChange","element","classnames","icon-checkbox-checked","icon-checkbox-invisible","activeClass","custom","renderLabel","MultiSelect_MultiSelect","handleSelectChange","onSelectItem","onUnselectItem","onSearchQuery","validateSearchInput","handleElementHover","activeIdx","getAllElements","toggleSelect","loading","stopLoading","isNewElement","elem","selectedElements","elements","updateSelectedElements","filterSelected","updateUnselectedElements","unselectedElements","slice","setElementActive","allElements","container","addEventListener","totalElements","searchInput","focus","removeEventListener","_this$props$allowSele","allowSelection","_this$props$allowNewE","allowNewElements","_this$props$footerNod","footerNode","_this$state","activeElement","showNewElement","infiniteList","listClasses","menu-vertically-limited","spacer-top","with-top-separator","with-bottom-separator","Boolean","ref","div","_helpers_urls__WEBPACK_IMPORTED_MODULE_3__","window","_common_MultiSelect__WEBPACK_IMPORTED_MODULE_2__","validateTag","replace","sonar_ui_common_components_icons_StatusIcon__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_components_icons_StatusIcon__WEBPACK_IMPORTED_MODULE_1___default","LocationIndex","leading","other","__rest","clickAttributes","is-leading","PAGE_SIZE","loadPageAndNext","toLine","page","pageSize","api_issues","p","r","loadPage","lastIssue","nextIssues","EMPTY_ARRAY","ZERO_LINE","code","duplicated","isNew","line","SourceViewerCode_SourceViewerCode","getDuplicationsForLine","duplicationsByLine","getIssuesForLine","issuesByLine","getIssueLocationsForLine","issueLocationsByLine","renderLine","displayCoverage","displayDuplications","displayIssues","highlightedLocationMessage","highlightedLocations","selectedIssue","sources","secondaryIssueLocations","issueLocations","duplicationsCount","duplications","issuesForLine","Line","displayAllIssues","displayLocationMarkers","highlighted","highlightedLine","helpers_lines","highlightedSymbols","symbolsByLine","issuePopup","last","hasSourcesAfter","linePopup","loadDuplications","onIssueChange","onIssuePopupToggle","onIssueSelect","onIssueUnselect","onIssuesClose","onIssuesOpen","onLinePopupToggle","onLocationSelect","onSymbolClick","openIssues","openIssuesByLine","previousLine","renderDuplicationPopup","scroll","_this$props2","_this$props2$issues","some","s","coverageStatus","hasFileIssues","hasSourcesBefore","loadingSourcesBefore","loadSourcesBefore","loadingSourcesAfter","loadSourcesAfter","MeasuresOverlayMeasure","data-metric","MeasuresOverlay_MeasuresOverlay","showAllMeasures","fetchData","Promise","all","fetchMeasures","fetchIssues","_ref2","facets","api_metrics","metricKeys","js_helpers_measures","api_measures","component","sourceViewerFile","withMetrics","keyBy_default","componentKeys","resolved","_ref3","severitiesFacet","f","tagsFacet","typesFacet","values","handleAllMeasuresClick","renderMeasure","renderLines","lines","ncloc","comment_lines","comment_lines_density","cognitive_complexity","complexity","function_complexity","renderBigMeasure","renderIssues","violations","sqale_index","sortBy_default","constants","val","helpers_measures","renderCoverage","coverage","uncovered_lines","lines_to_cover","uncovered_conditions","conditions_to_cover","renderDuplications","duplicated_lines_density","DuplicationsRating_default","duplicated_blocks","duplicated_lines","renderTests","tests","test_success_density","test_failures","test_errors","skipped_tests","test_execution_time","renderDomain","domain","renderAllMeasures","domains","groupBy_default","domainKeys","keys","odd","_","even","Modal_default","contentLabel","onClose","helpers_urls","SourceViewerHeader_SourceViewerHeader","measuresOverlay","handleShowMeasuresClick","handleMeasuresOverlayClose","openInWorkspace","openComponent","renderIssueMeasures","params","fileUuids","uuid","total","showMeasures","_this$props$sourceVie","unitTestsOrLines","rawSourcesLink","querystring_es3","request","helpers_path","clipboard","copyValue","canMarkAsFavorite","Favorite","favorite","fav","duplicationDensity","Dropdown_default","rel","overlayPlacement","ListIcon_default","LINES","SourceViewerBase_SourceViewerBase","loadSources","resolve","reject","from","aroundLine","max","firstSourceLine","loadIssues","uniqBy_default","indexing","computeCoverageStatus","lastSourceLine","fromLine","duplicatedFiles","files","handleLinePopupToggle","samePopup","closeLinePopup","handleIssuePopupToggle","handleSymbolClick","symbols","intersection_default","handleIssueSelect","handleIssueUnselect","handleOpenIssues","handleCloseIssues","handleIssueChange","_ref2$issues","newIssues","candidate","blocks","helpers_duplications","DuplicationPopup","inRemovedComponent","notAccessible","notExist","sourceRemoved","fetchComponent","isLineOutsideOfRange","fetchSources","reloadIssues","getCoverageStatus","lineNumber","firstLine","lastList","finalSources","onLoaded","onFailLoadSources","loadComponent","componentKey","slimHeader","SourceViewerHeaderSlim","_ref4","_this$state2","Alert","variant","source-duplications-expanded","SourceViewerContext","Provider","file","renderHeader","renderCode","_ref5","_ref6","SourceViewerBase_slicedToArray","sourceViewerComponent","leakPeriodDate","_fromLine","additionalFields","buildQuery","LocationMessage"],"mappings":"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","file":"js/289.m.d1084c20.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { IssueResponse } from '../../api/issues';\nimport { parseIssueFromResponse } from '../../helpers/issues';\n\nexport const updateIssue = (\n  onChange: (issue: T.Issue) => void,\n  resultPromise: Promise<IssueResponse>,\n  oldIssue?: T.Issue,\n  newIssue?: T.Issue\n) => {\n  const optimisticUpdate = oldIssue !== undefined && newIssue !== undefined;\n  if (optimisticUpdate) {\n    onChange(newIssue!);\n  }\n\n  resultPromise.then(\n    response => {\n      if (!optimisticUpdate) {\n        const issue = parseIssueFromResponse(\n          response.issue,\n          response.components,\n          response.users,\n          response.rules\n        );\n        onChange(issue);\n      }\n    },\n    () => {\n      if (optimisticUpdate) {\n        onChange(oldIssue!);\n      }\n    }\n  );\n};\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\n\ninterface Props {\n  active?: string;\n  item: string;\n  onHover?: (item: string) => void;\n  onSelect?: (item: string) => void;\n  title?: string;\n}\n\nexport default class SelectListItem extends React.PureComponent<Props> {\n  handleSelect = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    if (this.props.onSelect) {\n      this.props.onSelect(this.props.item);\n    }\n  };\n\n  handleHover = () => {\n    if (this.props.onHover) {\n      this.props.onHover(this.props.item);\n    }\n  };\n\n  renderLink() {\n    const children = this.props.children || this.props.item;\n    return (\n      <li>\n        <a\n          className={classNames({ active: this.props.active === this.props.item })}\n          href=\"#\"\n          onClick={this.handleSelect}\n          onFocus={this.handleHover}\n          onMouseOver={this.handleHover}>\n          {children}\n        </a>\n      </li>\n    );\n  }\n\n  render() {\n    return (\n      <Tooltip overlay={this.props.title || undefined} placement=\"right\">\n        {this.renderLink()}\n      </Tooltip>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as key from 'keymaster';\nimport { uniqueId } from 'lodash';\nimport * as React from 'react';\nimport SelectListItem from './SelectListItem';\n\ninterface Props {\n  className?: string;\n  items: string[];\n  currentItem: string;\n  onSelect: (item: string) => void;\n}\n\ninterface State {\n  active: string;\n}\n\nexport default class SelectList extends React.PureComponent<Props, State> {\n  currentKeyScope?: string;\n  previousFilter?: (event: any) => void;\n  previousKeyScope?: string;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      active: props.currentItem\n    };\n  }\n\n  componentDidMount() {\n    this.attachShortcuts();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (\n      prevProps.currentItem !== this.props.currentItem &&\n      !this.props.items.includes(this.state.active)\n    ) {\n      this.setState({ active: this.props.currentItem });\n    }\n  }\n\n  componentWillUnmount() {\n    this.detachShortcuts();\n  }\n\n  attachShortcuts = () => {\n    this.previousKeyScope = key.getScope();\n    this.previousFilter = key.filter;\n    this.currentKeyScope = uniqueId('key-scope');\n    key.setScope(this.currentKeyScope);\n\n    // sometimes there is a *focused* search field next to the SelectList component\n    // we need to allow shortcuts in this case, but only for the used keys\n    (key as any).filter = (event: KeyboardEvent & { target: HTMLElement }) => {\n      const { tagName } = event.target || event.srcElement;\n      const isInput = tagName === 'INPUT' || tagName === 'SELECT' || tagName === 'TEXTAREA';\n      return [13, 38, 40].includes(event.keyCode) || !isInput;\n    };\n\n    key('down', this.currentKeyScope, () => {\n      this.setState(this.selectNextElement);\n      return false;\n    });\n\n    key('up', this.currentKeyScope, () => {\n      this.setState(this.selectPreviousElement);\n      return false;\n    });\n\n    key('return', this.currentKeyScope, () => {\n      if (this.state.active != null) {\n        this.handleSelect(this.state.active);\n      }\n      return false;\n    });\n  };\n\n  detachShortcuts = () => {\n    if (this.previousKeyScope) {\n      key.setScope(this.previousKeyScope);\n    }\n    if (this.currentKeyScope) {\n      key.deleteScope(this.currentKeyScope);\n    }\n    (key as any).filter = this.previousFilter;\n  };\n\n  handleSelect = (item: string) => {\n    this.props.onSelect(item);\n  };\n\n  handleHover = (item: string) => {\n    this.setState({ active: item });\n  };\n\n  selectNextElement = (state: State, props: Props) => {\n    const idx = props.items.indexOf(state.active);\n    if (idx < 0) {\n      return { active: props.items[0] };\n    }\n    return { active: props.items[(idx + 1) % props.items.length] };\n  };\n\n  selectPreviousElement = (state: State, props: Props) => {\n    const idx = props.items.indexOf(state.active);\n    if (idx <= 0) {\n      return { active: props.items[props.items.length - 1] };\n    }\n    return { active: props.items[idx - 1] };\n  };\n\n  renderChild = (child: any) => {\n    if (child == null) {\n      return null;\n    }\n    // do not pass extra props to children like `<li className=\"divider\" />`\n    if (child.type !== SelectListItem) {\n      return child;\n    }\n    return React.cloneElement(child, {\n      active: this.state.active,\n      onHover: this.handleHover,\n      onSelect: this.handleSelect\n    });\n  };\n\n  render() {\n    const { children } = this.props;\n    const hasChildren = React.Children.count(children) > 0;\n    return (\n      <ul className={classNames('menu', this.props.className)}>\n        {hasChildren && React.Children.map(children, this.renderChild)}\n        {!hasChildren &&\n          this.props.items.map(item => (\n            <SelectListItem\n              active={this.state.active}\n              item={item}\n              key={item}\n              onHover={this.handleHover}\n              onSelect={this.handleSelect}\n            />\n          ))}\n      </ul>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { map } from 'lodash';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { searchMembers } from '../../../api/organizations';\nimport { searchUsers } from '../../../api/users';\nimport { isSonarCloud } from '../../../helpers/system';\nimport { isLoggedIn, isUserActive } from '../../../helpers/users';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\nimport { withCurrentUser } from '../../hoc/withCurrentUser';\nimport Avatar from '../../ui/Avatar';\n\ninterface Props {\n  currentUser: T.CurrentUser;\n  issue: Pick<T.Issue, 'projectOrganization'>;\n  onSelect: (login: string) => void;\n}\n\ninterface State {\n  currentUser: string;\n  query: string;\n  users: T.UserActive[];\n}\n\nconst LIST_SIZE = 10;\n\nexport class SetAssigneePopup extends React.PureComponent<Props, State> {\n  defaultUsersArray: T.UserActive[];\n\n  constructor(props: Props) {\n    super(props);\n    this.defaultUsersArray = [{ login: '', name: translate('unassigned') }];\n\n    if (isLoggedIn(props.currentUser)) {\n      this.defaultUsersArray = [props.currentUser, ...this.defaultUsersArray];\n    }\n\n    this.state = {\n      query: '',\n      users: this.defaultUsersArray,\n      currentUser: this.defaultUsersArray.length > 0 ? this.defaultUsersArray[0].login : ''\n    };\n  }\n\n  searchMembers = (query: string) => {\n    searchMembers({\n      organization: this.props.issue.projectOrganization,\n      q: query,\n      ps: LIST_SIZE\n    }).then(this.handleSearchResult, () => {});\n  };\n\n  searchUsers = (query: string) => {\n    searchUsers({ q: query, ps: LIST_SIZE }).then(this.handleSearchResult, () => {});\n  };\n\n  handleSearchResult = ({ users }: { users: T.UserBase[] }) => {\n    const activeUsers = users.filter(isUserActive);\n    this.setState({\n      users: activeUsers,\n      currentUser: activeUsers.length > 0 ? activeUsers[0].login : ''\n    });\n  };\n\n  handleSearchChange = (query: string) => {\n    if (query.length === 0) {\n      this.setState({\n        query,\n        users: this.defaultUsersArray,\n        currentUser: this.defaultUsersArray[0].login\n      });\n    } else {\n      this.setState({ query });\n      if (isSonarCloud()) {\n        this.searchMembers(query);\n      } else {\n        this.searchUsers(query);\n      }\n    }\n  };\n\n  render() {\n    return (\n      <DropdownOverlay noPadding={true}>\n        <div className=\"multi-select\">\n          <div className=\"menu-search\">\n            <SearchBox\n              autoFocus={true}\n              className=\"little-spacer-top\"\n              minLength={2}\n              onChange={this.handleSearchChange}\n              placeholder={translate('search.search_for_users')}\n              value={this.state.query}\n            />\n          </div>\n          <SelectList\n            currentItem={this.state.currentUser}\n            items={map(this.state.users, 'login')}\n            onSelect={this.props.onSelect}>\n            {this.state.users.map(user => (\n              <SelectListItem item={user.login} key={user.login}>\n                {!!user.login && (\n                  <Avatar className=\"spacer-right\" hash={user.avatar} name={user.name} size={16} />\n                )}\n                <span className=\"text-middle\" style={{ marginLeft: user.login ? 24 : undefined }}>\n                  {user.name}\n                </span>\n              </SelectListItem>\n            ))}\n          </SelectList>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n\nexport default withCurrentUser(SetAssigneePopup);\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport Avatar from '../../ui/Avatar';\nimport SetAssigneePopup from '../popups/SetAssigneePopup';\n\ninterface Props {\n  isOpen: boolean;\n  issue: Pick<\n    T.Issue,\n    'assignee' | 'assigneeActive' | 'assigneeAvatar' | 'assigneeName' | 'projectOrganization'\n  >;\n  canAssign: boolean;\n  onAssign: (login: string) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueAssign extends React.PureComponent<Props> {\n  toggleAssign = (open?: boolean) => {\n    this.props.togglePopup('assign', open);\n  };\n\n  handleClose = () => {\n    this.toggleAssign(false);\n  };\n\n  renderAssignee() {\n    const { issue } = this.props;\n    const assigneeName = issue.assigneeName || issue.assignee;\n\n    if (assigneeName) {\n      return (\n        <>\n          <span className=\"text-top\">\n            <Avatar\n              className=\"little-spacer-right\"\n              hash={issue.assigneeAvatar}\n              name={issue.assigneeName || issue.assignee}\n              size={16}\n            />\n          </span>\n          <span className=\"issue-meta-label\">\n            {issue.assigneeActive === false\n              ? translateWithParameters('user.x_deleted', assigneeName)\n              : assigneeName}\n          </span>\n        </>\n      );\n    }\n\n    return <span className=\"issue-meta-label\">{translate('unassigned')}</span>;\n  }\n\n  render() {\n    if (this.props.canAssign) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            closeOnEscape={true}\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canAssign}\n            overlay={<SetAssigneePopup issue={this.props.issue} onSelect={this.props.onAssign} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-assign\"\n              onClick={this.toggleAssign}>\n              {this.renderAssignee()}\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return this.renderAssignee();\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button, ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport MarkdownTips from '../../common/MarkdownTips';\n\ninterface Props {\n  comment?: Pick<T.IssueComment, 'markdown'>;\n  onComment: (text: string) => void;\n  toggleComment: (visible: boolean) => void;\n  placeholder: string;\n  placement?: PopupPlacement;\n  autoTriggered?: boolean;\n}\n\ninterface State {\n  textComment: string;\n}\n\nexport default class CommentPopup extends React.PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      textComment: props.comment ? props.comment.markdown : ''\n    };\n  }\n\n  handleCommentChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    this.setState({ textComment: event.target.value });\n  };\n\n  handleCommentClick = () => {\n    if (this.state.textComment.trim().length > 0) {\n      this.props.onComment(this.state.textComment);\n    }\n  };\n\n  handleCancelClick = () => {\n    this.props.toggleComment(false);\n  };\n\n  handleKeyboard = (event: React.KeyboardEvent) => {\n    if (event.keyCode === 13 && (event.metaKey || event.ctrlKey)) {\n      // Ctrl + Enter\n      this.handleCommentClick();\n    } else if ([37, 38, 39, 40].includes(event.keyCode)) {\n      // Arrow keys\n      event.stopPropagation();\n    }\n  };\n\n  render() {\n    const { comment, autoTriggered } = this.props;\n    return (\n      <DropdownOverlay placement={this.props.placement}>\n        <div className=\"issue-comment-bubble-popup\">\n          <div className=\"issue-comment-form-text\">\n            <textarea\n              autoFocus={true}\n              onChange={this.handleCommentChange}\n              onKeyDown={this.handleKeyboard}\n              placeholder={this.props.placeholder}\n              rows={2}\n              value={this.state.textComment}\n            />\n          </div>\n          <div className=\"issue-comment-form-footer\">\n            <div className=\"issue-comment-form-actions\">\n              <Button\n                className=\"js-issue-comment-submit little-spacer-right\"\n                disabled={this.state.textComment.trim().length < 1}\n                onClick={this.handleCommentClick}>\n                {comment && translate('save')}\n                {!comment && translate('issue.comment.submit')}\n              </Button>\n              <ResetButtonLink className=\"js-issue-comment-cancel\" onClick={this.handleCancelClick}>\n                {autoTriggered ? translate('skip') : translate('cancel')}\n              </ResetButtonLink>\n            </div>\n            <div className=\"issue-comment-form-tips\">\n              <MarkdownTips />\n            </div>\n          </div>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { addIssueComment } from '../../../api/issues';\nimport { updateIssue } from '../actions';\nimport CommentPopup from '../popups/CommentPopup';\n\ninterface Props {\n  commentAutoTriggered?: boolean;\n  commentPlaceholder: string;\n  currentPopup?: string;\n  issueKey: string;\n  onChange: (issue: T.Issue) => void;\n  toggleComment: (open?: boolean, placeholder?: string, autoTriggered?: boolean) => void;\n}\n\nexport default class IssueCommentAction extends React.PureComponent<Props> {\n  addComment = (text: string) => {\n    updateIssue(this.props.onChange, addIssueComment({ issue: this.props.issueKey, text }));\n    this.props.toggleComment(false);\n  };\n\n  handleCommentClick = () => {\n    this.props.toggleComment();\n  };\n\n  handleClose = () => {\n    this.props.toggleComment(false);\n  };\n\n  render() {\n    return (\n      <li className=\"issue-meta dropdown\">\n        <Toggler\n          closeOnClickOutside={false}\n          onRequestClose={this.handleClose}\n          open={this.props.currentPopup === 'comment'}\n          overlay={\n            <CommentPopup\n              autoTriggered={this.props.commentAutoTriggered}\n              onComment={this.addComment}\n              placeholder={this.props.commentPlaceholder}\n              toggleComment={this.props.toggleComment}\n            />\n          }>\n          <ButtonLink className=\"issue-action js-issue-comment\" onClick={this.handleCommentClick}>\n            <span className=\"issue-meta-label\">{translate('issue.comment.formlink')}</span>\n          </ButtonLink>\n        </Toggler>\n      </li>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport SeverityIcon from 'sonar-ui-common/components/icons/SeverityIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\n\ntype Props = {\n  issue: Pick<T.Issue, 'severity'>;\n  onSelect: (severity: string) => void;\n};\n\nconst SEVERITY = ['BLOCKER', 'CRITICAL', 'MAJOR', 'MINOR', 'INFO'];\n\nexport default function SetSeverityPopup({ issue, onSelect }: Props) {\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={issue.severity} items={SEVERITY} onSelect={onSelect}>\n        {SEVERITY.map(severity => (\n          <SelectListItem item={severity} key={severity}>\n            <SeverityIcon className=\"little-spacer-right\" severity={severity} />\n            {translate('severity', severity)}\n          </SelectListItem>\n        ))}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport { IssueResponse, setIssueSeverity } from '../../../api/issues';\nimport SeverityHelper from '../../shared/SeverityHelper';\nimport SetSeverityPopup from '../popups/SetSeverityPopup';\n\ninterface Props {\n  canSetSeverity: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'severity'>;\n  setIssueProperty: (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: T.RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueSeverity extends React.PureComponent<Props> {\n  toggleSetSeverity = (open?: boolean) => {\n    this.props.togglePopup('set-severity', open);\n  };\n\n  setSeverity = (severity: string) => {\n    this.props.setIssueProperty('severity', 'set-severity', setIssueSeverity, severity);\n  };\n\n  handleClose = () => {\n    this.toggleSetSeverity(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    if (this.props.canSetSeverity) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canSetSeverity}\n            overlay={<SetSeverityPopup issue={issue} onSelect={this.setSeverity} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-set-severity\"\n              onClick={this.toggleSetSeverity}>\n              <SeverityHelper className=\"issue-meta-label\" severity={issue.severity} />\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return <SeverityHelper className=\"issue-meta-label\" severity={issue.severity} />;\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { difference, without } from 'lodash';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { searchIssueTags } from '../../../api/issues';\nimport TagsSelector from '../../tags/TagsSelector';\n\ninterface Props {\n  organization: string;\n  selectedTags: string[];\n  setTags: (tags: string[]) => void;\n}\n\ninterface State {\n  searchResult: string[];\n}\n\nconst LIST_SIZE = 10;\n\nexport default class SetIssueTagsPopup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { searchResult: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  onSearch = (query: string) => {\n    return searchIssueTags({\n      q: query,\n      ps: Math.min(this.props.selectedTags.length - 1 + LIST_SIZE, 100),\n      organization: this.props.organization\n    }).then(\n      (tags: string[]) => {\n        if (this.mounted) {\n          this.setState({ searchResult: tags });\n        }\n      },\n      () => {}\n    );\n  };\n\n  onSelect = (tag: string) => {\n    this.props.setTags([...this.props.selectedTags, tag]);\n  };\n\n  onUnselect = (tag: string) => {\n    this.props.setTags(without(this.props.selectedTags, tag));\n  };\n\n  render() {\n    const availableTags = difference(this.state.searchResult, this.props.selectedTags);\n    return (\n      <DropdownOverlay placement={PopupPlacement.BottomRight}>\n        <TagsSelector\n          listSize={LIST_SIZE}\n          onSearch={this.onSearch}\n          onSelect={this.onSelect}\n          onUnselect={this.onUnselect}\n          selectedTags={this.props.selectedTags}\n          tags={availableTags}\n        />\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { setIssueTags } from '../../../api/issues';\nimport TagsList from '../../tags/TagsList';\nimport { updateIssue } from '../actions';\nimport SetIssueTagsPopup from '../popups/SetIssueTagsPopup';\n\ninterface Props {\n  canSetTags: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'key' | 'projectOrganization' | 'tags'>;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueTags extends React.PureComponent<Props> {\n  toggleSetTags = (open?: boolean) => {\n    this.props.togglePopup('edit-tags', open);\n  };\n\n  setTags = (tags: string[]) => {\n    const { issue } = this.props;\n    const newIssue = { ...issue, tags };\n    updateIssue(\n      this.props.onChange,\n      setIssueTags({ issue: issue.key, tags: tags.join(',') }),\n      issue as T.Issue,\n      newIssue as T.Issue\n    );\n  };\n\n  handleClose = () => {\n    this.toggleSetTags(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    const { tags = [] } = issue;\n\n    if (this.props.canSetTags) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen}\n            overlay={\n              <SetIssueTagsPopup\n                organization={issue.projectOrganization}\n                selectedTags={tags}\n                setTags={this.setTags}\n              />\n            }>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-edit-tags\"\n              onClick={this.toggleSetTags}>\n              <TagsList\n                allowUpdate={this.props.canSetTags}\n                tags={\n                  issue.tags && issue.tags.length > 0 ? issue.tags : [translate('issue.no_tag')]\n                }\n              />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <TagsList\n          allowUpdate={this.props.canSetTags}\n          className=\"note\"\n          tags={issue.tags && issue.tags.length > 0 ? issue.tags : [translate('issue.no_tag')]}\n        />\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { hasMessage, translate } from 'sonar-ui-common/helpers/l10n';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\n\nexport interface Props {\n  fromHotspot: boolean;\n  onSelect: (transition: string) => void;\n  transitions: string[];\n  type: T.IssueType;\n}\n\nexport default function SetTransitionPopup({ fromHotspot, onSelect, transitions, type }: Props) {\n  const isManualVulnerability = fromHotspot && type === 'VULNERABILITY';\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={transitions[0]} items={transitions} onSelect={onSelect}>\n        {transitions.map(transition => {\n          const [name, description] = translateTransition(transition, isManualVulnerability);\n          return (\n            <SelectListItem item={transition} key={transition} title={description}>\n              {name}\n            </SelectListItem>\n          );\n        })}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n\nfunction translateTransition(transition: string, isManualVulnerability: boolean) {\n  return isManualVulnerability && hasMessage('vulnerability.transition', transition)\n    ? [\n        translate('vulnerability.transition', transition),\n        translate('vulnerability.transition', transition, 'description')\n      ]\n    : [\n        translate('issue.transition', transition),\n        translate('issue.transition', transition, 'description')\n      ];\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport { setIssueTransition } from '../../../api/issues';\nimport StatusHelper from '../../shared/StatusHelper';\nimport { updateIssue } from '../actions';\nimport SetTransitionPopup from '../popups/SetTransitionPopup';\n\ninterface Props {\n  hasTransitions: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'fromHotspot' | 'key' | 'resolution' | 'status' | 'transitions' | 'type'>;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueTransition extends React.PureComponent<Props> {\n  setTransition = (transition: string) => {\n    updateIssue(\n      this.props.onChange,\n      setIssueTransition({ issue: this.props.issue.key, transition })\n    );\n    this.toggleSetTransition();\n  };\n\n  toggleSetTransition = (open?: boolean) => {\n    this.props.togglePopup('transition', open);\n  };\n\n  handleClose = () => {\n    this.toggleSetTransition(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    if (this.props.hasTransitions) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.hasTransitions}\n            overlay={\n              <SetTransitionPopup\n                fromHotspot={issue.fromHotspot}\n                onSelect={this.setTransition}\n                transitions={issue.transitions}\n                type={issue.type}\n              />\n            }>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-transition\"\n              onClick={this.toggleSetTransition}>\n              <StatusHelper\n                className=\"issue-meta-label\"\n                resolution={issue.resolution}\n                status={issue.status}\n              />\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <StatusHelper\n          className=\"issue-meta-label\"\n          resolution={issue.resolution}\n          status={issue.status}\n        />\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\n\ninterface Props {\n  issue: Pick<T.Issue, 'type'>;\n  onSelect: (type: T.IssueType) => void;\n}\n\nconst TYPES = ['BUG', 'VULNERABILITY', 'CODE_SMELL'];\n\nexport default function SetTypePopup({ issue, onSelect }: Props) {\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={issue.type} items={TYPES} onSelect={onSelect}>\n        {TYPES.map(type => (\n          <SelectListItem item={type} key={type}>\n            <IssueTypeIcon className=\"little-spacer-right\" query={type} />\n            {translate('issue.type', type)}\n          </SelectListItem>\n        ))}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { IssueResponse, setIssueType } from '../../../api/issues';\nimport SetTypePopup from '../popups/SetTypePopup';\n\ninterface Props {\n  canSetType: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'type'>;\n  setIssueProperty: (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: T.RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueType extends React.PureComponent<Props> {\n  toggleSetType = (open?: boolean) => {\n    this.props.togglePopup('set-type', open);\n  };\n\n  setType = (type: string) => {\n    this.props.setIssueProperty('type', 'set-type', setIssueType, type);\n  };\n\n  handleClose = () => {\n    this.toggleSetType(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    if (this.props.canSetType) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canSetType}\n            overlay={<SetTypePopup issue={issue} onSelect={this.setType} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-set-type\"\n              onClick={this.toggleSetType}>\n              <IssueTypeIcon className=\"little-spacer-right\" query={issue.type} />\n              {translate('issue.type', issue.type)}\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <span>\n          <IssueTypeIcon className=\"little-spacer-right\" query={issue.type} />\n          {translate('issue.type', issue.type)}\n        </span>\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { IssueResponse } from '../../../api/issues';\nimport { updateIssue } from '../actions';\nimport IssueAssign from './IssueAssign';\nimport IssueCommentAction from './IssueCommentAction';\nimport IssueSeverity from './IssueSeverity';\nimport IssueTags from './IssueTags';\nimport IssueTransition from './IssueTransition';\nimport IssueType from './IssueType';\n\ninterface Props {\n  issue: T.Issue;\n  currentPopup?: string;\n  onAssign: (login: string) => void;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\ninterface State {\n  commentAutoTriggered: boolean;\n  commentPlaceholder: string;\n}\n\nexport default class IssueActionsBar extends React.PureComponent<Props, State> {\n  state: State = {\n    commentAutoTriggered: false,\n    commentPlaceholder: ''\n  };\n\n  setIssueProperty = (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: T.RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => {\n    const { issue } = this.props;\n    if (issue[property] !== value) {\n      const newIssue = { ...issue, [property]: value };\n      updateIssue(\n        this.props.onChange,\n        apiCall({ issue: issue.key, [property]: value }),\n        issue,\n        newIssue\n      );\n    }\n    this.props.togglePopup(popup, false);\n  };\n\n  toggleComment = (open: boolean | undefined, placeholder = '', autoTriggered = false) => {\n    this.setState({\n      commentPlaceholder: placeholder,\n      commentAutoTriggered: autoTriggered\n    });\n    this.props.togglePopup('comment', open);\n  };\n\n  handleTransition = (issue: T.Issue) => {\n    this.props.onChange(issue);\n    if (\n      issue.resolution === 'FALSE-POSITIVE' ||\n      (issue.resolution === 'WONTFIX' && issue.type !== 'SECURITY_HOTSPOT')\n    ) {\n      this.toggleComment(true, translate('issue.comment.explain_why'), true);\n    }\n  };\n\n  render() {\n    const { issue } = this.props;\n    const canAssign = issue.actions.includes('assign');\n    const canComment = issue.actions.includes('comment');\n    const canSetSeverity = issue.actions.includes('set_severity');\n    const canSetType = issue.actions.includes('set_type');\n    const canSetTags = issue.actions.includes('set_tags');\n    const hasTransitions = issue.transitions && issue.transitions.length > 0;\n    const isSecurityHotspot = issue.type === 'SECURITY_HOTSPOT';\n\n    return (\n      <div className=\"issue-actions\">\n        <ul className=\"issue-meta-list\">\n          <li className=\"issue-meta\">\n            <IssueType\n              canSetType={canSetType}\n              isOpen={this.props.currentPopup === 'set-type' && canSetType}\n              issue={issue}\n              setIssueProperty={this.setIssueProperty}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n          {!isSecurityHotspot && (\n            <li className=\"issue-meta\">\n              <IssueSeverity\n                canSetSeverity={canSetSeverity}\n                isOpen={this.props.currentPopup === 'set-severity' && canSetSeverity}\n                issue={issue}\n                setIssueProperty={this.setIssueProperty}\n                togglePopup={this.props.togglePopup}\n              />\n            </li>\n          )}\n          <li className=\"issue-meta\">\n            <IssueTransition\n              hasTransitions={hasTransitions}\n              isOpen={this.props.currentPopup === 'transition' && hasTransitions}\n              issue={issue}\n              onChange={this.handleTransition}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n          <li className=\"issue-meta\">\n            <IssueAssign\n              canAssign={canAssign}\n              isOpen={this.props.currentPopup === 'assign' && canAssign}\n              issue={issue}\n              onAssign={this.props.onAssign}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n          {!isSecurityHotspot && issue.effort && (\n            <li className=\"issue-meta\">\n              <span className=\"issue-meta-label\">\n                {translateWithParameters('issue.x_effort', issue.effort)}\n              </span>\n            </li>\n          )}\n          {canComment && (\n            <IssueCommentAction\n              commentAutoTriggered={this.state.commentAutoTriggered}\n              commentPlaceholder={this.state.commentPlaceholder}\n              currentPopup={this.props.currentPopup}\n              issueKey={issue.key}\n              onChange={this.props.onChange}\n              toggleComment={this.toggleComment}\n            />\n          )}\n        </ul>\n        <ul className=\"list-inline\">\n          <li className=\"issue-meta js-issue-tags\">\n            <IssueTags\n              canSetTags={canSetTags}\n              isOpen={this.props.currentPopup === 'edit-tags' && canSetTags}\n              issue={issue}\n              onChange={this.props.onChange}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n        </ul>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  onDelete: () => void;\n}\n\nexport default function CommentDeletePopup({ onDelete }: Props) {\n  return (\n    <DropdownOverlay placement={PopupPlacement.BottomRight}>\n      <div className=\"menu is-container\">\n        <div className=\"spacer-bottom\">{translate('issue.comment.delete_confirm_message')}</div>\n        <Button className=\"button-red\" onClick={onDelete}>\n          {translate('delete')}\n        </Button>\n      </div>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sanitize } from 'dompurify';\nimport * as React from 'react';\nimport { DeleteButton, EditButton } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport DateFromNow from '../../intl/DateFromNow';\nimport Avatar from '../../ui/Avatar';\nimport CommentDeletePopup from '../popups/CommentDeletePopup';\nimport CommentPopup from '../popups/CommentPopup';\n\ninterface Props {\n  comment: T.IssueComment;\n  onDelete: (comment: string) => void;\n  onEdit: (comment: string, text: string) => void;\n}\n\ninterface State {\n  openPopup: string;\n}\n\nexport default class IssueCommentLine extends React.PureComponent<Props, State> {\n  state: State = {\n    openPopup: ''\n  };\n\n  handleEdit = (text: string) => {\n    this.props.onEdit(this.props.comment.key, text);\n    this.toggleEditPopup(false);\n  };\n\n  handleDelete = () => {\n    this.props.onDelete(this.props.comment.key);\n    this.toggleDeletePopup(false);\n  };\n\n  togglePopup = (popupName: string, force?: boolean) => {\n    this.setState(prevState => {\n      if (prevState.openPopup !== popupName && force !== false) {\n        return { openPopup: popupName };\n      } else if (prevState.openPopup === popupName && force !== true) {\n        return { openPopup: '' };\n      }\n      return prevState;\n    });\n  };\n\n  toggleDeletePopup = (force?: boolean) => {\n    this.togglePopup('delete', force);\n  };\n\n  toggleEditPopup = (force?: boolean) => {\n    this.togglePopup('edit', force);\n  };\n\n  closePopups = () => {\n    this.setState({ openPopup: '' });\n  };\n\n  render() {\n    const { comment } = this.props;\n    const author = comment.authorName || comment.author;\n    const displayName =\n      comment.authorActive === false && author\n        ? translateWithParameters('user.x_deleted', author)\n        : author;\n    return (\n      <div className=\"issue-comment\">\n        <div className=\"issue-comment-author\" title={displayName}>\n          <Avatar\n            className=\"little-spacer-right\"\n            hash={comment.authorAvatar}\n            name={author}\n            size={16}\n          />\n          {displayName}\n        </div>\n        <div\n          className=\"issue-comment-text markdown\"\n          dangerouslySetInnerHTML={{ __html: sanitize(comment.htmlText) }}\n        />\n        <div className=\"issue-comment-age\">\n          <DateFromNow date={comment.createdAt} />\n        </div>\n        <div className=\"issue-comment-actions\">\n          {comment.updatable && (\n            <div className=\"dropdown\">\n              <Toggler\n                closeOnClickOutside={false}\n                onRequestClose={this.closePopups}\n                open={this.state.openPopup === 'edit'}\n                overlay={\n                  <CommentPopup\n                    comment={comment}\n                    onComment={this.handleEdit}\n                    placeholder=\"\"\n                    placement={PopupPlacement.BottomRight}\n                    toggleComment={this.toggleEditPopup}\n                  />\n                }>\n                <EditButton\n                  className=\"js-issue-comment-edit button-small\"\n                  onClick={this.toggleEditPopup}\n                />\n              </Toggler>\n            </div>\n          )}\n          {comment.updatable && (\n            <div className=\"dropdown\">\n              <Toggler\n                onRequestClose={this.closePopups}\n                open={this.state.openPopup === 'delete'}\n                overlay={<CommentDeletePopup onDelete={this.handleDelete} />}>\n                <DeleteButton\n                  className=\"js-issue-comment-delete button-small\"\n                  onClick={this.toggleDeletePopup}\n                />\n              </Toggler>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\n\ninterface Props {\n  diff: T.IssueChangelogDiff;\n}\n\nexport default function IssueChangelogDiff({ diff }: Props) {\n  if (diff.key === 'file') {\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.file_move',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (diff.key === 'from_long_branch') {\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.from_long_branch',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (diff.key === 'from_short_branch') {\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.from_short_branch',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (diff.key === 'line') {\n    return <p>{translateWithParameters('issue.changelog.line_removed_X', diff.oldValue || '')}</p>;\n  }\n\n  let message;\n  if (diff.newValue != null) {\n    let { newValue } = diff;\n    if (diff.key === 'effort') {\n      newValue = formatMeasure(diff.newValue, 'WORK_DUR');\n    }\n    message = translateWithParameters(\n      'issue.changelog.changed_to',\n      translate('issue.changelog.field', diff.key),\n      newValue\n    );\n  } else {\n    message = translateWithParameters(\n      'issue.changelog.removed',\n      translate('issue.changelog.field', diff.key)\n    );\n  }\n\n  if (diff.oldValue != null) {\n    let { oldValue } = diff;\n    if (diff.key === 'effort') {\n      oldValue = formatMeasure(diff.oldValue, 'WORK_DUR');\n    }\n    message += ` (${translateWithParameters('issue.changelog.was', oldValue)})`;\n  }\n  return <p>{message}</p>;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { getIssueChangelog } from '../../../api/issues';\nimport DateTimeFormatter from '../../intl/DateTimeFormatter';\nimport Avatar from '../../ui/Avatar';\nimport IssueChangelogDiff from '../components/IssueChangelogDiff';\n\ninterface Props {\n  issue: Pick<T.Issue, 'author' | 'creationDate' | 'key'>;\n}\n\ninterface State {\n  changelog: T.IssueChangelog[];\n}\n\nexport default class ChangelogPopup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { changelog: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadChangelog();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadChangelog() {\n    getIssueChangelog(this.props.issue.key).then(\n      ({ changelog }) => {\n        if (this.mounted) {\n          this.setState({ changelog });\n        }\n      },\n      () => {}\n    );\n  }\n\n  render() {\n    const { issue } = this.props;\n    const { author } = issue;\n    return (\n      <DropdownOverlay placement={PopupPlacement.BottomRight}>\n        <div className=\"menu is-container issue-changelog\">\n          <table className=\"spaced\">\n            <tbody>\n              <tr>\n                <td className=\"thin text-left text-top nowrap\">\n                  <DateTimeFormatter date={issue.creationDate} />\n                </td>\n                <td className=\"text-left text-top\">\n                  {author ? `${translate('created_by')} ${author}` : translate('created')}\n                </td>\n              </tr>\n\n              {this.state.changelog.map((item, idx) => {\n                const userName = item.userName || item.user;\n\n                return (\n                  <tr key={idx}>\n                    <td className=\"thin text-left text-top nowrap\">\n                      <DateTimeFormatter date={item.creationDate} />\n                    </td>\n                    <td className=\"text-left text-top\">\n                      {userName && (\n                        <p>\n                          <Avatar\n                            className=\"little-spacer-right\"\n                            hash={item.avatar}\n                            name={userName}\n                            size={16}\n                          />\n                          {item.isUserActive\n                            ? userName\n                            : translateWithParameters('user.x_deleted', userName)}\n                        </p>\n                      )}\n                      {item.diffs.map(diff => (\n                        <IssueChangelogDiff diff={diff} key={diff.key} />\n                      ))}\n                    </td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport DateFromNow from '../../intl/DateFromNow';\nimport DateTimeFormatter from '../../intl/DateTimeFormatter';\nimport ChangelogPopup from '../popups/ChangelogPopup';\n\ninterface Props {\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'author' | 'creationDate' | 'key'>;\n  creationDate: string;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueChangelog extends React.PureComponent<Props> {\n  toggleChangelog = (open?: boolean) => {\n    this.props.togglePopup('changelog', open);\n  };\n\n  handleClick = () => {\n    this.toggleChangelog();\n  };\n\n  handleClose = () => {\n    this.toggleChangelog(false);\n  };\n\n  render() {\n    return (\n      <div className=\"dropdown\">\n        <Toggler\n          onRequestClose={this.handleClose}\n          open={this.props.isOpen}\n          overlay={<ChangelogPopup issue={this.props.issue} />}>\n          <Tooltip\n            mouseEnterDelay={0.5}\n            overlay={<DateTimeFormatter date={this.props.creationDate} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-show-changelog\"\n              onClick={this.handleClick}>\n              <span className=\"issue-meta-label\">\n                <DateFromNow date={this.props.creationDate} />\n              </span>\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Tooltip>\n        </Toggler>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { WorkspaceContextShape } from '../../workspace/context';\n\ninterface Props {\n  engine?: string;\n  manualVulnerability: boolean;\n  message: string;\n  openRule: WorkspaceContextShape['openRule'];\n  organization: string;\n  rule: string;\n}\n\nexport default class IssueMessage extends React.PureComponent<Props> {\n  handleClick = () => {\n    this.props.openRule({\n      key: this.props.rule,\n      organization: this.props.organization\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"issue-message\">\n        <span className=\"little-spacer-right\">{this.props.message}</span>\n        <Button\n          aria-label={translate('issue.rule_details')}\n          className=\"button button-grey button-tiny spacer-right text-top\"\n          onClick={this.handleClick}>\n          {translate('issue.see_rule')}\n        </Button>\n        {this.props.engine && (\n          <Tooltip\n            overlay={translateWithParameters('issue.from_external_rule_engine', this.props.engine)}>\n            <div className=\"badge spacer-right text-top\">{this.props.engine}</div>\n          </Tooltip>\n        )}\n        {this.props.manualVulnerability && (\n          <Tooltip overlay={translate('issue.manual_vulnerability.description')}>\n            <div className=\"badge spacer-right text-top\">\n              {translate('issue.manual_vulnerability')}\n            </div>\n          </Tooltip>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { fileFromPath, limitComponentName } from 'sonar-ui-common/helpers/path';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\nimport SeverityHelper from '../../shared/SeverityHelper';\nimport StatusHelper from '../../shared/StatusHelper';\nimport Avatar from '../../ui/Avatar';\n\ninterface Props {\n  issue: T.Issue;\n  onFilter: (property: string, issue: T.Issue) => void;\n}\n\nexport default class SimilarIssuesPopup extends React.PureComponent<Props> {\n  handleSelect = (property: string) => {\n    this.props.onFilter(property, this.props.issue);\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    const items = [\n      'type',\n      'severity',\n      'status',\n      'resolution',\n      'assignee',\n      'rule',\n      ...(issue.tags || []).map(tag => `tag###${tag}`),\n      'project',\n      issue.subProject ? 'module' : undefined,\n      'file'\n    ].filter(item => item) as string[];\n\n    const assignee = issue.assigneeName || issue.assignee;\n\n    return (\n      <DropdownOverlay noPadding={true}>\n        <header className=\"menu-search\">\n          <h6>{translate('issue.filter_similar_issues')}</h6>\n        </header>\n\n        <SelectList\n          className=\"issues-similar-issues-menu\"\n          currentItem={items[0]}\n          items={items}\n          onSelect={this.handleSelect}>\n          <SelectListItem item=\"type\">\n            <IssueTypeIcon className=\"little-spacer-right\" query={issue.type} />\n            {translate('issue.type', issue.type)}\n          </SelectListItem>\n\n          <SelectListItem item=\"severity\">\n            <SeverityHelper severity={issue.severity} />\n          </SelectListItem>\n\n          <SelectListItem item=\"status\">\n            <StatusHelper resolution={undefined} status={issue.status} />\n          </SelectListItem>\n\n          <SelectListItem item=\"resolution\">\n            {issue.resolution != null\n              ? translate('issue.resolution', issue.resolution)\n              : translate('unresolved')}\n          </SelectListItem>\n\n          <SelectListItem item=\"assignee\">\n            {assignee ? (\n              <span>\n                {translate('assigned_to')}\n                <Avatar\n                  className=\"little-spacer-left little-spacer-right\"\n                  hash={issue.assigneeAvatar}\n                  name={assignee}\n                  size={16}\n                />\n                {issue.assigneeActive === false\n                  ? translateWithParameters('user.x_deleted', assignee)\n                  : assignee}\n              </span>\n            ) : (\n              translate('unassigned')\n            )}\n          </SelectListItem>\n\n          <li className=\"divider\" />\n\n          <SelectListItem item=\"rule\">{limitComponentName(issue.ruleName)}</SelectListItem>\n\n          {issue.tags != null &&\n            issue.tags.map(tag => (\n              <SelectListItem item={`tag###${tag}`} key={`tag###${tag}`}>\n                <TagsIcon className=\"icon-half-transparent little-spacer-right text-middle\" />\n                <span className=\"text-middle\">{tag}</span>\n              </SelectListItem>\n            ))}\n\n          <li className=\"divider\" />\n\n          <SelectListItem item=\"project\">\n            <QualifierIcon className=\"little-spacer-right\" qualifier=\"TRK\" />\n            {issue.projectName}\n          </SelectListItem>\n\n          {issue.subProject != null && (\n            <SelectListItem item=\"module\">\n              <QualifierIcon className=\"little-spacer-right\" qualifier=\"BRC\" />\n              {issue.subProjectName}\n            </SelectListItem>\n          )}\n\n          <SelectListItem item=\"file\">\n            <QualifierIcon className=\"little-spacer-right\" qualifier={issue.componentQualifier} />\n            {fileFromPath(issue.componentLongName)}\n          </SelectListItem>\n        </SelectList>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport FilterIcon from 'sonar-ui-common/components/icons/FilterIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SimilarIssuesPopup from '../popups/SimilarIssuesPopup';\n\ninterface Props {\n  isOpen: boolean;\n  issue: T.Issue;\n  togglePopup: (popup: string, show?: boolean) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n}\n\nexport default class SimilarIssuesFilter extends React.PureComponent<Props> {\n  handleFilter = (property: string, issue: T.Issue) => {\n    this.togglePopup(false);\n    if (this.props.onFilter) {\n      this.props.onFilter(property, issue);\n    }\n  };\n\n  togglePopup = (open?: boolean) => {\n    this.props.togglePopup('similarIssues', open);\n  };\n\n  handleClose = () => {\n    this.togglePopup(false);\n  };\n\n  render() {\n    return (\n      <div className=\"dropdown\">\n        <Toggler\n          onRequestClose={this.handleClose}\n          open={this.props.isOpen}\n          overlay={<SimilarIssuesPopup issue={this.props.issue} onFilter={this.handleFilter} />}>\n          <ButtonLink\n            aria-label={translate('issue.filter_similar_issues')}\n            className=\"issue-action issue-action-with-options js-issue-filter\"\n            onClick={this.togglePopup}\n            title={translate('issue.filter_similar_issues')}>\n            <FilterIcon className=\"icon-half-transparent\" />\n            <DropdownIcon className=\"icon-half-transparent\" />\n          </ButtonLink>\n        </Toggler>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport LinkIcon from 'sonar-ui-common/components/icons/LinkIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getBranchLikeQuery } from '../../../helpers/branches';\nimport { getComponentIssuesUrl } from '../../../helpers/urls';\nimport { WorkspaceContext } from '../../workspace/context';\nimport IssueChangelog from './IssueChangelog';\nimport IssueMessage from './IssueMessage';\nimport SimilarIssuesFilter from './SimilarIssuesFilter';\n\ninterface Props {\n  branchLike?: T.BranchLike;\n  currentPopup?: string;\n  issue: T.Issue;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default function IssueTitleBar(props: Props) {\n  const { issue } = props;\n  const hasSimilarIssuesFilter = props.onFilter != null;\n\n  const issueUrl = getComponentIssuesUrl(issue.project, {\n    ...getBranchLikeQuery(props.branchLike),\n    issues: issue.key,\n    open: issue.key,\n    types: issue.type === 'SECURITY_HOTSPOT' ? issue.type : undefined\n  });\n\n  return (\n    <div className=\"issue-row\">\n      <WorkspaceContext.Consumer>\n        {({ openRule }) => (\n          <IssueMessage\n            engine={issue.externalRuleEngine}\n            manualVulnerability={issue.fromHotspot && issue.type === 'VULNERABILITY'}\n            message={issue.message}\n            openRule={openRule}\n            organization={issue.organization}\n            rule={issue.rule}\n          />\n        )}\n      </WorkspaceContext.Consumer>\n\n      <div className=\"issue-row-meta\">\n        <ul className=\"issue-meta-list\">\n          <li className=\"issue-meta\">\n            <IssueChangelog\n              creationDate={issue.creationDate}\n              isOpen={props.currentPopup === 'changelog'}\n              issue={issue}\n              togglePopup={props.togglePopup}\n            />\n          </li>\n          {issue.textRange != null && (\n            <li className=\"issue-meta\">\n              <span className=\"issue-meta-label\" title={translate('line_number')}>\n                L{issue.textRange.endLine}\n              </span>\n            </li>\n          )}\n          <li className=\"issue-meta\">\n            <Link\n              className=\"js-issue-permalink link-no-underline\"\n              target=\"_blank\"\n              title={translate('permalink')}\n              to={issueUrl}>\n              <LinkIcon />\n            </Link>\n          </li>\n          {hasSimilarIssuesFilter && (\n            <li className=\"issue-meta\">\n              <SimilarIssuesFilter\n                isOpen={props.currentPopup === 'similarIssues'}\n                issue={issue}\n                onFilter={props.onFilter}\n                togglePopup={props.togglePopup}\n              />\n            </li>\n          )}\n        </ul>\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport Checkbox from 'sonar-ui-common/components/controls/Checkbox';\nimport { deleteIssueComment, editIssueComment } from '../../api/issues';\nimport { updateIssue } from './actions';\nimport IssueActionsBar from './components/IssueActionsBar';\nimport IssueCommentLine from './components/IssueCommentLine';\nimport IssueTitleBar from './components/IssueTitleBar';\n\ninterface Props {\n  branchLike?: T.BranchLike;\n  checked?: boolean;\n  currentPopup?: string;\n  issue: T.Issue;\n  onAssign: (login: string) => void;\n  onChange: (issue: T.Issue) => void;\n  onCheck?: (issue: string) => void;\n  onClick: (issueKey: string) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  selected: boolean;\n  togglePopup: (popup: string, show: boolean | void) => void;\n}\n\nexport default class IssueView extends React.PureComponent<Props> {\n  handleCheck = () => {\n    if (this.props.onCheck) {\n      this.props.onCheck(this.props.issue.key);\n    }\n  };\n\n  handleClick = (event: React.MouseEvent<HTMLDivElement>) => {\n    if (!isClickable(event.target as HTMLElement) && this.props.onClick) {\n      event.preventDefault();\n      this.props.onClick(this.props.issue.key);\n    }\n  };\n\n  editComment = (comment: string, text: string) => {\n    updateIssue(this.props.onChange, editIssueComment({ comment, text }));\n  };\n\n  deleteComment = (comment: string) => {\n    updateIssue(this.props.onChange, deleteIssueComment({ comment }));\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    const hasCheckbox = this.props.onCheck != null;\n\n    const issueClass = classNames('issue', {\n      hotspot: issue.type === 'SECURITY_HOTSPOT',\n      'issue-with-checkbox': hasCheckbox,\n      selected: this.props.selected\n    });\n\n    return (\n      <div\n        className={issueClass}\n        data-issue={issue.key}\n        onClick={this.handleClick}\n        role=\"listitem\"\n        tabIndex={0}>\n        <IssueTitleBar\n          branchLike={this.props.branchLike}\n          currentPopup={this.props.currentPopup}\n          issue={issue}\n          onFilter={this.props.onFilter}\n          togglePopup={this.props.togglePopup}\n        />\n        <IssueActionsBar\n          currentPopup={this.props.currentPopup}\n          issue={issue}\n          onAssign={this.props.onAssign}\n          onChange={this.props.onChange}\n          togglePopup={this.props.togglePopup}\n        />\n        {issue.comments && issue.comments.length > 0 && (\n          <div className=\"issue-comments\">\n            {issue.comments.map(comment => (\n              <IssueCommentLine\n                comment={comment}\n                key={comment.key}\n                onDelete={this.deleteComment}\n                onEdit={this.editComment}\n              />\n            ))}\n          </div>\n        )}\n        {hasCheckbox && (\n          <>\n            <Checkbox\n              checked={this.props.checked || false}\n              className=\"issue-checkbox-container\"\n              onCheck={this.handleCheck}\n            />\n          </>\n        )}\n      </div>\n    );\n  }\n}\n\nfunction isClickable(node: HTMLElement | undefined | null): boolean {\n  if (!node) {\n    return false;\n  }\n  const clickableTags = ['A', 'BUTTON', 'INPUT', 'TEXTAREA'];\n  const tagName = (node.tagName || '').toUpperCase();\n  return clickableTags.includes(tagName) || isClickable(node.parentElement);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as key from 'keymaster';\nimport * as React from 'react';\nimport { setIssueAssignee } from '../../api/issues';\nimport { updateIssue } from './actions';\nimport './Issue.css';\nimport IssueView from './IssueView';\n\ninterface Props {\n  branchLike?: T.BranchLike;\n  checked?: boolean;\n  issue: T.Issue;\n  onChange: (issue: T.Issue) => void;\n  onCheck?: (issue: string) => void;\n  onClick: (issueKey: string) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  onPopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  openPopup?: string;\n  selected: boolean;\n}\n\nexport default class Issue extends React.PureComponent<Props> {\n  static defaultProps = {\n    selected: false\n  };\n\n  componentDidMount() {\n    if (this.props.selected) {\n      this.bindShortcuts();\n    }\n  }\n\n  componentWillUpdate(nextProps: Props) {\n    if (!nextProps.selected && this.props.selected) {\n      this.unbindShortcuts();\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (!prevProps.selected && this.props.selected) {\n      this.bindShortcuts();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.selected) {\n      this.unbindShortcuts();\n    }\n  }\n\n  bindShortcuts() {\n    key('f', 'issues', () => {\n      this.togglePopup('transition');\n      return false;\n    });\n    key('a', 'issues', () => {\n      this.togglePopup('assign');\n      return false;\n    });\n    key('m', 'issues', () => {\n      if (this.props.issue.actions.includes('assign')) {\n        this.handleAssignement('_me');\n      }\n      return false;\n    });\n    key('i', 'issues', () => {\n      this.togglePopup('set-severity');\n      return false;\n    });\n    key('c', 'issues', () => {\n      this.togglePopup('comment');\n      return false;\n    });\n    key('t', 'issues', () => {\n      this.togglePopup('edit-tags');\n      return false;\n    });\n    key('space', 'issues', () => {\n      if (this.props.onCheck) {\n        this.props.onCheck(this.props.issue.key);\n        return false;\n      }\n      return undefined;\n    });\n  }\n\n  unbindShortcuts() {\n    key.unbind('f', 'issues');\n    key.unbind('a', 'issues');\n    key.unbind('m', 'issues');\n    key.unbind('i', 'issues');\n    key.unbind('c', 'issues');\n    key.unbind('space', 'issues');\n    key.unbind('t', 'issues');\n  }\n\n  togglePopup = (popupName: string, open?: boolean) => {\n    this.props.onPopupToggle(this.props.issue.key, popupName, open);\n  };\n\n  handleAssignement = (login: string) => {\n    const { issue } = this.props;\n    if (issue.assignee !== login) {\n      updateIssue(this.props.onChange, setIssueAssignee({ issue: issue.key, assignee: login }));\n    }\n    this.togglePopup('assign', false);\n  };\n\n  render() {\n    return (\n      <IssueView\n        branchLike={this.props.branchLike}\n        checked={this.props.checked}\n        currentPopup={this.props.openPopup}\n        issue={this.props.issue}\n        onAssign={this.handleAssignement}\n        onChange={this.props.onChange}\n        onCheck={this.props.onCheck}\n        onClick={this.props.onClick}\n        onFilter={this.props.onFilter}\n        selected={this.props.selected}\n        togglePopup={this.togglePopup}\n      />\n    );\n  }\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".source-viewer{width:100%;min-height:200px;border:1px solid #cdcdcd;box-sizing:border-box;background-color:#fff;overflow:hidden}.source-table{width:100%;border:none;border-collapse:collapse}.source-viewer-header{position:relative;padding:2px 10px 4px;border-bottom:1px solid #e6e6e6;background-color:#f3f3f3}.source-viewer-header:after,.source-viewer-header:before{display:table;content:\\\"\\\";line-height:0}.source-viewer-header:after{clear:both}.source-viewer-header-bar+.source-viewer-header-bar{border-top:1px solid #e6e6e6}.source-viewer-header-component{padding-top:4px}.source-viewer-header-component-name,.source-viewer-header-component-project{font-size:12px}.source-viewer-header-favorite{position:relative;top:-2px;margin-left:4px;border-bottom:none}.source-viewer-header-measures-scope{position:relative;float:left}.source-viewer-header-measure{vertical-align:middle;font-size:13px}.source-viewer-header-measure .rating{font-size:18px}.source-viewer-header-measure-separator{margin:0 24px;height:30px;border-right:1px solid #cdcdcd}.source-viewer-header-measure+.source-viewer-header-measure{margin-left:24px}.source-viewer-header-measure-label{display:block;line-height:12px;color:#777;font-size:12px}.source-viewer-header-measure-value{display:block;margin-top:2px;line-height:18px;color:#444;font-size:16px}.source-viewer-header-actions{display:block;margin-left:24px;padding:8px 4px}.source-viewer-header-actions svg{margin-top:2px}.source-viewer-header-more-actions{position:absolute;z-index:7500;right:0;top:100%;padding:10px;border:1px solid #e6e6e6;border-right:none;background-color:#fff;line-height:1.8}.source-viewer-code{overflow-x:auto}.source-viewer-measures-overlay{padding:20px 10px;background-color:#f3f3f3}.source-viewer-measures-overlay,.source-viewer-measures-overlay .modal-foot{width:1100px;left:50%;right:auto;margin-left:-550px}.source-viewer-measures-component{float:none;margin:0 10px 30px}.source-viewer-measures,.source-viewer-measures-modal{background-color:#f3f3f3}.source-viewer-measures{margin:0 -10px}.source-viewer-measures:after,.source-viewer-measures:before{display:table;content:\\\"\\\";line-height:0}.source-viewer-measures:after{clear:both}.source-viewer-measures+.source-viewer-measures{margin-top:40px}.source-viewer-measures-secondary .source-viewer-measures-card{background-color:hsla(0,0%,100%,.6)}.source-viewer-measures-section{float:left;width:25%;margin:-20px 0}.source-viewer-measures-section-big{width:50%}.source-viewer-measures-section-full{width:100%}.source-viewer-measures-section+.source-viewer-measures-section-full{margin-top:20px}.source-viewer-measures-card{margin:20px 10px;padding:10px;border:1px solid #e6e6e6;background-color:#fff}.source-viewer-measures-card-overflow{overflow:auto}.source-viewer-measures-card-fixed-height{max-height:36vh;overflow-y:scroll}.source-viewer-tests-list{width:100%;font-size:13px}.source-viewer-test-covered-lines,.source-viewer-test-duration,.source-viewer-test-status{width:1px}.source-viewer-test-covered-lines,.source-viewer-test-covered-name,.source-viewer-test-duration,.source-viewer-test-status{vertical-align:middle;padding:3px}.source-viewer-test-name{padding-left:10px;word-break:break-all}.source-viewer-test-covered-lines{text-align:right}.source-viewer-issue-location{max-width:200px;margin-right:10px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.source-viewer-flow-location+.source-viewer-flow-location{z-index:504}.source-line-issue-locations{float:right;margin-right:-10px}.source-line-issue-locations:empty{display:none}.source-viewer-more-code{padding:40px 0;border-bottom:1px solid #e6e6e6;background-color:#f3f3f3;text-align:center}.source-viewer-more-code .spinner{top:-1px}.source-table+.source-viewer-more-code{border-bottom:none;border-top:1px solid #e6e6e6}.source-viewer-bubble-popup{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:13px;text-align:left;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.issue-location.highlighted{border-color:#e1e1f2;background-color:#e1e1f2}.issue-location.selected{border-color:#f4b1b0;background-color:#f4b1b0}.measures+.measures{margin-top:15px;padding-top:15px;border-top:1px solid #e6e6e6}.measures-chart{display:inline-block;vertical-align:middle;width:70px;margin-right:20px;text-align:center}.measures-chart .rating{font-size:32px}.measure{line-height:1.3333333333333}.measure-name{display:block;font-size:13px}.measure-value{color:#236a97;font-size:16px;font-weight:400}.measure-big{display:inline-block;vertical-align:middle}.measure-big .measure-name{margin-top:2px;font-size:15px;font-weight:400}.measure-big .measure-value,.measure-big .rating{font-size:22px}.measure-big+.measure-big{margin-left:20px}.measure-one-line:after,.measure-one-line:before{display:table;content:\\\"\\\";line-height:0}.measure-one-line:after{clear:both}.measure-one-line .measure-name{float:left}.measure-one-line .measure-value{float:right}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedDate } from 'react-intl';\nimport { parseDate } from 'sonar-ui-common/helpers/dates';\n\ninterface Props {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n  long?: boolean;\n}\n\nexport const formatterOption = { year: 'numeric', month: 'short', day: '2-digit' };\n\nexport const longFormatterOption = { year: 'numeric', month: 'long', day: 'numeric' };\n\nexport default function DateFormatter({ children, date, long }: Props) {\n  return (\n    <FormattedDate value={parseDate(date)} {...(long ? longFormatterOption : formatterOption)}>\n      {children}\n    </FormattedDate>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedDate } from 'react-intl';\nimport { parseDate } from 'sonar-ui-common/helpers/dates';\n\ninterface Props {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n}\n\nexport const formatterOption = {\n  year: 'numeric',\n  month: 'long',\n  day: 'numeric',\n  hour: 'numeric',\n  minute: 'numeric'\n};\n\nexport default function DateTimeFormatter({ children, date }: Props) {\n  return (\n    <FormattedDate value={parseDate(date)} {...formatterOption}>\n      {children}\n    </FormattedDate>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedRelative } from 'react-intl';\nimport { parseDate } from 'sonar-ui-common/helpers/dates';\n\ninterface Props {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n}\n\nexport default function DateFromNow({ children, date }: Props) {\n  return <FormattedRelative value={parseDate(date)}>{children}</FormattedRelative>;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SeverityIcon from 'sonar-ui-common/components/icons/SeverityIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  className?: string;\n  severity: string;\n}\n\nexport default function SeverityHelper({ className, severity }: Props) {\n  if (!severity) {\n    return null;\n  }\n  return (\n    <span className={className}>\n      <SeverityIcon className=\"little-spacer-right\" severity={severity} />\n      {translate('severity', severity)}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport Level from 'sonar-ui-common/components/ui/Level';\nimport Rating from 'sonar-ui-common/components/ui/Rating';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { getRatingTooltip } from './utils';\n\ninterface Props {\n  className?: string;\n  decimals?: number | null;\n  metricKey: string;\n  metricType: string;\n  small?: boolean;\n  value: string | undefined;\n}\n\nexport default function Measure({\n  className,\n  decimals,\n  metricKey,\n  metricType,\n  small,\n  value\n}: Props) {\n  if (value === undefined) {\n    return <span></span>;\n  }\n\n  if (metricType === 'LEVEL') {\n    return <Level className={className} level={value} small={small} />;\n  }\n\n  if (metricType !== 'RATING') {\n    const formattedValue = formatMeasure(value, metricType, { decimals });\n    return <span className={className}>{formattedValue != null ? formattedValue : ''}</span>;\n  }\n\n  const tooltip = getRatingTooltip(metricKey, Number(value));\n  const rating = <Rating small={small} value={value} />;\n  if (tooltip) {\n    return (\n      <Tooltip overlay={tooltip}>\n        <span className={className}>{rating}</span>\n      </Tooltip>\n    );\n  }\n  return rating;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getRatingTooltip as nextGetRatingTooltip, isDiffMetric } from '../../helpers/measures';\nimport { getLeakPeriod } from '../../helpers/periods';\n\nconst KNOWN_RATINGS = [\n  'sqale_rating',\n  'maintainability_rating', // Needed to provide the label for \"new_maintainability_rating\"\n  'reliability_rating',\n  'security_rating'\n];\n\nexport function enhanceMeasure(measure: T.Measure, metrics: T.Dict<T.Metric>): T.MeasureEnhanced {\n  return {\n    ...measure,\n    metric: metrics[measure.metric],\n    leak: getLeakValue(measure)\n  };\n}\n\nexport function getLeakValue(measure: T.Measure | undefined): string | undefined {\n  if (!measure || !measure.periods) {\n    return undefined;\n  }\n  const period = getLeakPeriod(measure.periods);\n  return period && period.value;\n}\n\nexport function getRatingTooltip(metricKey: string, value: number): string | undefined {\n  const finalMetricKey = isDiffMetric(metricKey) ? metricKey.substr(4) : metricKey;\n  if (KNOWN_RATINGS.includes(finalMetricKey)) {\n    return nextGetRatingTooltip(finalMetricKey, value);\n  }\n  return undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { parseDate } from 'sonar-ui-common/helpers/dates';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\n\nfunction getPeriod<T extends T.Period | T.PeriodMeasure>(periods: T[] | undefined, index: number) {\n  if (!Array.isArray(periods)) {\n    return undefined;\n  }\n  return periods.find(period => period.index === index);\n}\n\nexport function getLeakPeriod<T extends T.Period | T.PeriodMeasure>(periods: T[] | undefined) {\n  return getPeriod(periods, 1);\n}\n\nexport function getPeriodLabel(\n  period: T.Period | undefined,\n  dateFormatter: (date: string) => string\n) {\n  if (!period) {\n    return undefined;\n  }\n\n  let parameter = period.modeParam || period.parameter || '';\n\n  switch (period.mode) {\n    case 'SPECIFIC_ANALYSIS':\n      parameter = dateFormatter(period.date);\n      break;\n    case 'PREVIOUS_VERSION':\n      parameter = parameter || dateFormatter(period.date);\n      break;\n    /*\n     * Handle legacy period modes, that predate MMF-1579\n     */\n    case 'previous_version':\n      if (!parameter) {\n        return translate('overview.period.previous_version_only_date');\n      }\n      break;\n    case 'date':\n      parameter = parameter && dateFormatter(parameter);\n      break;\n    case 'manual_baseline':\n      parameter = parameter || dateFormatter(period.date);\n      break;\n    default: // No change in the parameter\n  }\n\n  return translateWithParameters(`overview.period.${period.mode.toLowerCase()}`, parameter);\n}\n\nexport function getPeriodDate(period?: { date?: string }): Date | undefined {\n  return period && period.date ? parseDate(period.date) : undefined;\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./TagsList.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./TagsList.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./TagsList.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport './TagsList.css';\n\ninterface Props {\n  allowUpdate?: boolean;\n  className?: string;\n  tags: string[];\n}\n\nexport default function TagsList({ allowUpdate = false, className, tags }: Props) {\n  return (\n    <span className={classNames('tags-list', className)} title={tags.join(', ')}>\n      <TagsIcon className=\"text-middle\" />\n      <span className=\"text-ellipsis text-middle\">{tags.join(', ')}</span>\n      {allowUpdate && <DropdownIcon className=\"text-middle\" />}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { lazyLoad } from 'sonar-ui-common/components/lazyLoad';\nimport { colors } from '../../app/theme';\n\nconst DonutChart = lazyLoad(() => import('sonar-ui-common/components/charts/DonutChart'));\n\nconst SIZE_TO_WIDTH_MAPPING = { small: 16, normal: 24, big: 40, huge: 60 };\n\nconst SIZE_TO_THICKNESS_MAPPING = { small: 2, normal: 3, big: 3, huge: 4 };\n\ninterface Props {\n  muted?: boolean;\n  size?: 'small' | 'normal' | 'big' | 'huge';\n  value: number | string | null | undefined;\n}\n\nexport default function CoverageRating({ muted = false, size = 'normal', value }: Props) {\n  let data = [{ value: 100, fill: '#ccc ' }];\n\n  if (value != null) {\n    const numberValue = Number(value);\n    data = [\n      { value: numberValue, fill: muted ? colors.gray71 : colors.green },\n      { value: 100 - numberValue, fill: muted ? colors.barBackgroundColor : colors.red }\n    ];\n  }\n\n  const width = SIZE_TO_WIDTH_MAPPING[size];\n  const thickness = SIZE_TO_THICKNESS_MAPPING[size];\n\n  return <DonutChart data={data} height={width} thickness={thickness} width={width} />;\n}\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".tags-list{white-space:nowrap;line-height:16px}.tags-list i:before{font-size:12px}.tags-list span{display:inline-block;vertical-align:middle;text-align:left;max-width:220px;padding-left:4px;padding-right:4px}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\n\ninterface Props {\n  active?: boolean;\n  custom?: boolean;\n  disabled?: boolean;\n  element: string;\n  onHover: (elem: string) => void;\n  onSelectChange: (elem: string, selected: boolean) => void;\n  renderLabel: (element: string) => React.ReactNode;\n  selected?: boolean;\n}\n\nexport default class MultiSelectOption extends React.PureComponent<Props> {\n  handleSelect = (evt: React.SyntheticEvent<HTMLAnchorElement>) => {\n    evt.stopPropagation();\n    evt.preventDefault();\n    evt.currentTarget.blur();\n\n    if (!this.props.disabled) {\n      this.props.onSelectChange(this.props.element, !this.props.selected);\n    }\n  };\n\n  handleHover = () => this.props.onHover(this.props.element);\n\n  render() {\n    const { selected, disabled } = this.props;\n    const className = classNames('icon-checkbox', {\n      'icon-checkbox-checked': selected,\n      'icon-checkbox-invisible': disabled\n    });\n    const activeClass = classNames({ active: this.props.active, disabled });\n\n    return (\n      <li>\n        <a\n          className={activeClass}\n          href=\"#\"\n          onClick={this.handleSelect}\n          onFocus={this.handleHover}\n          onMouseOver={this.handleHover}>\n          <i className={className} /> {this.props.custom && '+ '}\n          {this.props.renderLabel(this.props.element)}\n        </a>\n      </li>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { difference } from 'lodash';\nimport * as React from 'react';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport MultiSelectOption from './MultiSelectOption';\n\ninterface Props {\n  allowNewElements?: boolean;\n  allowSelection?: boolean;\n  elements: string[];\n  filterSelected?: (query: string, selectedElements: string[]) => string[];\n  footerNode?: React.ReactNode;\n  listSize?: number;\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  placeholder: string;\n  renderLabel?: (element: string) => React.ReactNode;\n  selectedElements: string[];\n  validateSearchInput?: (value: string) => string;\n}\n\ninterface State {\n  activeIdx: number;\n  loading: boolean;\n  query: string;\n  selectedElements: string[];\n  unselectedElements: string[];\n}\n\ninterface DefaultProps {\n  filterSelected: (query: string, selectedElements: string[]) => string[];\n  listSize: number;\n  renderLabel: (element: string) => React.ReactNode;\n  validateSearchInput: (value: string) => string;\n}\n\ntype PropsWithDefault = Props & DefaultProps;\n\nexport default class MultiSelect extends React.PureComponent<Props, State> {\n  container?: HTMLDivElement | null;\n  searchInput?: HTMLInputElement | null;\n  mounted = false;\n\n  static defaultProps: DefaultProps = {\n    filterSelected: (query: string, selectedElements: string[]) =>\n      selectedElements.filter(elem => elem.includes(query)),\n    listSize: 0,\n    renderLabel: (element: string) => element,\n    validateSearchInput: (value: string) => value\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      activeIdx: 0,\n      loading: true,\n      query: '',\n      selectedElements: [],\n      unselectedElements: []\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.onSearchQuery('');\n    this.updateSelectedElements(this.props as PropsWithDefault);\n    this.updateUnselectedElements(this.props as PropsWithDefault);\n    if (this.container) {\n      this.container.addEventListener('keydown', this.handleKeyboard, true);\n    }\n  }\n\n  componentWillReceiveProps(nextProps: PropsWithDefault) {\n    if (\n      this.props.elements !== nextProps.elements ||\n      this.props.selectedElements !== nextProps.selectedElements\n    ) {\n      this.updateSelectedElements(nextProps);\n      this.updateUnselectedElements(nextProps);\n\n      const totalElements = this.getAllElements(nextProps, this.state).length;\n      if (this.state.activeIdx >= totalElements) {\n        this.setState({ activeIdx: totalElements - 1 });\n      }\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.searchInput) {\n      this.searchInput.focus();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    if (this.container) {\n      this.container.removeEventListener('keydown', this.handleKeyboard);\n    }\n  }\n\n  handleSelectChange = (item: string, selected: boolean) => {\n    if (selected) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  handleSearchChange = (value: string) => {\n    this.onSearchQuery((this.props as PropsWithDefault).validateSearchInput(value));\n  };\n\n  handleElementHover = (element: string) => {\n    this.setState((prevState, props) => {\n      return { activeIdx: this.getAllElements(props, prevState).indexOf(element) };\n    });\n  };\n\n  handleKeyboard = (evt: KeyboardEvent) => {\n    switch (evt.keyCode) {\n      case 40: // down\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectNextElement);\n        break;\n      case 38: // up\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectPreviousElement);\n        break;\n      case 37: // left\n      case 39: // right\n        evt.stopPropagation();\n        break;\n      case 13: // enter\n        if (this.state.activeIdx >= 0) {\n          this.toggleSelect(this.getAllElements(this.props, this.state)[this.state.activeIdx]);\n        }\n        break;\n    }\n  };\n\n  onSearchQuery = (query: string) => {\n    this.setState({ activeIdx: 0, loading: true, query });\n    this.props.onSearch(query).then(this.stopLoading, this.stopLoading);\n  };\n\n  onSelectItem = (item: string) => {\n    if (this.isNewElement(item, this.props)) {\n      this.onSearchQuery('');\n    }\n    this.props.onSelect(item);\n  };\n\n  onUnselectItem = (item: string) => this.props.onUnselect(item);\n\n  isNewElement = (elem: string, { selectedElements, elements }: Props) =>\n    elem.length > 0 && selectedElements.indexOf(elem) === -1 && elements.indexOf(elem) === -1;\n\n  updateSelectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (state.query) {\n        return {\n          selectedElements: props.filterSelected(state.query, props.selectedElements)\n        };\n      } else {\n        return { selectedElements: [...props.selectedElements] };\n      }\n    });\n  };\n\n  updateUnselectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (props.listSize === 0) {\n        return { unselectedElements: difference(props.elements, props.selectedElements) };\n      } else if (props.listSize < state.selectedElements.length) {\n        return { unselectedElements: [] };\n      } else {\n        return {\n          unselectedElements: difference(props.elements, props.selectedElements).slice(\n            0,\n            props.listSize - state.selectedElements.length\n          )\n        };\n      }\n    });\n  };\n\n  getAllElements = (props: Props, state: State) => {\n    if (this.isNewElement(state.query, props)) {\n      return [...state.selectedElements, ...state.unselectedElements, state.query];\n    } else {\n      return [...state.selectedElements, ...state.unselectedElements];\n    }\n  };\n\n  setElementActive = (idx: number) => this.setState({ activeIdx: idx });\n\n  selectNextElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx < 0 || activeIdx >= allElements.length - 1) {\n      return { activeIdx: 0 };\n    } else {\n      return { activeIdx: activeIdx + 1 };\n    }\n  };\n\n  selectPreviousElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx <= 0) {\n      const lastIdx = allElements.length - 1;\n      return { activeIdx: lastIdx };\n    } else {\n      return { activeIdx: activeIdx - 1 };\n    }\n  };\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  toggleSelect = (item: string) => {\n    if (this.props.selectedElements.indexOf(item) === -1) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  render() {\n    const { allowSelection = true, allowNewElements = true, footerNode = '' } = this.props;\n    const { renderLabel } = this.props as PropsWithDefault;\n    const { query, activeIdx, selectedElements, unselectedElements } = this.state;\n    const activeElement = this.getAllElements(this.props, this.state)[activeIdx];\n    const showNewElement = allowNewElements && this.isNewElement(query, this.props);\n    const infiniteList = this.props.listSize === 0;\n    const listClasses = classNames('menu', {\n      'menu-vertically-limited': infiniteList,\n      'spacer-top': infiniteList,\n      'with-top-separator': infiniteList,\n      'with-bottom-separator': Boolean(footerNode)\n    });\n\n    return (\n      <div className=\"multi-select\" ref={div => (this.container = div)}>\n        <div className=\"menu-search\">\n          <SearchBox\n            autoFocus={true}\n            className=\"little-spacer-top\"\n            loading={this.state.loading}\n            onChange={this.handleSearchChange}\n            placeholder={this.props.placeholder}\n            value={query}\n          />\n        </div>\n        <ul className={listClasses}>\n          {selectedElements.length > 0 &&\n            selectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n                selected={true}\n              />\n            ))}\n          {unselectedElements.length > 0 &&\n            unselectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                disabled={!allowSelection}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n              />\n            ))}\n          {showNewElement && (\n            <MultiSelectOption\n              active={activeElement === query}\n              custom={true}\n              element={query}\n              key={query}\n              onHover={this.handleElementHover}\n              onSelectChange={this.handleSelectChange}\n              renderLabel={renderLabel}\n            />\n          )}\n          {!showNewElement && selectedElements.length < 1 && unselectedElements.length < 1 && (\n            <li className=\"spacer-left\">{translateWithParameters('no_results_for_x', query)}</li>\n          )}\n        </ul>\n        {footerNode}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getMarkdownHelpUrl } from '../../helpers/urls';\n\ninterface Props {\n  className?: string;\n}\n\nexport default class MarkdownTips extends React.PureComponent<Props> {\n  handleClick(evt: React.SyntheticEvent<HTMLAnchorElement>) {\n    evt.preventDefault();\n    window.open(getMarkdownHelpUrl(), 'Markdown', 'height=300,width=600,scrollbars=1,resizable=1');\n  }\n\n  render() {\n    return (\n      <div className={classNames('markdown-tips', this.props.className)}>\n        <a className=\"little-spacer-right\" href=\"#\" onClick={this.handleClick}>\n          {translate('markdown.helplink')}\n        </a>\n        {':'}\n        <span className=\"spacer-left\">*{translate('bold')}*</span>\n        <span className=\"spacer-left\">\n          ``\n          {translate('code')}\n          ``\n        </span>\n        <span className=\"spacer-left\">* {translate('bulleted_point')}</span>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport MultiSelect from '../common/MultiSelect';\nimport './TagsList.css';\n\ninterface Props {\n  listSize: number;\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  selectedTags: string[];\n  tags: string[];\n}\n\nexport default function TagsSelector(props: Props) {\n  return (\n    <MultiSelect\n      elements={props.tags}\n      listSize={props.listSize}\n      onSearch={props.onSearch}\n      onSelect={props.onSelect}\n      onUnselect={props.onUnselect}\n      placeholder={translate('search.search_for_tags')}\n      selectedElements={props.selectedTags}\n      validateSearchInput={validateTag}\n    />\n  );\n}\n\nexport function validateTag(value: string) {\n  // Allow only a-z, 0-9, '+', '-', '#', '.'\n  return value.toLowerCase().replace(/[^-a-z0-9+#.]/gi, '');\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport StatusIcon from 'sonar-ui-common/components/icons/StatusIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  className?: string;\n  resolution: string | undefined;\n  status: string;\n}\n\nexport default function StatusHelper(props: Props) {\n  const resolution = props.resolution && ` (${translate('issue.resolution', props.resolution)})`;\n  return (\n    <span className={props.className}>\n      <StatusIcon className=\"little-spacer-right\" status={props.status} />\n      {translate('issue.status', props.status)}\n      {resolution}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport './LocationIndex.css';\n\ninterface Props {\n  children?: React.ReactNode;\n  leading?: boolean;\n  onClick?: () => void;\n  selected?: boolean;\n  [x: string]: any;\n}\n\nexport default function LocationIndex(props: Props) {\n  const { children, leading, onClick, selected, ...other } = props;\n  const clickAttributes = onClick ? { onClick, role: 'button', tabIndex: 0 } : {};\n  // put {...others} because Tooltip sets some event handlers\n  return (\n    <div\n      className={classNames('location-index', {\n        'is-leading': leading,\n        selected\n      })}\n      {...clickAttributes}\n      {...other}>\n      {children}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { searchIssues } from '../../../api/issues';\nimport { getBranchLikeQuery } from '../../../helpers/branches';\nimport { parseIssueFromResponse } from '../../../helpers/issues';\n\n// maximum possible value\nconst PAGE_SIZE = 500;\n\nfunction buildQuery(component: string, branchLike: T.BranchLike | undefined) {\n  return {\n    additionalFields: '_all',\n    resolved: 'false',\n    componentKeys: component,\n    s: 'FILE_LINE',\n    ...getBranchLikeQuery(branchLike)\n  };\n}\n\nexport function loadPage(\n  query: T.RawQuery,\n  page: number,\n  pageSize = PAGE_SIZE\n): Promise<T.Issue[]> {\n  return searchIssues({\n    ...query,\n    p: page,\n    ps: pageSize\n  }).then(r =>\n    r.issues.map(issue => parseIssueFromResponse(issue, r.components, r.users, r.rules))\n  );\n}\n\nexport function loadPageAndNext(\n  query: T.RawQuery,\n  toLine: number,\n  page: number,\n  pageSize = PAGE_SIZE\n): Promise<T.Issue[]> {\n  return loadPage(query, page).then(issues => {\n    if (issues.length === 0) {\n      return [];\n    }\n\n    const lastIssue = issues[issues.length - 1];\n\n    if (\n      (lastIssue.textRange != null && lastIssue.textRange.endLine > toLine) ||\n      issues.length < pageSize\n    ) {\n      return issues;\n    }\n\n    return loadPageAndNext(query, toLine, page + 1, pageSize).then(nextIssues => {\n      return [...issues, ...nextIssues];\n    });\n  });\n}\n\nexport default function loadIssues(\n  component: string,\n  _fromLine: number,\n  toLine: number,\n  branchLike: T.BranchLike | undefined\n): Promise<T.Issue[]> {\n  const query = buildQuery(component, branchLike);\n  return new Promise(resolve => {\n    loadPageAndNext(query, toLine, 1).then(issues => {\n      resolve(issues);\n    });\n  });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport Line from './components/Line';\nimport { getSecondaryIssueLocationsForLine } from './helpers/issueLocations';\nimport {\n  optimizeHighlightedSymbols,\n  optimizeLocationMessage,\n  optimizeSelectedIssue\n} from './helpers/lines';\n\nconst EMPTY_ARRAY: any[] = [];\n\nconst ZERO_LINE = {\n  code: '',\n  duplicated: false,\n  isNew: false,\n  line: 0\n};\n\ninterface Props {\n  branchLike: T.BranchLike | undefined;\n  componentKey: string;\n  displayAllIssues?: boolean;\n  displayLocationMarkers?: boolean;\n  duplications: T.Duplication[] | undefined;\n  duplicationsByLine: { [line: number]: number[] };\n  hasSourcesAfter: boolean;\n  hasSourcesBefore: boolean;\n  highlightedLine: number | undefined;\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined;\n  // `undefined` elements mean they are located in a different file,\n  // but kept to maintain the location indexes\n  highlightedLocations: (T.FlowLocation | undefined)[] | undefined;\n  highlightedSymbols: string[];\n  issueLocationsByLine: { [line: number]: T.LinearIssueLocation[] };\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: T.Issue[] | undefined;\n  issuesByLine: { [line: number]: T.Issue[] };\n  linePopup: T.LinePopup | undefined;\n  loadDuplications: (line: T.SourceLine) => void;\n  loadingSourcesAfter: boolean;\n  loadingSourcesBefore: boolean;\n  loadSourcesAfter: () => void;\n  loadSourcesBefore: () => void;\n  onIssueChange: (issue: T.Issue) => void;\n  onIssuePopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  onIssuesClose: (line: T.SourceLine) => void;\n  onIssueSelect: (issueKey: string) => void;\n  onIssuesOpen: (line: T.SourceLine) => void;\n  onIssueUnselect: () => void;\n  onLinePopupToggle: (linePopup: T.LinePopup) => void;\n  onLocationSelect: ((index: number) => void) | undefined;\n  onSymbolClick: (symbols: string[]) => void;\n  openIssuesByLine: { [line: number]: boolean };\n  renderDuplicationPopup: (index: number, line: number) => React.ReactNode;\n  scroll?: (element: HTMLElement) => void;\n  selectedIssue: string | undefined;\n  sources: T.SourceLine[];\n  symbolsByLine: { [line: number]: string[] };\n}\n\nexport default class SourceViewerCode extends React.PureComponent<Props> {\n  getDuplicationsForLine = (line: T.SourceLine): number[] => {\n    return this.props.duplicationsByLine[line.line] || EMPTY_ARRAY;\n  };\n\n  getIssuesForLine = (line: T.SourceLine): T.Issue[] => {\n    return this.props.issuesByLine[line.line] || EMPTY_ARRAY;\n  };\n\n  getIssueLocationsForLine = (line: T.SourceLine): T.LinearIssueLocation[] => {\n    return this.props.issueLocationsByLine[line.line] || EMPTY_ARRAY;\n  };\n\n  renderLine = ({\n    line,\n    index,\n    displayCoverage,\n    displayDuplications,\n    displayIssues\n  }: {\n    line: T.SourceLine;\n    index: number;\n    displayCoverage: boolean;\n    displayDuplications: boolean;\n    displayIssues: boolean;\n  }) => {\n    const { highlightedLocationMessage, highlightedLocations, selectedIssue, sources } = this.props;\n\n    const secondaryIssueLocations = getSecondaryIssueLocationsForLine(line, highlightedLocations);\n\n    const duplicationsCount = this.props.duplications ? this.props.duplications.length : 0;\n\n    const issuesForLine = this.getIssuesForLine(line);\n\n    return (\n      <Line\n        branchLike={this.props.branchLike}\n        displayAllIssues={this.props.displayAllIssues}\n        displayCoverage={displayCoverage}\n        displayDuplications={displayDuplications}\n        displayIssues={displayIssues}\n        displayLocationMarkers={this.props.displayLocationMarkers}\n        duplications={this.getDuplicationsForLine(line)}\n        duplicationsCount={duplicationsCount}\n        highlighted={line.line === this.props.highlightedLine}\n        highlightedLocationMessage={optimizeLocationMessage(\n          highlightedLocationMessage,\n          secondaryIssueLocations\n        )}\n        highlightedSymbols={optimizeHighlightedSymbols(\n          this.props.symbolsByLine[line.line],\n          this.props.highlightedSymbols\n        )}\n        issueLocations={this.getIssueLocationsForLine(line)}\n        issuePopup={this.props.issuePopup}\n        issues={issuesForLine}\n        key={line.line}\n        last={index === this.props.sources.length - 1 && !this.props.hasSourcesAfter}\n        line={line}\n        linePopup={this.props.linePopup}\n        loadDuplications={this.props.loadDuplications}\n        onIssueChange={this.props.onIssueChange}\n        onIssuePopupToggle={this.props.onIssuePopupToggle}\n        onIssueSelect={this.props.onIssueSelect}\n        onIssueUnselect={this.props.onIssueUnselect}\n        onIssuesClose={this.props.onIssuesClose}\n        onIssuesOpen={this.props.onIssuesOpen}\n        onLinePopupToggle={this.props.onLinePopupToggle}\n        onLocationSelect={this.props.onLocationSelect}\n        onSymbolClick={this.props.onSymbolClick}\n        openIssues={this.props.openIssuesByLine[line.line] || false}\n        previousLine={index > 0 ? sources[index - 1] : undefined}\n        renderDuplicationPopup={this.props.renderDuplicationPopup}\n        scroll={this.props.scroll}\n        secondaryIssueLocations={secondaryIssueLocations}\n        selectedIssue={optimizeSelectedIssue(selectedIssue, issuesForLine)}\n      />\n    );\n  };\n\n  render() {\n    const { issues = [], sources } = this.props;\n\n    const displayCoverage = sources.some(s => s.coverageStatus != null);\n    const displayDuplications = sources.some(s => !!s.duplicated);\n    const displayIssues = issues.length > 0;\n\n    const hasFileIssues = displayIssues && issues.some(issue => !issue.textRange);\n\n    return (\n      <div className=\"source-viewer-code\">\n        {this.props.hasSourcesBefore && (\n          <div className=\"source-viewer-more-code\">\n            {this.props.loadingSourcesBefore ? (\n              <div className=\"js-component-viewer-loading-before\">\n                <i className=\"spinner\" />\n                <span className=\"note spacer-left\">\n                  {translate('source_viewer.loading_more_code')}\n                </span>\n              </div>\n            ) : (\n              <Button\n                className=\"js-component-viewer-source-before\"\n                onClick={this.props.loadSourcesBefore}>\n                {translate('source_viewer.load_more_code')}\n              </Button>\n            )}\n          </div>\n        )}\n\n        <table className=\"source-table\">\n          <tbody>\n            {hasFileIssues &&\n              this.renderLine({\n                line: ZERO_LINE,\n                index: -1,\n                displayCoverage,\n                displayDuplications,\n                displayIssues\n              })}\n            {sources.map((line, index) =>\n              this.renderLine({ line, index, displayCoverage, displayDuplications, displayIssues })\n            )}\n          </tbody>\n        </table>\n\n        {this.props.hasSourcesAfter && (\n          <div className=\"source-viewer-more-code\">\n            {this.props.loadingSourcesAfter ? (\n              <div className=\"js-component-viewer-loading-after\">\n                <i className=\"spinner\" />\n                <span className=\"note spacer-left\">\n                  {translate('source_viewer.loading_more_code')}\n                </span>\n              </div>\n            ) : (\n              <Button\n                className=\"js-component-viewer-source-after\"\n                onClick={this.props.loadSourcesAfter}>\n                {translate('source_viewer.load_more_code')}\n              </Button>\n            )}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport { getLocalizedMetricName } from 'sonar-ui-common/helpers/l10n';\nimport Measure from '../../measure/Measure';\n\nexport interface MeasureWithMetric {\n  metric: T.Metric;\n  value?: string;\n}\n\ninterface Props {\n  measure: MeasureWithMetric;\n}\n\nexport default function MeasuresOverlayMeasure({ measure }: Props) {\n  return (\n    <div\n      className=\"measure measure-one-line\"\n      data-metric={measure.metric.key}\n      key={measure.metric.key}>\n      <span className=\"measure-name\">\n        {['bugs', 'vulnerabilities', 'code_smells'].includes(measure.metric.key) && (\n          <IssueTypeIcon className=\"little-spacer-right\" query={measure.metric.key} />\n        )}\n        {getLocalizedMetricName(measure.metric)}\n      </span>\n      <span className=\"measure-value\">\n        <Measure\n          metricKey={measure.metric.key}\n          metricType={measure.metric.type}\n          small={true}\n          value={measure.value}\n        />\n      </span>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { groupBy, keyBy, sortBy } from 'lodash';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport DuplicationsRating from 'sonar-ui-common/components/ui/DuplicationsRating';\nimport { getLocalizedMetricName, translate } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { getFacets } from '../../../api/issues';\nimport { getMeasures } from '../../../api/measures';\nimport { getAllMetrics } from '../../../api/metrics';\nimport { getBranchLikeQuery } from '../../../helpers/branches';\nimport { ISSUE_TYPES, SEVERITIES } from '../../../helpers/constants';\nimport { enhanceMeasuresWithMetrics, getDisplayMetrics } from '../../../helpers/measures';\nimport { getBranchLikeUrl } from '../../../helpers/urls';\nimport Measure from '../../measure/Measure';\nimport SeverityHelper from '../../shared/SeverityHelper';\nimport CoverageRating from '../../ui/CoverageRating';\nimport MeasuresOverlayMeasure from './MeasuresOverlayMeasure';\n\ninterface Props {\n  branchLike: T.BranchLike | undefined;\n  onClose: () => void;\n  sourceViewerFile: T.SourceViewerFile;\n}\n\ninterface Measures {\n  [metricKey: string]: T.MeasureEnhanced;\n}\n\ninterface State {\n  loading: boolean;\n  measures: Measures;\n  severitiesFacet?: T.FacetValue[];\n  showAllMeasures: boolean;\n  tagsFacet?: T.FacetValue[];\n  typesFacet?: T.FacetValue<T.IssueType>[];\n}\n\nexport default class MeasuresOverlay extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true, measures: {}, showAllMeasures: false };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchData();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchData = () => {\n    Promise.all([this.fetchMeasures(), this.fetchIssues()]).then(\n      ([measures, facets]) => {\n        if (this.mounted) {\n          this.setState({ loading: false, measures, ...facets });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  fetchMeasures = () => {\n    return getAllMetrics().then(metrics => {\n      const metricKeys = getDisplayMetrics(metrics).map(metric => metric.key);\n\n      // eslint-disable-next-line promise/no-nesting\n      return getMeasures({\n        component: this.props.sourceViewerFile.key,\n        metricKeys: metricKeys.join(),\n        ...getBranchLikeQuery(this.props.branchLike)\n      }).then(measures => {\n        const withMetrics = enhanceMeasuresWithMetrics(measures, metrics).filter(\n          measure => measure.metric\n        );\n        return keyBy(withMetrics, measure => measure.metric.key);\n      });\n    });\n  };\n\n  fetchIssues = () => {\n    return getFacets(\n      {\n        componentKeys: this.props.sourceViewerFile.key,\n        resolved: 'false',\n        ...getBranchLikeQuery(this.props.branchLike)\n      },\n      ['types', 'severities', 'tags']\n    ).then(({ facets }) => {\n      const severitiesFacet = facets.find(f => f.property === 'severities');\n      const tagsFacet = facets.find(f => f.property === 'tags');\n      const typesFacet = facets.find(f => f.property === 'types');\n      return {\n        severitiesFacet: severitiesFacet && severitiesFacet.values,\n        tagsFacet: tagsFacet && tagsFacet.values,\n        typesFacet: typesFacet && (typesFacet.values as T.FacetValue<T.IssueType>[])\n      };\n    });\n  };\n\n  handleAllMeasuresClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.setState({ showAllMeasures: true });\n  };\n\n  renderMeasure = (measure: T.MeasureEnhanced | undefined) => {\n    return measure ? <MeasuresOverlayMeasure key={measure.metric.key} measure={measure} /> : null;\n  };\n\n  renderLines = () => {\n    const { measures } = this.state;\n\n    return (\n      <div className=\"source-viewer-measures-section\">\n        <div className=\"source-viewer-measures-card\">\n          <div className=\"measures\">\n            <div className=\"measures-list\">\n              {this.renderMeasure(measures.lines)}\n              {this.renderMeasure(measures.ncloc)}\n              {this.renderMeasure(measures.comment_lines)}\n              {this.renderMeasure(measures.comment_lines_density)}\n            </div>\n          </div>\n\n          <div className=\"measures\">\n            <div className=\"measures-list\">\n              {this.renderMeasure(measures.cognitive_complexity)}\n              {this.renderMeasure(measures.complexity)}\n              {this.renderMeasure(measures.function_complexity)}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderBigMeasure = (measure: T.MeasureEnhanced | undefined) => {\n    return measure ? (\n      <div className=\"measure measure-big\" data-metric={measure.metric.key}>\n        <span className=\"measure-value\">\n          <Measure\n            metricKey={measure.metric.key}\n            metricType={measure.metric.type}\n            value={measure.value}\n          />\n        </span>\n        <span className=\"measure-name\">{getLocalizedMetricName(measure.metric, true)}</span>\n      </div>\n    ) : null;\n  };\n\n  renderIssues = () => {\n    const { measures, severitiesFacet, tagsFacet, typesFacet } = this.state;\n    return (\n      <div className=\"source-viewer-measures-section\">\n        <div className=\"source-viewer-measures-card\">\n          <div className=\"measures\">\n            {this.renderBigMeasure(measures.violations)}\n            {this.renderBigMeasure(measures.sqale_index)}\n          </div>\n          {measures.violations && !!measures.violations.value && (\n            <>\n              {typesFacet && (\n                <div className=\"measures\">\n                  <div className=\"measures-list\">\n                    {sortBy(typesFacet, f => ISSUE_TYPES.indexOf(f.val)).map(f => (\n                      <div className=\"measure measure-one-line\" key={f.val}>\n                        <span className=\"measure-name\">\n                          <IssueTypeIcon className=\"little-spacer-right\" query={f.val} />\n                          {translate('issue.type', f.val)}\n                        </span>\n                        <span className=\"measure-value\">{formatMeasure(f.count, 'SHORT_INT')}</span>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n              {severitiesFacet && (\n                <div className=\"measures\">\n                  <div className=\"measures-list\">\n                    {sortBy(severitiesFacet, f => SEVERITIES.indexOf(f.val)).map(f => (\n                      <div className=\"measure measure-one-line\" key={f.val}>\n                        <span className=\"measure-name\">\n                          <SeverityHelper severity={f.val} />\n                        </span>\n                        <span className=\"measure-value\">{formatMeasure(f.count, 'SHORT_INT')}</span>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n              {tagsFacet && (\n                <div className=\"measures\">\n                  <div className=\"measures-list\">\n                    {tagsFacet.map(f => (\n                      <div className=\"measure measure-one-line\" key={f.val}>\n                        <span className=\"measure-name\">\n                          <TagsIcon className=\"little-spacer-right\" />\n                          {f.val}\n                        </span>\n                        <span className=\"measure-value\">{formatMeasure(f.count, 'SHORT_INT')}</span>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  renderCoverage = () => {\n    const { coverage } = this.state.measures;\n    if (!coverage) {\n      return null;\n    }\n    return (\n      <div className=\"source-viewer-measures-section\">\n        <div className=\"source-viewer-measures-card\">\n          <div className=\"measures\">\n            <div className=\"measures-chart\">\n              <CoverageRating size=\"big\" value={coverage.value} />\n            </div>\n            <div className=\"measure measure-big\" data-metric={coverage.metric.key}>\n              <span className=\"measure-value\">\n                <Measure\n                  metricKey={coverage.metric.key}\n                  metricType={coverage.metric.type}\n                  value={coverage.value}\n                />\n              </span>\n              <span className=\"measure-name\">{getLocalizedMetricName(coverage.metric)}</span>\n            </div>\n          </div>\n\n          <div className=\"measures\">\n            <div className=\"measures-list\">\n              {this.renderMeasure(this.state.measures.uncovered_lines)}\n              {this.renderMeasure(this.state.measures.lines_to_cover)}\n              {this.renderMeasure(this.state.measures.uncovered_conditions)}\n              {this.renderMeasure(this.state.measures.conditions_to_cover)}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderDuplications = () => {\n    const { duplicated_lines_density: duplications } = this.state.measures;\n    if (!duplications) {\n      return null;\n    }\n    return (\n      <div className=\"source-viewer-measures-section\">\n        <div className=\"source-viewer-measures-card\">\n          <div className=\"measures\">\n            <div className=\"measures-chart\">\n              <DuplicationsRating\n                muted={duplications.value === undefined}\n                size=\"big\"\n                value={Number(duplications.value || 0)}\n              />\n            </div>\n            <div className=\"measure measure-big\" data-metric={duplications.metric.key}>\n              <span className=\"measure-value\">\n                <Measure\n                  metricKey={duplications.metric.key}\n                  metricType={duplications.metric.type}\n                  value={duplications.value}\n                />\n              </span>\n              <span className=\"measure-name\">\n                {getLocalizedMetricName(duplications.metric, true)}\n              </span>\n            </div>\n          </div>\n\n          <div className=\"measures\">\n            <div className=\"measures-list\">\n              {this.renderMeasure(this.state.measures.duplicated_blocks)}\n              {this.renderMeasure(this.state.measures.duplicated_lines)}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderTests = () => {\n    const { measures } = this.state;\n    return (\n      <div className=\"source-viewer-measures\">\n        <div className=\"source-viewer-measures-section\">\n          <div className=\"source-viewer-measures-card\">\n            <div className=\"measures\">\n              <div className=\"measures-list\">\n                {this.renderMeasure(measures.tests)}\n                {this.renderMeasure(measures.test_success_density)}\n                {this.renderMeasure(measures.test_failures)}\n                {this.renderMeasure(measures.test_errors)}\n                {this.renderMeasure(measures.skipped_tests)}\n                {this.renderMeasure(measures.test_execution_time)}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderDomain = (domain: string, measures: T.MeasureEnhanced[]) => {\n    return (\n      <div className=\"source-viewer-measures-card\" key={domain}>\n        <div className=\"measures\">\n          <div className=\"measures-list\">\n            <div className=\"measure measure-one-line measure-big\">\n              <span className=\"measure-name\">{domain}</span>\n            </div>\n            {sortBy(measures.filter(measure => measure.value !== undefined), measure =>\n              getLocalizedMetricName(measure.metric)\n            ).map(measure => this.renderMeasure(measure))}\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderAllMeasures = () => {\n    const domains = groupBy(Object.values(this.state.measures), measure => measure.metric.domain);\n    const domainKeys = Object.keys(domains);\n    const odd = domainKeys.filter((_, index) => index % 2 === 1);\n    const even = domainKeys.filter((_, index) => index % 2 === 0);\n    return (\n      <div className=\"source-viewer-measures source-viewer-measures-secondary js-all-measures\">\n        <div className=\"source-viewer-measures-section source-viewer-measures-section-big\">\n          {odd.map(domain => this.renderDomain(domain, domains[domain]))}\n        </div>\n        <div className=\"source-viewer-measures-section source-viewer-measures-section-big\">\n          {even.map(domain => this.renderDomain(domain, domains[domain]))}\n        </div>\n      </div>\n    );\n  };\n\n  render() {\n    const { branchLike, sourceViewerFile } = this.props;\n    const { loading } = this.state;\n\n    return (\n      <Modal contentLabel=\"\" onRequestClose={this.props.onClose} size=\"large\">\n        <div className=\"modal-container source-viewer-measures-modal\">\n          <div className=\"source-viewer-header-component source-viewer-measures-component\">\n            <div className=\"source-viewer-header-component-project\">\n              <QualifierIcon className=\"little-spacer-right\" qualifier=\"TRK\" />\n              <Link to={getBranchLikeUrl(sourceViewerFile.project, branchLike)}>\n                {sourceViewerFile.projectName}\n              </Link>\n\n              {sourceViewerFile.subProject && (\n                <>\n                  <QualifierIcon className=\"big-spacer-left little-spacer-right\" qualifier=\"BRC\" />\n                  {sourceViewerFile.subProjectName}\n                </>\n              )}\n            </div>\n\n            <div className=\"source-viewer-header-component-name display-flex-center little-spacer-top\">\n              <QualifierIcon className=\"little-spacer-right\" qualifier={sourceViewerFile.q} />\n              {sourceViewerFile.path}\n            </div>\n          </div>\n\n          {loading ? (\n            <i className=\"spinner\" />\n          ) : (\n            <>\n              {sourceViewerFile.q === 'UTS' ? (\n                this.renderTests()\n              ) : (\n                <div className=\"source-viewer-measures\">\n                  {this.renderLines()}\n                  {this.renderIssues()}\n                  {this.renderCoverage()}\n                  {this.renderDuplications()}\n                </div>\n              )}\n            </>\n          )}\n\n          <div className=\"spacer-top\">\n            {this.state.showAllMeasures ? (\n              this.renderAllMeasures()\n            ) : (\n              <a className=\"js-show-all-measures\" href=\"#\" onClick={this.handleAllMeasuresClick}>\n                {translate('component_viewer.show_all_measures')}\n              </a>\n            )}\n          </div>\n        </div>\n\n        <footer className=\"modal-foot\">\n          <ResetButtonLink onClick={this.props.onClose}>{translate('close')}</ResetButtonLink>\n        </footer>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { stringify } from 'querystring';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { ButtonIcon } from 'sonar-ui-common/components/controls/buttons';\nimport { ClipboardIconButton } from 'sonar-ui-common/components/controls/clipboard';\nimport Dropdown from 'sonar-ui-common/components/controls/Dropdown';\nimport ListIcon from 'sonar-ui-common/components/icons/ListIcon';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { collapsedDirFromPath, fileFromPath } from 'sonar-ui-common/helpers/path';\nimport { omitNil } from 'sonar-ui-common/helpers/request';\nimport { getBaseUrl, getPathUrlAsString } from 'sonar-ui-common/helpers/urls';\nimport { getBranchLikeQuery, isMainBranch } from '../../helpers/branches';\nimport { getBranchLikeUrl, getCodeUrl, getComponentIssuesUrl } from '../../helpers/urls';\nimport Favorite from '../controls/Favorite';\nimport { WorkspaceContextShape } from '../workspace/context';\nimport MeasuresOverlay from './components/MeasuresOverlay';\n\ninterface Props {\n  branchLike: T.BranchLike | undefined;\n  issues?: T.Issue[];\n  openComponent: WorkspaceContextShape['openComponent'];\n  showMeasures?: boolean;\n  sourceViewerFile: T.SourceViewerFile;\n}\n\ninterface State {\n  measuresOverlay: boolean;\n}\n\nexport default class SourceViewerHeader extends React.PureComponent<Props, State> {\n  state: State = { measuresOverlay: false };\n\n  handleShowMeasuresClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    this.setState({ measuresOverlay: true });\n  };\n\n  handleMeasuresOverlayClose = () => {\n    this.setState({ measuresOverlay: false });\n  };\n\n  openInWorkspace = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    const { key } = this.props.sourceViewerFile;\n    this.props.openComponent({ branchLike: this.props.branchLike, key });\n  };\n\n  renderIssueMeasures = () => {\n    const { branchLike, issues, sourceViewerFile } = this.props;\n    return (\n      issues &&\n      issues.length > 0 && (\n        <>\n          <div className=\"source-viewer-header-measure-separator\" />\n\n          {['BUG', 'VULNERABILITY', 'CODE_SMELL', 'SECURITY_HOTSPOT'].map((type: T.IssueType) => {\n            const params = {\n              ...getBranchLikeQuery(branchLike),\n              fileUuids: sourceViewerFile.uuid,\n              resolved: 'false',\n              types: type\n            };\n\n            const total = issues.filter(issue => issue.type === type).length;\n            return (\n              <div className=\"source-viewer-header-measure\" key={type}>\n                <span className=\"source-viewer-header-measure-label\">\n                  {translate('issue.type', type)}\n                </span>\n                <span className=\"source-viewer-header-measure-value\">\n                  <Link to={getComponentIssuesUrl(sourceViewerFile.project, params)}>\n                    {formatMeasure(total, 'INT')}\n                  </Link>\n                </span>\n              </div>\n            );\n          })}\n        </>\n      )\n    );\n  };\n\n  render() {\n    const { showMeasures } = this.props;\n    const {\n      key,\n      measures,\n      path,\n      project,\n      projectName,\n      q,\n      subProject,\n      subProjectName\n    } = this.props.sourceViewerFile;\n    const unitTestsOrLines = q === 'UTS' ? 'tests' : 'lines';\n    const workspace = false;\n    const rawSourcesLink =\n      getBaseUrl() +\n      '/api/sources/raw?' +\n      stringify(omitNil({ key, ...getBranchLikeQuery(this.props.branchLike) }));\n\n    // TODO favorite\n    return (\n      <div className=\"source-viewer-header display-flex-center\">\n        <div className=\"source-viewer-header-component flex-1\">\n          <div className=\"component-name\">\n            <div className=\"component-name-parent\">\n              <a\n                className=\"link-with-icon\"\n                href={getPathUrlAsString(getBranchLikeUrl(project, this.props.branchLike))}>\n                <QualifierIcon qualifier=\"TRK\" /> <span>{projectName}</span>\n              </a>\n            </div>\n\n            {subProject !== undefined && (\n              <div className=\"component-name-parent\">\n                <QualifierIcon qualifier=\"BRC\" /> <span>{subProjectName}</span>\n              </div>\n            )}\n\n            <div className=\"component-name-path\">\n              <QualifierIcon qualifier={q} /> <span>{collapsedDirFromPath(path)}</span>\n              <span className=\"component-name-file\">{fileFromPath(path)}</span>\n              <span className=\"nudged-up spacer-left\">\n                <ClipboardIconButton className=\"button-link link-no-underline\" copyValue={path} />\n              </span>\n              {this.props.sourceViewerFile.canMarkAsFavorite &&\n                (!this.props.branchLike || isMainBranch(this.props.branchLike)) && (\n                  <Favorite\n                    className=\"component-name-favorite spacer-left\"\n                    component={key}\n                    favorite={this.props.sourceViewerFile.fav || false}\n                    qualifier={this.props.sourceViewerFile.q}\n                  />\n                )}\n            </div>\n          </div>\n        </div>\n\n        {this.state.measuresOverlay && (\n          <MeasuresOverlay\n            branchLike={this.props.branchLike}\n            onClose={this.handleMeasuresOverlayClose}\n            sourceViewerFile={this.props.sourceViewerFile}\n          />\n        )}\n\n        {showMeasures && (\n          <div className=\"display-flex-center\">\n            {measures[unitTestsOrLines] && (\n              <div className=\"source-viewer-header-measure\">\n                <span className=\"source-viewer-header-measure-label\">\n                  {translate(`metric.${unitTestsOrLines}.name`)}\n                </span>\n                <span className=\"source-viewer-header-measure-value\">\n                  {formatMeasure(measures[unitTestsOrLines], 'SHORT_INT')}\n                </span>\n              </div>\n            )}\n\n            {measures.coverage !== undefined && (\n              <div className=\"source-viewer-header-measure\">\n                <span className=\"source-viewer-header-measure-label\">\n                  {translate('metric.coverage.name')}\n                </span>\n                <span className=\"source-viewer-header-measure-value\">\n                  {formatMeasure(measures.coverage, 'PERCENT')}\n                </span>\n              </div>\n            )}\n\n            {measures.duplicationDensity !== undefined && (\n              <div className=\"source-viewer-header-measure\">\n                <span className=\"source-viewer-header-measure-label\">\n                  {translate('duplications')}\n                </span>\n                <span className=\"source-viewer-header-measure-value\">\n                  {formatMeasure(measures.duplicationDensity, 'PERCENT')}\n                </span>\n              </div>\n            )}\n\n            {this.renderIssueMeasures()}\n          </div>\n        )}\n\n        <Dropdown\n          className=\"source-viewer-header-actions flex-0\"\n          overlay={\n            <ul className=\"menu\">\n              <li>\n                <a className=\"js-measures\" href=\"#\" onClick={this.handleShowMeasuresClick}>\n                  {translate('component_viewer.show_details')}\n                </a>\n              </li>\n              <li>\n                <Link\n                  className=\"js-new-window\"\n                  rel=\"noopener noreferrer\"\n                  target=\"_blank\"\n                  to={getCodeUrl(this.props.sourceViewerFile.project, this.props.branchLike, key)}>\n                  {translate('component_viewer.new_window')}\n                </Link>\n              </li>\n              {!workspace && (\n                <li>\n                  <a className=\"js-workspace\" href=\"#\" onClick={this.openInWorkspace}>\n                    {translate('component_viewer.open_in_workspace')}\n                  </a>\n                </li>\n              )}\n              <li>\n                <a\n                  className=\"js-raw-source\"\n                  href={rawSourcesLink}\n                  rel=\"noopener noreferrer\"\n                  target=\"_blank\">\n                  {translate('component_viewer.show_raw_source')}\n                </a>\n              </li>\n            </ul>\n          }\n          overlayPlacement={PopupPlacement.BottomRight}>\n          <ButtonIcon className=\"js-actions\">\n            <ListIcon />\n          </ButtonIcon>\n        </Dropdown>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { intersection, uniqBy } from 'lodash';\nimport * as React from 'react';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport {\n  getComponentData,\n  getComponentForSourceViewer,\n  getDuplications,\n  getSources\n} from '../../api/components';\nimport { getBranchLikeQuery, isSameBranchLike } from '../../helpers/branches';\nimport { WorkspaceContext } from '../workspace/context';\nimport DuplicationPopup from './components/DuplicationPopup';\nimport {\n  filterDuplicationBlocksByLine,\n  getDuplicationBlocksForIndex,\n  isDuplicationBlockInRemovedComponent\n} from './helpers/duplications';\nimport getCoverageStatus from './helpers/getCoverageStatus';\nimport {\n  duplicationsByLine,\n  issuesByLine,\n  locationsByLine,\n  symbolsByLine\n} from './helpers/indexing';\nimport defaultLoadIssues from './helpers/loadIssues';\nimport SourceViewerCode from './SourceViewerCode';\nimport { SourceViewerContext } from './SourceViewerContext';\nimport SourceViewerHeader from './SourceViewerHeader';\nimport SourceViewerHeaderSlim from './SourceViewerHeaderSlim';\nimport './styles.css';\n\n// TODO react-virtualized\n\nexport interface Props {\n  aroundLine?: number;\n  branchLike: T.BranchLike | undefined;\n  component: string;\n  displayAllIssues?: boolean;\n  displayLocationMarkers?: boolean;\n  highlightedLine?: number;\n  // `undefined` elements mean they are located in a different file,\n  // but kept to maintaint the location indexes\n  highlightedLocations?: (T.FlowLocation | undefined)[];\n  highlightedLocationMessage?: { index: number; text: string | undefined };\n  loadComponent: (\n    component: string,\n    branchLike: T.BranchLike | undefined\n  ) => Promise<T.SourceViewerFile>;\n  loadIssues: (\n    component: string,\n    from: number,\n    to: number,\n    branchLike: T.BranchLike | undefined\n  ) => Promise<T.Issue[]>;\n  loadSources: (\n    component: string,\n    from: number,\n    to: number,\n    branchLike: T.BranchLike | undefined\n  ) => Promise<T.SourceLine[]>;\n  onLoaded?: (component: T.SourceViewerFile, sources: T.SourceLine[], issues: T.Issue[]) => void;\n  onLocationSelect?: (index: number) => void;\n  onIssueChange?: (issue: T.Issue) => void;\n  onIssueSelect?: (issueKey: string) => void;\n  onIssueUnselect?: () => void;\n  scroll?: (element: HTMLElement) => void;\n  selectedIssue?: string;\n  showMeasures?: boolean;\n  slimHeader?: boolean;\n}\n\ninterface State {\n  component?: T.SourceViewerFile;\n  displayDuplications: boolean;\n  duplicatedFiles?: T.Dict<T.DuplicatedFile>;\n  duplications?: T.Duplication[];\n  duplicationsByLine: { [line: number]: number[] };\n  hasSourcesAfter: boolean;\n  highlightedSymbols: string[];\n  issueLocationsByLine: { [line: number]: T.LinearIssueLocation[] };\n  issuePopup?: { issue: string; name: string };\n  issues?: T.Issue[];\n  issuesByLine: { [line: number]: T.Issue[] };\n  linePopup?: T.LinePopup;\n  loading: boolean;\n  loadingSourcesAfter: boolean;\n  loadingSourcesBefore: boolean;\n  notAccessible: boolean;\n  notExist: boolean;\n  openIssuesByLine: { [line: number]: boolean };\n  selectedIssue?: string;\n  sourceRemoved: boolean;\n  sources?: T.SourceLine[];\n  symbolsByLine: { [line: number]: string[] };\n}\n\nconst LINES = 500;\n\nexport default class SourceViewerBase extends React.PureComponent<Props, State> {\n  node?: HTMLElement | null;\n  mounted = false;\n\n  static defaultProps = {\n    displayAllIssues: false,\n    displayLocationMarkers: true,\n    loadComponent: defaultLoadComponent,\n    loadIssues: defaultLoadIssues,\n    loadSources: defaultLoadSources\n  };\n\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      displayDuplications: false,\n      duplicationsByLine: {},\n      hasSourcesAfter: false,\n      highlightedSymbols: [],\n      issuesByLine: {},\n      issueLocationsByLine: {},\n      loading: true,\n      loadingSourcesAfter: false,\n      loadingSourcesBefore: false,\n      notAccessible: false,\n      notExist: false,\n      openIssuesByLine: {},\n      selectedIssue: props.selectedIssue,\n      sourceRemoved: false,\n      symbolsByLine: {}\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchComponent();\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    // if a component or a branch has changed,\n    // set `loading: true` immediately to avoid unwanted scrolling in `LineCode`\n    if (\n      nextProps.component !== this.props.component ||\n      !isSameBranchLike(nextProps.branchLike, this.props.branchLike)\n    ) {\n      this.setState({ loading: true });\n    }\n    if (\n      nextProps.onIssueSelect !== undefined &&\n      nextProps.selectedIssue !== this.props.selectedIssue\n    ) {\n      this.setState({ selectedIssue: nextProps.selectedIssue });\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (\n      prevProps.component !== this.props.component ||\n      !isSameBranchLike(prevProps.branchLike, this.props.branchLike)\n    ) {\n      this.fetchComponent();\n    } else if (\n      this.props.aroundLine !== undefined &&\n      prevProps.aroundLine !== this.props.aroundLine &&\n      this.isLineOutsideOfRange(this.props.aroundLine)\n    ) {\n      this.fetchSources();\n    } else {\n      const { selectedIssue } = this.props;\n      const { issues } = this.state;\n      if (\n        selectedIssue !== undefined &&\n        issues !== undefined &&\n        issues.find(issue => issue.key === selectedIssue) === undefined\n      ) {\n        this.reloadIssues();\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  computeCoverageStatus(lines: T.SourceLine[]) {\n    return lines.map(line => ({ ...line, coverageStatus: getCoverageStatus(line) }));\n  }\n\n  isLineOutsideOfRange(lineNumber: number) {\n    const { sources } = this.state;\n    if (sources && sources.length > 0) {\n      const firstLine = sources[0];\n      const lastList = sources[sources.length - 1];\n      return lineNumber < firstLine.line || lineNumber > lastList.line;\n    } else {\n      return true;\n    }\n  }\n\n  fetchComponent() {\n    this.setState({ loading: true });\n\n    const to = (this.props.aroundLine || 0) + LINES;\n    const loadIssues = (component: T.SourceViewerFile, sources: T.SourceLine[]) => {\n      this.props.loadIssues(this.props.component, 1, to, this.props.branchLike).then(\n        issues => {\n          if (this.mounted) {\n            const finalSources = sources.slice(0, LINES);\n\n            this.setState(\n              {\n                component,\n                displayDuplications: false,\n                duplicatedFiles: undefined,\n                duplications: undefined,\n                duplicationsByLine: {},\n                hasSourcesAfter: sources.length > LINES,\n                highlightedSymbols: [],\n                issueLocationsByLine: locationsByLine(issues),\n                issues,\n                issuesByLine: issuesByLine(issues),\n                linePopup: undefined,\n                loading: false,\n                notAccessible: false,\n                notExist: false,\n                openIssuesByLine: {},\n                issuePopup: undefined,\n                sourceRemoved: false,\n                sources: this.computeCoverageStatus(finalSources),\n                symbolsByLine: symbolsByLine(sources.slice(0, LINES))\n              },\n              () => {\n                if (this.props.onLoaded) {\n                  this.props.onLoaded(component, finalSources, issues);\n                }\n              }\n            );\n          }\n        },\n        () => {\n          // TODO\n        }\n      );\n    };\n\n    const onFailLoadComponent = (response: Response) => {\n      // TODO handle other statuses\n      if (this.mounted) {\n        if (response.status === 403) {\n          this.setState({ loading: false, notAccessible: true });\n        } else if (response.status === 404) {\n          this.setState({ loading: false, notExist: true });\n        }\n      }\n    };\n\n    const onFailLoadSources = (response: Response, component: T.SourceViewerFile) => {\n      // TODO handle other statuses\n      if (this.mounted) {\n        if (response.status === 403) {\n          this.setState({ component, loading: false, notAccessible: true });\n        } else if (response.status === 404) {\n          this.setState({ component, loading: false, sourceRemoved: true });\n        }\n      }\n    };\n\n    const onResolve = (component: T.SourceViewerFile) => {\n      const sourcesRequest =\n        component.q === 'FIL' || component.q === 'UTS' ? this.loadSources() : Promise.resolve([]);\n      sourcesRequest.then(\n        sources => loadIssues(component, sources),\n        response => onFailLoadSources(response, component)\n      );\n    };\n\n    this.props\n      .loadComponent(this.props.component, this.props.branchLike)\n      .then(onResolve, onFailLoadComponent);\n  }\n\n  fetchSources() {\n    this.loadSources().then(\n      sources => {\n        if (this.mounted) {\n          const finalSources = sources.slice(0, LINES);\n          this.setState(\n            {\n              sources: sources.slice(0, LINES),\n              hasSourcesAfter: sources.length > LINES\n            },\n            () => {\n              if (this.props.onLoaded && this.state.component && this.state.issues) {\n                this.props.onLoaded(this.state.component, finalSources, this.state.issues);\n              }\n            }\n          );\n        }\n      },\n      () => {\n        // TODO\n      }\n    );\n  }\n\n  reloadIssues() {\n    if (!this.state.sources) {\n      return;\n    }\n    const firstSourceLine = this.state.sources[0];\n    const lastSourceLine = this.state.sources[this.state.sources.length - 1];\n    this.props\n      .loadIssues(\n        this.props.component,\n        firstSourceLine && firstSourceLine.line,\n        lastSourceLine && lastSourceLine.line,\n        this.props.branchLike\n      )\n      .then(\n        issues => {\n          if (this.mounted) {\n            this.setState({\n              issues,\n              issuesByLine: issuesByLine(issues),\n              issueLocationsByLine: locationsByLine(issues)\n            });\n          }\n        },\n        () => {\n          // TODO\n        }\n      );\n  }\n\n  loadSources = (): Promise<T.SourceLine[]> => {\n    return new Promise((resolve, reject) => {\n      const onFailLoadSources = (response: Response) => {\n        // TODO handle other statuses\n        if (this.mounted) {\n          if ([403, 404].includes(response.status)) {\n            reject(response);\n          } else {\n            resolve([]);\n          }\n        }\n      };\n\n      const from = this.props.aroundLine ? Math.max(1, this.props.aroundLine - LINES / 2 + 1) : 1;\n\n      let to = this.props.aroundLine ? this.props.aroundLine + LINES / 2 + 1 : LINES + 1;\n      // make sure we try to download `LINES` lines\n      if (from === 1 && to < LINES) {\n        to = LINES;\n      }\n      // request one additional line to define `hasSourcesAfter`\n      to++;\n\n      return this.props\n        .loadSources(this.props.component, from, to, this.props.branchLike)\n        .then(sources => resolve(sources), onFailLoadSources);\n    });\n  };\n\n  loadSourcesBefore = () => {\n    if (!this.state.sources) {\n      return;\n    }\n    const firstSourceLine = this.state.sources[0];\n    this.setState({ loadingSourcesBefore: true });\n    const from = Math.max(1, firstSourceLine.line - LINES);\n    this.props\n      .loadSources(this.props.component, from, firstSourceLine.line - 1, this.props.branchLike)\n      .then(\n        sources => {\n          this.props\n            .loadIssues(this.props.component, from, firstSourceLine.line - 1, this.props.branchLike)\n            .then(\n              issues => {\n                if (this.mounted) {\n                  this.setState(prevState => {\n                    const nextIssues = uniqBy(\n                      [...issues, ...(prevState.issues || [])],\n                      issue => issue.key\n                    );\n                    return {\n                      issues: nextIssues,\n                      issuesByLine: issuesByLine(nextIssues),\n                      issueLocationsByLine: locationsByLine(nextIssues),\n                      loadingSourcesBefore: false,\n                      sources: [\n                        ...this.computeCoverageStatus(sources),\n                        ...(prevState.sources || [])\n                      ],\n                      symbolsByLine: { ...prevState.symbolsByLine, ...symbolsByLine(sources) }\n                    };\n                  });\n                }\n              },\n              () => {\n                // TODO\n              }\n            );\n        },\n        () => {\n          // TODO\n        }\n      );\n  };\n\n  loadSourcesAfter = () => {\n    if (!this.state.sources) {\n      return;\n    }\n    const lastSourceLine = this.state.sources[this.state.sources.length - 1];\n    this.setState({ loadingSourcesAfter: true });\n    const fromLine = lastSourceLine.line + 1;\n    // request one additional line to define `hasSourcesAfter`\n    const toLine = lastSourceLine.line + LINES + 1;\n    this.props.loadSources(this.props.component, fromLine, toLine, this.props.branchLike).then(\n      sources => {\n        this.props.loadIssues(this.props.component, fromLine, toLine, this.props.branchLike).then(\n          issues => {\n            if (this.mounted) {\n              this.setState(prevState => {\n                const nextIssues = uniqBy(\n                  [...(prevState.issues || []), ...issues],\n                  issue => issue.key\n                );\n                return {\n                  issues: nextIssues,\n                  issuesByLine: issuesByLine(nextIssues),\n                  issueLocationsByLine: locationsByLine(nextIssues),\n                  hasSourcesAfter: sources.length > LINES,\n                  loadingSourcesAfter: false,\n                  sources: [\n                    ...(prevState.sources || []),\n                    ...this.computeCoverageStatus(sources.slice(0, LINES))\n                  ],\n                  symbolsByLine: {\n                    ...prevState.symbolsByLine,\n                    ...symbolsByLine(sources.slice(0, LINES))\n                  }\n                };\n              });\n            }\n          },\n          () => {\n            // TODO\n          }\n        );\n      },\n      () => {\n        // TODO\n      }\n    );\n  };\n\n  loadDuplications = (line: T.SourceLine) => {\n    getDuplications({\n      key: this.props.component,\n      ...getBranchLikeQuery(this.props.branchLike)\n    }).then(\n      r => {\n        if (this.mounted) {\n          this.setState(state => ({\n            displayDuplications: true,\n            duplications: r.duplications,\n            duplicationsByLine: duplicationsByLine(r.duplications),\n            duplicatedFiles: r.files,\n            linePopup:\n              r.duplications.length === 1\n                ? { index: 0, line: line.line, name: 'duplications' }\n                : state.linePopup\n          }));\n        }\n      },\n      () => {\n        // TODO\n      }\n    );\n  };\n\n  handleLinePopupToggle = ({ index, line, name, open }: T.LinePopup) => {\n    this.setState((state: State) => {\n      const samePopup =\n        state.linePopup !== undefined &&\n        state.linePopup.name === name &&\n        state.linePopup.line === line &&\n        state.linePopup.index === index;\n      if (open !== false && !samePopup) {\n        return { linePopup: { index, line, name } };\n      } else if (open !== true && samePopup) {\n        return { linePopup: undefined };\n      }\n      return null;\n    });\n  };\n\n  closeLinePopup = () => {\n    this.setState({ linePopup: undefined });\n  };\n\n  handleIssuePopupToggle = (issue: string, popupName: string, open?: boolean) => {\n    this.setState((state: State) => {\n      const samePopup =\n        state.issuePopup && state.issuePopup.name === popupName && state.issuePopup.issue === issue;\n      if (open !== false && !samePopup) {\n        return { issuePopup: { issue, name: popupName } };\n      } else if (open !== true && samePopup) {\n        return { issuePopup: undefined };\n      }\n      return null;\n    });\n  };\n\n  handleSymbolClick = (symbols: string[]) => {\n    this.setState(state => {\n      const shouldDisable = intersection(state.highlightedSymbols, symbols).length > 0;\n      const highlightedSymbols = shouldDisable ? [] : symbols;\n      return { highlightedSymbols };\n    });\n  };\n\n  handleIssueSelect = (issue: string) => {\n    if (this.props.onIssueSelect) {\n      this.props.onIssueSelect(issue);\n    } else {\n      this.setState({ selectedIssue: issue });\n    }\n  };\n\n  handleIssueUnselect = () => {\n    if (this.props.onIssueUnselect) {\n      this.props.onIssueUnselect();\n    } else {\n      this.setState({ selectedIssue: undefined });\n    }\n  };\n\n  handleOpenIssues = (line: T.SourceLine) => {\n    this.setState(state => ({\n      openIssuesByLine: { ...state.openIssuesByLine, [line.line]: true }\n    }));\n  };\n\n  handleCloseIssues = (line: T.SourceLine) => {\n    this.setState(state => ({\n      openIssuesByLine: { ...state.openIssuesByLine, [line.line]: false }\n    }));\n  };\n\n  handleIssueChange = (issue: T.Issue) => {\n    this.setState(({ issues = [] }) => {\n      const newIssues = issues.map(candidate => (candidate.key === issue.key ? issue : candidate));\n      return { issues: newIssues, issuesByLine: issuesByLine(newIssues) };\n    });\n    if (this.props.onIssueChange) {\n      this.props.onIssueChange(issue);\n    }\n  };\n\n  renderDuplicationPopup = (index: number, line: number) => {\n    const { component, duplicatedFiles, duplications } = this.state;\n\n    if (!component || !duplicatedFiles) {\n      return null;\n    }\n\n    const blocks = getDuplicationBlocksForIndex(duplications, index);\n\n    return (\n      <WorkspaceContext.Consumer>\n        {({ openComponent }) => (\n          <DuplicationPopup\n            blocks={filterDuplicationBlocksByLine(blocks, line)}\n            branchLike={this.props.branchLike}\n            duplicatedFiles={duplicatedFiles}\n            inRemovedComponent={isDuplicationBlockInRemovedComponent(blocks)}\n            onClose={this.closeLinePopup}\n            openComponent={openComponent}\n            sourceViewerFile={component}\n          />\n        )}\n      </WorkspaceContext.Consumer>\n    );\n  };\n\n  renderCode(sources: T.SourceLine[]) {\n    const hasSourcesBefore = sources.length > 0 && sources[0].line > 1;\n    return (\n      <SourceViewerCode\n        branchLike={this.props.branchLike}\n        componentKey={this.props.component}\n        displayAllIssues={this.props.displayAllIssues}\n        displayLocationMarkers={this.props.displayLocationMarkers}\n        duplications={this.state.duplications}\n        duplicationsByLine={this.state.duplicationsByLine}\n        hasSourcesAfter={this.state.hasSourcesAfter}\n        hasSourcesBefore={hasSourcesBefore}\n        highlightedLine={this.props.highlightedLine}\n        highlightedLocationMessage={this.props.highlightedLocationMessage}\n        highlightedLocations={this.props.highlightedLocations}\n        highlightedSymbols={this.state.highlightedSymbols}\n        issueLocationsByLine={this.state.issueLocationsByLine}\n        issuePopup={this.state.issuePopup}\n        issues={this.state.issues}\n        issuesByLine={this.state.issuesByLine}\n        linePopup={this.state.linePopup}\n        loadDuplications={this.loadDuplications}\n        loadSourcesAfter={this.loadSourcesAfter}\n        loadSourcesBefore={this.loadSourcesBefore}\n        loadingSourcesAfter={this.state.loadingSourcesAfter}\n        loadingSourcesBefore={this.state.loadingSourcesBefore}\n        onIssueChange={this.handleIssueChange}\n        onIssuePopupToggle={this.handleIssuePopupToggle}\n        onIssueSelect={this.handleIssueSelect}\n        onIssueUnselect={this.handleIssueUnselect}\n        onIssuesClose={this.handleCloseIssues}\n        onIssuesOpen={this.handleOpenIssues}\n        onLinePopupToggle={this.handleLinePopupToggle}\n        onLocationSelect={this.props.onLocationSelect}\n        onSymbolClick={this.handleSymbolClick}\n        openIssuesByLine={this.state.openIssuesByLine}\n        renderDuplicationPopup={this.renderDuplicationPopup}\n        scroll={this.props.scroll}\n        selectedIssue={this.state.selectedIssue}\n        sources={sources}\n        symbolsByLine={this.state.symbolsByLine}\n      />\n    );\n  }\n\n  renderHeader(branchLike: T.BranchLike | undefined, sourceViewerFile: T.SourceViewerFile) {\n    return this.props.slimHeader ? (\n      <SourceViewerHeaderSlim branchLike={branchLike} sourceViewerFile={sourceViewerFile} />\n    ) : (\n      <WorkspaceContext.Consumer>\n        {({ openComponent }) => (\n          <SourceViewerHeader\n            branchLike={this.props.branchLike}\n            issues={this.state.issues}\n            openComponent={openComponent}\n            showMeasures={this.props.showMeasures}\n            sourceViewerFile={sourceViewerFile}\n          />\n        )}\n      </WorkspaceContext.Consumer>\n    );\n  }\n\n  render() {\n    const { component, loading, sources, notAccessible, sourceRemoved } = this.state;\n\n    if (loading) {\n      return null;\n    }\n\n    if (this.state.notExist) {\n      return (\n        <Alert className=\"spacer-top\" variant=\"warning\">\n          {translate('component_viewer.no_component')}\n        </Alert>\n      );\n    }\n\n    if (notAccessible) {\n      return (\n        <Alert className=\"spacer-top\" variant=\"warning\">\n          {translate('code_viewer.no_source_code_displayed_due_to_security')}\n        </Alert>\n      );\n    }\n\n    if (!component) {\n      return null;\n    }\n\n    const className = classNames('source-viewer', {\n      'source-duplications-expanded': this.state.displayDuplications\n    });\n\n    return (\n      <SourceViewerContext.Provider value={{ branchLike: this.props.branchLike, file: component }}>\n        <div className={className} ref={node => (this.node = node)}>\n          {this.renderHeader(this.props.branchLike, component)}\n          {sourceRemoved && (\n            <Alert className=\"spacer-top\" variant=\"warning\">\n              {translate('code_viewer.no_source_code_displayed_due_to_source_removed')}\n            </Alert>\n          )}\n          {!sourceRemoved && sources !== undefined && this.renderCode(sources)}\n        </div>\n      </SourceViewerContext.Provider>\n    );\n  }\n}\n\nfunction defaultLoadComponent(component: string, branchLike: T.BranchLike | undefined) {\n  return Promise.all([\n    getComponentForSourceViewer({ component, ...getBranchLikeQuery(branchLike) }),\n    getComponentData({ component, ...getBranchLikeQuery(branchLike) })\n  ]).then(([sourceViewerComponent, { component }]) => ({\n    ...sourceViewerComponent,\n    leakPeriodDate: component.leakPeriodDate\n  }));\n}\n\nfunction defaultLoadSources(\n  key: string,\n  from: number | undefined,\n  to: number | undefined,\n  branchLike: T.BranchLike | undefined\n) {\n  return getSources({ key, from, to, ...getBranchLikeQuery(branchLike) });\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationIndex.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationIndex.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationIndex.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".location-index{position:relative;display:inline-block;vertical-align:top;line-height:16px;padding-left:6px;padding-right:6px;border-radius:2px;background-color:#d18582;color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;transition:background-color .3s ease;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.location-index.selected{background-color:#a4030f}.location-index.muted{background-color:#cdcdcd}.location-index.is-leading:first-child{margin-left:0}.location-index.is-leading:not(:first-child){margin-left:-22px}.location-index[tabindex]{cursor:pointer}.location-index[tabindex]:hover,a:hover>.location-index{background-color:#a4030f}.location-index[tabindex]:focus{outline:none}.source-line-code-inner .location-index{line-height:16px;margin:1px 4px}.source-line-code-inner .location-index+.location-index{margin-left:0}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport './LocationMessage.css';\n\ninterface Props {\n  children?: React.ReactNode;\n  selected: boolean;\n}\n\nexport default function LocationMessage(props: Props) {\n  return (\n    <div className={classNames('location-message', { selected: props.selected })}>\n      {props.children}\n    </div>\n  );\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationMessage.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationMessage.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationMessage.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".location-message{display:inline-block;vertical-align:top;line-height:16px;padding:0 6px;border-radius:2px;background-color:#9e9e9e;color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;text-overflow:ellipsis;overflow:hidden;transition:background-color .3s ease}.location-message.selected{background-color:#475760}.location-index+.location-message{margin-left:4px}.location-index>.location-message{display:none;position:absolute;bottom:calc(100% + 4px);left:0}.location-index:hover>.location-message{display:block}.location-index>.location-message:after{position:absolute;bottom:-5px;left:4px;width:0;height:0;border-top:5px solid #475760;border-left:5px solid transparent;border-right:5px solid transparent;content:\\\"\\\"}.source-line-code .location-message{padding-top:2px;padding-bottom:2px}\", \"\"]);\n\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Issue.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Issue.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Issue.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".issue{position:relative;padding-top:8px;padding-bottom:8px;background-color:#f2dede;transition:all .3s ease,border 0s ease}.issue.hotspot{background-color:#eeeff4}.issue.selected{box-shadow:none;outline:none;border:2px solid #4b9fd5!important}.issue+.issue,.issue-container+.issue-container{margin-top:5px}.issue.selected+.issue{border-top-color:transparent}.issue-row{display:flex;margin-bottom:5px}.issue-row-meta{flex-grow:0;padding-right:5px;white-space:nowrap}.issue-message{flex-grow:1;padding-left:8px;padding-right:8px;line-height:18px;font-size:13px;font-weight:600;text-overflow:ellipsis}.issue-actions{justify-content:space-between;flex-wrap:wrap;padding-left:8px}.issue-actions,.issue-meta-list{display:flex;align-items:center}.issue-meta{line-height:16px;font-size:12px}.issue-meta+.issue-meta{margin-left:8px}.issue-meta-label{display:inline-block;vertical-align:top;max-width:180px;line-height:16px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.issue-changelog{width:450px;max-height:320px;overflow:auto;white-space:normal}.issue-comments{margin-top:5px;padding-left:8px;font-size:12px}.issue-comment{display:flex}.issue-comment+.issue-comment{margin-top:4px}.issue-comment-author{max-width:130px;font-weight:600;overflow:hidden;text-overflow:ellipsis}.issue-comment-age,.issue-comment-author{flex-shrink:0;line-height:18px;color:#777;white-space:nowrap}.issue-comment-text{flex:1;min-width:0;margin-left:5px;margin-right:5px;line-height:18px;line-height:1.5;overflow:hidden;outline:none;word-break:break-all}.issue-comment-actions{flex-shrink:0;padding-left:5px;line-height:18px;white-space:nowrap}.issue-comment-bubble-popup{width:440px;font-size:12px}.issue-comment-form-text textarea{width:100%;max-width:100%}.issue-comment-form-footer{margin-top:5px;line-height:22px}.issue-comment-form-footer:after,.issue-comment-form-footer:before{display:table;content:\\\"\\\";line-height:0}.issue-comment-form-footer:after{clear:both}.issue-comment-form-actions{float:right}.issue-comment-form-tips{float:left}.issue-with-checkbox{padding-left:24px}.issue-with-checkbox .issue-checkbox-container{display:flex;justify-content:center;align-items:center}.issue-checkbox-container{display:none;position:absolute;width:28px;top:0;bottom:0;left:0;border:none}.issue-checkbox-container:hover{background-color:rgba(0,0,0,.05)}.issue:not(.selected) .location-index{background-color:#cdcdcd}.issue .menu:not(.issues-similar-issues-menu):not(.issue-changelog){max-height:120px;overflow:auto}\", \"\"]);\n\n"],"sourceRoot":""}