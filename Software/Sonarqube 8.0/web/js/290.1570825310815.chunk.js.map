{"version":3,"sources":["webpack:///./src/main/js/components/shared/StatusHelper.tsx","webpack:///./src/main/js/components/common/LocationIndex.tsx","webpack:///./src/main/js/components/SourceViewer/helpers/loadIssues.ts","webpack:///./src/main/js/components/SourceViewer/SourceViewerCode.tsx","webpack:///./src/main/js/components/SourceViewer/components/MeasuresOverlayMeasure.tsx","webpack:///./src/main/js/components/SourceViewer/components/MeasuresOverlay.tsx","webpack:///./src/main/js/components/SourceViewer/SourceViewerHeader.tsx","webpack:///./src/main/js/components/SourceViewer/SourceViewerBase.tsx","webpack:///./src/main/js/components/common/LocationIndex.css?e5a0","webpack:///./src/main/js/components/common/LocationIndex.css","webpack:///./src/main/js/components/common/LocationMessage.tsx","webpack:///./src/main/js/components/common/LocationMessage.css?8e38","webpack:///./src/main/js/components/common/LocationMessage.css","webpack:///./src/main/js/components/issue/Issue.css?30c0","webpack:///./src/main/js/components/issue/Issue.css","webpack:///./src/main/js/components/issue/actions.ts","webpack:///./src/main/js/components/common/SelectListItem.tsx","webpack:///./src/main/js/components/common/SelectList.tsx","webpack:///./src/main/js/components/issue/popups/SetAssigneePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueAssign.tsx","webpack:///./src/main/js/components/issue/popups/CommentPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueCommentAction.tsx","webpack:///./src/main/js/components/issue/popups/SetSeverityPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueSeverity.tsx","webpack:///./src/main/js/components/issue/popups/SetIssueTagsPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueTags.tsx","webpack:///./src/main/js/components/issue/popups/SetTransitionPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueTransition.tsx","webpack:///./src/main/js/components/issue/popups/SetTypePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueType.tsx","webpack:///./src/main/js/components/issue/components/IssueActionsBar.tsx","webpack:///./src/main/js/components/issue/popups/CommentDeletePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueCommentLine.tsx","webpack:///./src/main/js/components/issue/components/IssueChangelogDiff.tsx","webpack:///./src/main/js/components/issue/popups/ChangelogPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueChangelog.tsx","webpack:///./src/main/js/components/issue/components/IssueMessage.tsx","webpack:///./src/main/js/components/issue/popups/SimilarIssuesPopup.tsx","webpack:///./src/main/js/components/issue/components/SimilarIssuesFilter.tsx","webpack:///./src/main/js/components/issue/components/IssueTitleBar.tsx","webpack:///./src/main/js/components/issue/IssueView.tsx","webpack:///./src/main/js/components/issue/Issue.tsx","webpack:///./src/main/js/components/SourceViewer/styles.css?b990","webpack:///./src/main/js/components/SourceViewer/styles.css","webpack:///./src/main/js/components/intl/DateFormatter.tsx","webpack:///./src/main/js/components/intl/DateTimeFormatter.tsx","webpack:///./src/main/js/components/intl/DateFromNow.tsx","webpack:///./src/main/js/components/shared/SeverityHelper.tsx","webpack:///./src/main/js/components/measure/Measure.tsx","webpack:///./src/main/js/components/measure/utils.ts","webpack:///./src/main/js/helpers/periods.ts","webpack:///./src/main/js/components/tags/TagsList.css?aed4","webpack:///./src/main/js/components/tags/TagsList.tsx","webpack:///./src/main/js/components/ui/CoverageRating.tsx","webpack:///./src/main/js/components/tags/TagsList.css","webpack:///./src/main/js/components/common/MultiSelectOption.tsx","webpack:///./src/main/js/components/common/MultiSelect.tsx","webpack:///./src/main/js/components/common/MarkdownTips.tsx","webpack:///./src/main/js/components/tags/TagsSelector.tsx"],"names":["__webpack_require__","d","__webpack_exports__","StatusHelper","react__WEBPACK_IMPORTED_MODULE_0__","sonar_ui_common_components_icons_StatusIcon__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_components_icons_StatusIcon__WEBPACK_IMPORTED_MODULE_1___default","n","sonar_ui_common_helpers_l10n__WEBPACK_IMPORTED_MODULE_2__","props","resolution","Object","className","a","status","LocationIndex","children","leading","onClick","selected","other","__rest","clickAttributes","role","tabIndex","react__WEBPACK_IMPORTED_MODULE_1__","__assign","classnames__WEBPACK_IMPORTED_MODULE_0__","is-leading","PAGE_SIZE","loadPageAndNext","query","toLine","page","pageSize","api_issues","p","ps","then","r","issues","map","issue","helpers_issues","components","users","rules","loadPage","length","lastIssue","textRange","endLine","nextIssues","concat","loadIssues_loadIssues","component","_fromLine","branchLike","additionalFields","resolved","componentKeys","s","branches","buildQuery","Promise","resolve","EMPTY_ARRAY","ZERO_LINE","code","duplicated","isNew","line","_super","SourceViewerCode","_this","apply","this","arguments","getDuplicationsForLine","duplicationsByLine","getIssuesForLine","issuesByLine","getIssueLocationsForLine","issueLocationsByLine","renderLine","_a","index","displayCoverage","displayDuplications","displayIssues","_b","highlightedLocationMessage","highlightedLocations","selectedIssue","sources","secondaryIssueLocations","issueLocations","duplicationsCount","duplications","issuesForLine","index_js_exposed","Line","displayAllIssues","displayLocationMarkers","highlighted","highlightedLine","helpers_lines","highlightedSymbols","symbolsByLine","issuePopup","key","last","hasSourcesAfter","linePopup","loadDuplications","onIssueChange","onIssuePopupToggle","onIssueSelect","onIssueUnselect","onIssuesClose","onIssuesOpen","onLinePopupToggle","onLocationSelect","onSymbolClick","openIssues","openIssuesByLine","previousLine","undefined","renderDuplicationPopup","scroll","__extends","prototype","render","some","coverageStatus","hasFileIssues","hasSourcesBefore","loadingSourcesBefore","l10n","buttons","loadSourcesBefore","loadingSourcesAfter","loadSourcesAfter","MeasuresOverlayMeasure","measure","data-metric","metric","includes","IssueTypeIcon_default","Measure","metricKey","metricType","type","small","value","MeasuresOverlay","mounted","state","loading","measures","showAllMeasures","fetchData","all","fetchMeasures","fetchIssues","facets","setState","MeasuresOverlay_assign","api_metrics","metrics","metricKeys","js_helpers_measures","api_measures","sourceViewerFile","join","withMetrics","filter","keyBy_default","severitiesFacet","find","f","property","tagsFacet","typesFacet","values","handleAllMeasuresClick","event","preventDefault","currentTarget","blur","renderMeasure","renderLines","lines","ncloc","comment_lines","comment_lines_density","cognitive_complexity","complexity","function_complexity","renderBigMeasure","renderIssues","violations","sqale_index","sortBy_default","constants","indexOf","val","helpers_measures","count","SeverityHelper","severity","TagsIcon_default","renderCoverage","coverage","CoverageRating","size","uncovered_lines","lines_to_cover","uncovered_conditions","conditions_to_cover","renderDuplications","duplicated_lines_density","DuplicationsRating_default","muted","Number","duplicated_blocks","duplicated_lines","renderTests","tests","test_success_density","test_failures","test_errors","skipped_tests","test_execution_time","renderDomain","domain","renderAllMeasures","domains","groupBy_default","domainKeys","keys","odd","_","even","MeasuresOverlay_extends","componentDidMount","componentWillUnmount","Modal_default","contentLabel","onRequestClose","onClose","QualifierIcon_default","qualifier","es","to","helpers_urls","project","projectName","subProject","subProjectName","q","path","href","SourceViewerHeader","measuresOverlay","handleShowMeasuresClick","handleMeasuresOverlayClose","openInWorkspace","openComponent","renderIssueMeasures","params","SourceViewerHeader_assign","fileUuids","uuid","types","total","SourceViewerHeader_extends","showMeasures","unitTestsOrLines","rawSourcesLink","urls","querystring_es3","request","helpers_path","clipboard","copyValue","canMarkAsFavorite","Favorite","favorite","fav","components_MeasuresOverlay","duplicationDensity","Dropdown_default","overlay","rel","target","overlayPlacement","popups","BottomRight","ListIcon_default","LINES","SourceViewerBase_SourceViewerBase","SourceViewerBase","call","loadSources","reject","from","aroundLine","Math","max","response","firstSourceLine","loadIssues","prevState","uniqBy_default","indexing","computeCoverageStatus","SourceViewerBase_assign","lastSourceLine","fromLine","slice","duplicatedFiles","files","name","handleLinePopupToggle","open","samePopup","closeLinePopup","handleIssuePopupToggle","popupName","handleSymbolClick","symbols","intersection_default","handleIssueSelect","handleIssueUnselect","handleOpenIssues","handleCloseIssues","handleIssueChange","newIssues","candidate","blocks","helpers_duplications","context","Consumer","DuplicationPopup","inRemovedComponent","notAccessible","notExist","sourceRemoved","SourceViewerBase_extends","fetchComponent","componentWillReceiveProps","nextProps","componentDidUpdate","prevProps","isLineOutsideOfRange","fetchSources","selectedIssue_1","reloadIssues","getCoverageStatus","lineNumber","firstLine","lastList","loadComponent","finalSources_1","onLoaded","onFailLoadSources","finalSources_2","renderCode","SourceViewer_SourceViewerCode","componentKey","renderHeader","slimHeader","SourceViewerHeaderSlim","SourceViewer_SourceViewerHeader","Alert","variant","classnames","source-duplications-expanded","SourceViewerContext","Provider","file","ref","node","defaultProps","defaultLoadComponent","defaultLoadSources","sourceViewerComponent","leakPeriodDate","content","module","i","options","hmr","transform","insertInto","locals","exports","push","LocationMessage","actions_updateIssue","onChange","resultPromise","oldIssue","newIssue","optimisticUpdate","SelectListItem","handleSelect","onSelect","item","handleHover","onHover","renderLink","classnames_default","active","onFocus","onMouseOver","Tooltip_default","title","placement","SelectList","attachShortcuts","previousKeyScope","keymaster","previousFilter","currentKeyScope","uniqueId_default","tagName","srcElement","isInput","keyCode","selectNextElement","selectPreviousElement","detachShortcuts","idx","items","renderChild","child","common_SelectListItem","currentItem","SelectList_extends","hasChildren","LIST_SIZE","SetAssigneePopup_SetAssigneePopup","SetAssigneePopup","searchMembers","organizations","organization","projectOrganization","handleSearchResult","searchUsers","api_users","activeUsers","helpers_users","currentUser","login","handleSearchChange","defaultUsersArray","system","SetAssigneePopup_extends","Dropdown","noPadding","SearchBox_default","autoFocus","minLength","placeholder","common_SelectList","map_default","user","Avatar","hash","avatar","style","marginLeft","popups_SetAssigneePopup","withCurrentUser","IssueAssign","toggleAssign","togglePopup","handleClose","IssueAssign_extends","renderAssignee","assigneeName","assignee","assigneeAvatar","assigneeActive","canAssign","Toggler_default","closeOnEscape","isOpen","onAssign","DropdownIcon_default","CommentPopup","handleCommentChange","textComment","handleCommentClick","trim","onComment","handleCancelClick","toggleComment","handleKeyboard","metaKey","ctrlKey","stopPropagation","comment","markdown","CommentPopup_extends","autoTriggered","onKeyDown","rows","disabled","MarkdownTips","IssueCommentAction","addComment","text","issueKey","IssueCommentAction_extends","closeOnClickOutside","currentPopup","popups_CommentPopup","commentAutoTriggered","commentPlaceholder","SEVERITY","SetSeverityPopup","SeverityIcon_default","IssueSeverity","toggleSetSeverity","setSeverity","setIssueProperty","IssueSeverity_extends","canSetSeverity","SetIssueTagsPopup_LIST_SIZE","SetIssueTagsPopup","searchResult","onSearch","min","selectedTags","tags","tag","setTags","onUnselect","without_default","SetIssueTagsPopup_extends","availableTags","difference_default","TagsSelector","listSize","IssueTags","toggleSetTags","IssueTags_extends","canSetTags","popups_SetIssueTagsPopup","TagsList","allowUpdate","SetTransitionPopup","fromHotspot","transitions","isManualVulnerability","transition","translateTransition","description","IssueTransition","setTransition","toggleSetTransition","IssueTransition_extends","hasTransitions","TYPES","SetTypePopup","IssueType","toggleSetType","setType","IssueType_extends","canSetType","IssueActionsBar","popup","apiCall","IssueActionsBar_assign","handleTransition","IssueActionsBar_extends","actions","canComment","isSecurityHotspot","components_IssueType","components_IssueSeverity","components_IssueTransition","components_IssueAssign","effort","components_IssueCommentAction","components_IssueTags","CommentDeletePopup","onDelete","IssueCommentLine","openPopup","handleEdit","onEdit","toggleEditPopup","handleDelete","toggleDeletePopup","force","closePopups","IssueCommentLine_extends","author","authorName","displayName","authorActive","authorAvatar","dangerouslySetInnerHTML","__html","purify","htmlText","DateFromNow","date","createdAt","updatable","IssueChangelogDiff","message","diff","oldValue","newValue","ChangelogPopup","changelog","ChangelogPopup_extends","loadChangelog","DateTimeFormatter","creationDate","userName","isUserActive","diffs","IssueChangelog","toggleChangelog","handleClick","IssueChangelog_extends","popups_ChangelogPopup","mouseEnterDelay","IssueMessage","openRule","rule","IssueMessage_extends","aria-label","engine","manualVulnerability","SimilarIssuesPopup","onFilter","SimilarIssuesPopup_extends","ruleName","componentQualifier","componentLongName","SimilarIssuesFilter","handleFilter","SimilarIssuesFilter_extends","popups_SimilarIssuesPopup","FilterIcon_default","IssueTitleBar","hasSimilarIssuesFilter","issueUrl","IssueTitleBar_assign","components_IssueMessage","externalRuleEngine","components_IssueChangelog","LinkIcon_default","components_SimilarIssuesFilter","IssueView","handleCheck","onCheck","isClickable","toUpperCase","parentElement","editComment","deleteComment","IssueView_extends","hasCheckbox","issueClass","hotspot","issue-with-checkbox","data-issue","components_IssueActionsBar","comments","components_IssueCommentLine","Checkbox_default","checked","Issue_Issue","Issue","onPopupToggle","handleAssignement","Issue_extends","bindShortcuts","componentWillUpdate","unbindShortcuts","issue_IssueView","formatterOption","year","month","day","longFormatterOption","DateFormatter","long","react_intl__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_helpers_dates__WEBPACK_IMPORTED_MODULE_2__","hour","minute","sonar_ui_common_components_icons_SeverityIcon__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_components_icons_SeverityIcon__WEBPACK_IMPORTED_MODULE_1___default","sonar_ui_common_components_controls_Tooltip__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_components_controls_Tooltip__WEBPACK_IMPORTED_MODULE_1___default","sonar_ui_common_components_ui_Level__WEBPACK_IMPORTED_MODULE_2__","sonar_ui_common_components_ui_Level__WEBPACK_IMPORTED_MODULE_2___default","sonar_ui_common_components_ui_Rating__WEBPACK_IMPORTED_MODULE_3__","sonar_ui_common_components_ui_Rating__WEBPACK_IMPORTED_MODULE_3___default","sonar_ui_common_helpers_measures__WEBPACK_IMPORTED_MODULE_4__","_utils__WEBPACK_IMPORTED_MODULE_5__","decimals","level","formattedValue","tooltip","rating","KNOWN_RATINGS","enhanceMeasure","leak","getLeakValue","periods","period","_helpers_periods__WEBPACK_IMPORTED_MODULE_1__","getRatingTooltip","finalMetricKey","_helpers_measures__WEBPACK_IMPORTED_MODULE_0__","substr","getLeakPeriod","getPeriodLabel","getPeriodDate","sonar_ui_common_helpers_dates__WEBPACK_IMPORTED_MODULE_0__","sonar_ui_common_helpers_l10n__WEBPACK_IMPORTED_MODULE_1__","Array","isArray","getPeriod","dateFormatter","parameter","modeParam","mode","toLowerCase","sonar_ui_common_components_icons_DropdownIcon__WEBPACK_IMPORTED_MODULE_2__","sonar_ui_common_components_icons_DropdownIcon__WEBPACK_IMPORTED_MODULE_2___default","sonar_ui_common_components_icons_TagsIcon__WEBPACK_IMPORTED_MODULE_3__","sonar_ui_common_components_icons_TagsIcon__WEBPACK_IMPORTED_MODULE_3___default","sonar_ui_common_components_lazyLoad__WEBPACK_IMPORTED_MODULE_1__","_app_theme__WEBPACK_IMPORTED_MODULE_2__","DonutChart","e","t","bind","SIZE_TO_WIDTH_MAPPING","normal","big","huge","SIZE_TO_THICKNESS_MAPPING","_c","data","fill","numberValue","gray71","green","barBackgroundColor","red","width","thickness","height","MultiSelectOption","evt","onSelectChange","element","icon-checkbox-checked","icon-checkbox-invisible","activeClass","custom","renderLabel","MultiSelect_MultiSelect","MultiSelect","handleSelectChange","onSelectItem","onUnselectItem","onSearchQuery","validateSearchInput","handleElementHover","activeIdx","getAllElements","toggleSelect","stopLoading","isNewElement","elem","selectedElements","elements","updateSelectedElements","filterSelected","updateUnselectedElements","unselectedElements","setElementActive","allElements","MultiSelect_extends","container","addEventListener","totalElements","searchInput","focus","removeEventListener","allowSelection","allowNewElements","_d","footerNode","_e","activeElement","showNewElement","infiniteList","listClasses","menu-vertically-limited","spacer-top","with-top-separator","with-bottom-separator","Boolean","div","common_MultiSelectOption","window","_helpers_urls__WEBPACK_IMPORTED_MODULE_3__","_common_MultiSelect__WEBPACK_IMPORTED_MODULE_2__","validateTag","replace"],"mappings":"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","file":"js/290.1570825310815.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport StatusIcon from 'sonar-ui-common/components/icons/StatusIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  className?: string;\n  resolution: string | undefined;\n  status: string;\n}\n\nexport default function StatusHelper(props: Props) {\n  const resolution = props.resolution && ` (${translate('issue.resolution', props.resolution)})`;\n  return (\n    <span className={props.className}>\n      <StatusIcon className=\"little-spacer-right\" status={props.status} />\n      {translate('issue.status', props.status)}\n      {resolution}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport './LocationIndex.css';\n\ninterface Props {\n  children?: React.ReactNode;\n  leading?: boolean;\n  onClick?: () => void;\n  selected?: boolean;\n  [x: string]: any;\n}\n\nexport default function LocationIndex(props: Props) {\n  const { children, leading, onClick, selected, ...other } = props;\n  const clickAttributes = onClick ? { onClick, role: 'button', tabIndex: 0 } : {};\n  // put {...others} because Tooltip sets some event handlers\n  return (\n    <div\n      className={classNames('location-index', {\n        'is-leading': leading,\n        selected\n      })}\n      {...clickAttributes}\n      {...other}>\n      {children}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { searchIssues } from '../../../api/issues';\nimport { getBranchLikeQuery } from '../../../helpers/branches';\nimport { parseIssueFromResponse } from '../../../helpers/issues';\n\n// maximum possible value\nconst PAGE_SIZE = 500;\n\nfunction buildQuery(component: string, branchLike: T.BranchLike | undefined) {\n  return {\n    additionalFields: '_all',\n    resolved: 'false',\n    componentKeys: component,\n    s: 'FILE_LINE',\n    ...getBranchLikeQuery(branchLike)\n  };\n}\n\nexport function loadPage(\n  query: T.RawQuery,\n  page: number,\n  pageSize = PAGE_SIZE\n): Promise<T.Issue[]> {\n  return searchIssues({\n    ...query,\n    p: page,\n    ps: pageSize\n  }).then(r =>\n    r.issues.map(issue => parseIssueFromResponse(issue, r.components, r.users, r.rules))\n  );\n}\n\nexport function loadPageAndNext(\n  query: T.RawQuery,\n  toLine: number,\n  page: number,\n  pageSize = PAGE_SIZE\n): Promise<T.Issue[]> {\n  return loadPage(query, page).then(issues => {\n    if (issues.length === 0) {\n      return [];\n    }\n\n    const lastIssue = issues[issues.length - 1];\n\n    if (\n      (lastIssue.textRange != null && lastIssue.textRange.endLine > toLine) ||\n      issues.length < pageSize\n    ) {\n      return issues;\n    }\n\n    return loadPageAndNext(query, toLine, page + 1, pageSize).then(nextIssues => {\n      return [...issues, ...nextIssues];\n    });\n  });\n}\n\nexport default function loadIssues(\n  component: string,\n  _fromLine: number,\n  toLine: number,\n  branchLike: T.BranchLike | undefined\n): Promise<T.Issue[]> {\n  const query = buildQuery(component, branchLike);\n  return new Promise(resolve => {\n    loadPageAndNext(query, toLine, 1).then(issues => {\n      resolve(issues);\n    });\n  });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport Line from './components/Line';\nimport { getSecondaryIssueLocationsForLine } from './helpers/issueLocations';\nimport {\n  optimizeHighlightedSymbols,\n  optimizeLocationMessage,\n  optimizeSelectedIssue\n} from './helpers/lines';\n\nconst EMPTY_ARRAY: any[] = [];\n\nconst ZERO_LINE = {\n  code: '',\n  duplicated: false,\n  isNew: false,\n  line: 0\n};\n\ninterface Props {\n  branchLike: T.BranchLike | undefined;\n  componentKey: string;\n  displayAllIssues?: boolean;\n  displayLocationMarkers?: boolean;\n  duplications: T.Duplication[] | undefined;\n  duplicationsByLine: { [line: number]: number[] };\n  hasSourcesAfter: boolean;\n  hasSourcesBefore: boolean;\n  highlightedLine: number | undefined;\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined;\n  // `undefined` elements mean they are located in a different file,\n  // but kept to maintain the location indexes\n  highlightedLocations: (T.FlowLocation | undefined)[] | undefined;\n  highlightedSymbols: string[];\n  issueLocationsByLine: { [line: number]: T.LinearIssueLocation[] };\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: T.Issue[] | undefined;\n  issuesByLine: { [line: number]: T.Issue[] };\n  linePopup: T.LinePopup | undefined;\n  loadDuplications: (line: T.SourceLine) => void;\n  loadingSourcesAfter: boolean;\n  loadingSourcesBefore: boolean;\n  loadSourcesAfter: () => void;\n  loadSourcesBefore: () => void;\n  onIssueChange: (issue: T.Issue) => void;\n  onIssuePopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  onIssuesClose: (line: T.SourceLine) => void;\n  onIssueSelect: (issueKey: string) => void;\n  onIssuesOpen: (line: T.SourceLine) => void;\n  onIssueUnselect: () => void;\n  onLinePopupToggle: (linePopup: T.LinePopup) => void;\n  onLocationSelect: ((index: number) => void) | undefined;\n  onSymbolClick: (symbols: string[]) => void;\n  openIssuesByLine: { [line: number]: boolean };\n  renderDuplicationPopup: (index: number, line: number) => React.ReactNode;\n  scroll?: (element: HTMLElement) => void;\n  selectedIssue: string | undefined;\n  sources: T.SourceLine[];\n  symbolsByLine: { [line: number]: string[] };\n}\n\nexport default class SourceViewerCode extends React.PureComponent<Props> {\n  getDuplicationsForLine = (line: T.SourceLine): number[] => {\n    return this.props.duplicationsByLine[line.line] || EMPTY_ARRAY;\n  };\n\n  getIssuesForLine = (line: T.SourceLine): T.Issue[] => {\n    return this.props.issuesByLine[line.line] || EMPTY_ARRAY;\n  };\n\n  getIssueLocationsForLine = (line: T.SourceLine): T.LinearIssueLocation[] => {\n    return this.props.issueLocationsByLine[line.line] || EMPTY_ARRAY;\n  };\n\n  renderLine = ({\n    line,\n    index,\n    displayCoverage,\n    displayDuplications,\n    displayIssues\n  }: {\n    line: T.SourceLine;\n    index: number;\n    displayCoverage: boolean;\n    displayDuplications: boolean;\n    displayIssues: boolean;\n  }) => {\n    const { highlightedLocationMessage, highlightedLocations, selectedIssue, sources } = this.props;\n\n    const secondaryIssueLocations = getSecondaryIssueLocationsForLine(line, highlightedLocations);\n\n    const duplicationsCount = this.props.duplications ? this.props.duplications.length : 0;\n\n    const issuesForLine = this.getIssuesForLine(line);\n\n    return (\n      <Line\n        branchLike={this.props.branchLike}\n        displayAllIssues={this.props.displayAllIssues}\n        displayCoverage={displayCoverage}\n        displayDuplications={displayDuplications}\n        displayIssues={displayIssues}\n        displayLocationMarkers={this.props.displayLocationMarkers}\n        duplications={this.getDuplicationsForLine(line)}\n        duplicationsCount={duplicationsCount}\n        highlighted={line.line === this.props.highlightedLine}\n        highlightedLocationMessage={optimizeLocationMessage(\n          highlightedLocationMessage,\n          secondaryIssueLocations\n        )}\n        highlightedSymbols={optimizeHighlightedSymbols(\n          this.props.symbolsByLine[line.line],\n          this.props.highlightedSymbols\n        )}\n        issueLocations={this.getIssueLocationsForLine(line)}\n        issuePopup={this.props.issuePopup}\n        issues={issuesForLine}\n        key={line.line}\n        last={index === this.props.sources.length - 1 && !this.props.hasSourcesAfter}\n        line={line}\n        linePopup={this.props.linePopup}\n        loadDuplications={this.props.loadDuplications}\n        onIssueChange={this.props.onIssueChange}\n        onIssuePopupToggle={this.props.onIssuePopupToggle}\n        onIssueSelect={this.props.onIssueSelect}\n        onIssueUnselect={this.props.onIssueUnselect}\n        onIssuesClose={this.props.onIssuesClose}\n        onIssuesOpen={this.props.onIssuesOpen}\n        onLinePopupToggle={this.props.onLinePopupToggle}\n        onLocationSelect={this.props.onLocationSelect}\n        onSymbolClick={this.props.onSymbolClick}\n        openIssues={this.props.openIssuesByLine[line.line] || false}\n        previousLine={index > 0 ? sources[index - 1] : undefined}\n        renderDuplicationPopup={this.props.renderDuplicationPopup}\n        scroll={this.props.scroll}\n        secondaryIssueLocations={secondaryIssueLocations}\n        selectedIssue={optimizeSelectedIssue(selectedIssue, issuesForLine)}\n      />\n    );\n  };\n\n  render() {\n    const { issues = [], sources } = this.props;\n\n    const displayCoverage = sources.some(s => s.coverageStatus != null);\n    const displayDuplications = sources.some(s => !!s.duplicated);\n    const displayIssues = issues.length > 0;\n\n    const hasFileIssues = displayIssues && issues.some(issue => !issue.textRange);\n\n    return (\n      <div className=\"source-viewer-code\">\n        {this.props.hasSourcesBefore && (\n          <div className=\"source-viewer-more-code\">\n            {this.props.loadingSourcesBefore ? (\n              <div className=\"js-component-viewer-loading-before\">\n                <i className=\"spinner\" />\n                <span className=\"note spacer-left\">\n                  {translate('source_viewer.loading_more_code')}\n                </span>\n              </div>\n            ) : (\n              <Button\n                className=\"js-component-viewer-source-before\"\n                onClick={this.props.loadSourcesBefore}>\n                {translate('source_viewer.load_more_code')}\n              </Button>\n            )}\n          </div>\n        )}\n\n        <table className=\"source-table\">\n          <tbody>\n            {hasFileIssues &&\n              this.renderLine({\n                line: ZERO_LINE,\n                index: -1,\n                displayCoverage,\n                displayDuplications,\n                displayIssues\n              })}\n            {sources.map((line, index) =>\n              this.renderLine({ line, index, displayCoverage, displayDuplications, displayIssues })\n            )}\n          </tbody>\n        </table>\n\n        {this.props.hasSourcesAfter && (\n          <div className=\"source-viewer-more-code\">\n            {this.props.loadingSourcesAfter ? (\n              <div className=\"js-component-viewer-loading-after\">\n                <i className=\"spinner\" />\n                <span className=\"note spacer-left\">\n                  {translate('source_viewer.loading_more_code')}\n                </span>\n              </div>\n            ) : (\n              <Button\n                className=\"js-component-viewer-source-after\"\n                onClick={this.props.loadSourcesAfter}>\n                {translate('source_viewer.load_more_code')}\n              </Button>\n            )}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport { getLocalizedMetricName } from 'sonar-ui-common/helpers/l10n';\nimport Measure from '../../measure/Measure';\n\nexport interface MeasureWithMetric {\n  metric: T.Metric;\n  value?: string;\n}\n\ninterface Props {\n  measure: MeasureWithMetric;\n}\n\nexport default function MeasuresOverlayMeasure({ measure }: Props) {\n  return (\n    <div\n      className=\"measure measure-one-line\"\n      data-metric={measure.metric.key}\n      key={measure.metric.key}>\n      <span className=\"measure-name\">\n        {['bugs', 'vulnerabilities', 'code_smells'].includes(measure.metric.key) && (\n          <IssueTypeIcon className=\"little-spacer-right\" query={measure.metric.key} />\n        )}\n        {getLocalizedMetricName(measure.metric)}\n      </span>\n      <span className=\"measure-value\">\n        <Measure\n          metricKey={measure.metric.key}\n          metricType={measure.metric.type}\n          small={true}\n          value={measure.value}\n        />\n      </span>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { groupBy, keyBy, sortBy } from 'lodash';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport DuplicationsRating from 'sonar-ui-common/components/ui/DuplicationsRating';\nimport { getLocalizedMetricName, translate } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { getFacets } from '../../../api/issues';\nimport { getMeasures } from '../../../api/measures';\nimport { getAllMetrics } from '../../../api/metrics';\nimport { getBranchLikeQuery } from '../../../helpers/branches';\nimport { ISSUE_TYPES, SEVERITIES } from '../../../helpers/constants';\nimport { enhanceMeasuresWithMetrics, getDisplayMetrics } from '../../../helpers/measures';\nimport { getBranchLikeUrl } from '../../../helpers/urls';\nimport Measure from '../../measure/Measure';\nimport SeverityHelper from '../../shared/SeverityHelper';\nimport CoverageRating from '../../ui/CoverageRating';\nimport MeasuresOverlayMeasure from './MeasuresOverlayMeasure';\n\ninterface Props {\n  branchLike: T.BranchLike | undefined;\n  onClose: () => void;\n  sourceViewerFile: T.SourceViewerFile;\n}\n\ninterface Measures {\n  [metricKey: string]: T.MeasureEnhanced;\n}\n\ninterface State {\n  loading: boolean;\n  measures: Measures;\n  severitiesFacet?: T.FacetValue[];\n  showAllMeasures: boolean;\n  tagsFacet?: T.FacetValue[];\n  typesFacet?: T.FacetValue<T.IssueType>[];\n}\n\nexport default class MeasuresOverlay extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true, measures: {}, showAllMeasures: false };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchData();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchData = () => {\n    Promise.all([this.fetchMeasures(), this.fetchIssues()]).then(\n      ([measures, facets]) => {\n        if (this.mounted) {\n          this.setState({ loading: false, measures, ...facets });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  fetchMeasures = () => {\n    return getAllMetrics().then(metrics => {\n      const metricKeys = getDisplayMetrics(metrics).map(metric => metric.key);\n\n      // eslint-disable-next-line promise/no-nesting\n      return getMeasures({\n        component: this.props.sourceViewerFile.key,\n        metricKeys: metricKeys.join(),\n        ...getBranchLikeQuery(this.props.branchLike)\n      }).then(measures => {\n        const withMetrics = enhanceMeasuresWithMetrics(measures, metrics).filter(\n          measure => measure.metric\n        );\n        return keyBy(withMetrics, measure => measure.metric.key);\n      });\n    });\n  };\n\n  fetchIssues = () => {\n    return getFacets(\n      {\n        componentKeys: this.props.sourceViewerFile.key,\n        resolved: 'false',\n        ...getBranchLikeQuery(this.props.branchLike)\n      },\n      ['types', 'severities', 'tags']\n    ).then(({ facets }) => {\n      const severitiesFacet = facets.find(f => f.property === 'severities');\n      const tagsFacet = facets.find(f => f.property === 'tags');\n      const typesFacet = facets.find(f => f.property === 'types');\n      return {\n        severitiesFacet: severitiesFacet && severitiesFacet.values,\n        tagsFacet: tagsFacet && tagsFacet.values,\n        typesFacet: typesFacet && (typesFacet.values as T.FacetValue<T.IssueType>[])\n      };\n    });\n  };\n\n  handleAllMeasuresClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.setState({ showAllMeasures: true });\n  };\n\n  renderMeasure = (measure: T.MeasureEnhanced | undefined) => {\n    return measure ? <MeasuresOverlayMeasure key={measure.metric.key} measure={measure} /> : null;\n  };\n\n  renderLines = () => {\n    const { measures } = this.state;\n\n    return (\n      <div className=\"source-viewer-measures-section\">\n        <div className=\"source-viewer-measures-card\">\n          <div className=\"measures\">\n            <div className=\"measures-list\">\n              {this.renderMeasure(measures.lines)}\n              {this.renderMeasure(measures.ncloc)}\n              {this.renderMeasure(measures.comment_lines)}\n              {this.renderMeasure(measures.comment_lines_density)}\n            </div>\n          </div>\n\n          <div className=\"measures\">\n            <div className=\"measures-list\">\n              {this.renderMeasure(measures.cognitive_complexity)}\n              {this.renderMeasure(measures.complexity)}\n              {this.renderMeasure(measures.function_complexity)}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderBigMeasure = (measure: T.MeasureEnhanced | undefined) => {\n    return measure ? (\n      <div className=\"measure measure-big\" data-metric={measure.metric.key}>\n        <span className=\"measure-value\">\n          <Measure\n            metricKey={measure.metric.key}\n            metricType={measure.metric.type}\n            value={measure.value}\n          />\n        </span>\n        <span className=\"measure-name\">{getLocalizedMetricName(measure.metric, true)}</span>\n      </div>\n    ) : null;\n  };\n\n  renderIssues = () => {\n    const { measures, severitiesFacet, tagsFacet, typesFacet } = this.state;\n    return (\n      <div className=\"source-viewer-measures-section\">\n        <div className=\"source-viewer-measures-card\">\n          <div className=\"measures\">\n            {this.renderBigMeasure(measures.violations)}\n            {this.renderBigMeasure(measures.sqale_index)}\n          </div>\n          {measures.violations && !!measures.violations.value && (\n            <>\n              {typesFacet && (\n                <div className=\"measures\">\n                  <div className=\"measures-list\">\n                    {sortBy(typesFacet, f => ISSUE_TYPES.indexOf(f.val)).map(f => (\n                      <div className=\"measure measure-one-line\" key={f.val}>\n                        <span className=\"measure-name\">\n                          <IssueTypeIcon className=\"little-spacer-right\" query={f.val} />\n                          {translate('issue.type', f.val)}\n                        </span>\n                        <span className=\"measure-value\">{formatMeasure(f.count, 'SHORT_INT')}</span>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n              {severitiesFacet && (\n                <div className=\"measures\">\n                  <div className=\"measures-list\">\n                    {sortBy(severitiesFacet, f => SEVERITIES.indexOf(f.val)).map(f => (\n                      <div className=\"measure measure-one-line\" key={f.val}>\n                        <span className=\"measure-name\">\n                          <SeverityHelper severity={f.val} />\n                        </span>\n                        <span className=\"measure-value\">{formatMeasure(f.count, 'SHORT_INT')}</span>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n              {tagsFacet && (\n                <div className=\"measures\">\n                  <div className=\"measures-list\">\n                    {tagsFacet.map(f => (\n                      <div className=\"measure measure-one-line\" key={f.val}>\n                        <span className=\"measure-name\">\n                          <TagsIcon className=\"little-spacer-right\" />\n                          {f.val}\n                        </span>\n                        <span className=\"measure-value\">{formatMeasure(f.count, 'SHORT_INT')}</span>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  renderCoverage = () => {\n    const { coverage } = this.state.measures;\n    if (!coverage) {\n      return null;\n    }\n    return (\n      <div className=\"source-viewer-measures-section\">\n        <div className=\"source-viewer-measures-card\">\n          <div className=\"measures\">\n            <div className=\"measures-chart\">\n              <CoverageRating size=\"big\" value={coverage.value} />\n            </div>\n            <div className=\"measure measure-big\" data-metric={coverage.metric.key}>\n              <span className=\"measure-value\">\n                <Measure\n                  metricKey={coverage.metric.key}\n                  metricType={coverage.metric.type}\n                  value={coverage.value}\n                />\n              </span>\n              <span className=\"measure-name\">{getLocalizedMetricName(coverage.metric)}</span>\n            </div>\n          </div>\n\n          <div className=\"measures\">\n            <div className=\"measures-list\">\n              {this.renderMeasure(this.state.measures.uncovered_lines)}\n              {this.renderMeasure(this.state.measures.lines_to_cover)}\n              {this.renderMeasure(this.state.measures.uncovered_conditions)}\n              {this.renderMeasure(this.state.measures.conditions_to_cover)}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderDuplications = () => {\n    const { duplicated_lines_density: duplications } = this.state.measures;\n    if (!duplications) {\n      return null;\n    }\n    return (\n      <div className=\"source-viewer-measures-section\">\n        <div className=\"source-viewer-measures-card\">\n          <div className=\"measures\">\n            <div className=\"measures-chart\">\n              <DuplicationsRating\n                muted={duplications.value === undefined}\n                size=\"big\"\n                value={Number(duplications.value || 0)}\n              />\n            </div>\n            <div className=\"measure measure-big\" data-metric={duplications.metric.key}>\n              <span className=\"measure-value\">\n                <Measure\n                  metricKey={duplications.metric.key}\n                  metricType={duplications.metric.type}\n                  value={duplications.value}\n                />\n              </span>\n              <span className=\"measure-name\">\n                {getLocalizedMetricName(duplications.metric, true)}\n              </span>\n            </div>\n          </div>\n\n          <div className=\"measures\">\n            <div className=\"measures-list\">\n              {this.renderMeasure(this.state.measures.duplicated_blocks)}\n              {this.renderMeasure(this.state.measures.duplicated_lines)}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderTests = () => {\n    const { measures } = this.state;\n    return (\n      <div className=\"source-viewer-measures\">\n        <div className=\"source-viewer-measures-section\">\n          <div className=\"source-viewer-measures-card\">\n            <div className=\"measures\">\n              <div className=\"measures-list\">\n                {this.renderMeasure(measures.tests)}\n                {this.renderMeasure(measures.test_success_density)}\n                {this.renderMeasure(measures.test_failures)}\n                {this.renderMeasure(measures.test_errors)}\n                {this.renderMeasure(measures.skipped_tests)}\n                {this.renderMeasure(measures.test_execution_time)}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderDomain = (domain: string, measures: T.MeasureEnhanced[]) => {\n    return (\n      <div className=\"source-viewer-measures-card\" key={domain}>\n        <div className=\"measures\">\n          <div className=\"measures-list\">\n            <div className=\"measure measure-one-line measure-big\">\n              <span className=\"measure-name\">{domain}</span>\n            </div>\n            {sortBy(measures.filter(measure => measure.value !== undefined), measure =>\n              getLocalizedMetricName(measure.metric)\n            ).map(measure => this.renderMeasure(measure))}\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderAllMeasures = () => {\n    const domains = groupBy(Object.values(this.state.measures), measure => measure.metric.domain);\n    const domainKeys = Object.keys(domains);\n    const odd = domainKeys.filter((_, index) => index % 2 === 1);\n    const even = domainKeys.filter((_, index) => index % 2 === 0);\n    return (\n      <div className=\"source-viewer-measures source-viewer-measures-secondary js-all-measures\">\n        <div className=\"source-viewer-measures-section source-viewer-measures-section-big\">\n          {odd.map(domain => this.renderDomain(domain, domains[domain]))}\n        </div>\n        <div className=\"source-viewer-measures-section source-viewer-measures-section-big\">\n          {even.map(domain => this.renderDomain(domain, domains[domain]))}\n        </div>\n      </div>\n    );\n  };\n\n  render() {\n    const { branchLike, sourceViewerFile } = this.props;\n    const { loading } = this.state;\n\n    return (\n      <Modal contentLabel=\"\" onRequestClose={this.props.onClose} size=\"large\">\n        <div className=\"modal-container source-viewer-measures-modal\">\n          <div className=\"source-viewer-header-component source-viewer-measures-component\">\n            <div className=\"source-viewer-header-component-project\">\n              <QualifierIcon className=\"little-spacer-right\" qualifier=\"TRK\" />\n              <Link to={getBranchLikeUrl(sourceViewerFile.project, branchLike)}>\n                {sourceViewerFile.projectName}\n              </Link>\n\n              {sourceViewerFile.subProject && (\n                <>\n                  <QualifierIcon className=\"big-spacer-left little-spacer-right\" qualifier=\"BRC\" />\n                  {sourceViewerFile.subProjectName}\n                </>\n              )}\n            </div>\n\n            <div className=\"source-viewer-header-component-name display-flex-center little-spacer-top\">\n              <QualifierIcon className=\"little-spacer-right\" qualifier={sourceViewerFile.q} />\n              {sourceViewerFile.path}\n            </div>\n          </div>\n\n          {loading ? (\n            <i className=\"spinner\" />\n          ) : (\n            <>\n              {sourceViewerFile.q === 'UTS' ? (\n                this.renderTests()\n              ) : (\n                <div className=\"source-viewer-measures\">\n                  {this.renderLines()}\n                  {this.renderIssues()}\n                  {this.renderCoverage()}\n                  {this.renderDuplications()}\n                </div>\n              )}\n            </>\n          )}\n\n          <div className=\"spacer-top\">\n            {this.state.showAllMeasures ? (\n              this.renderAllMeasures()\n            ) : (\n              <a className=\"js-show-all-measures\" href=\"#\" onClick={this.handleAllMeasuresClick}>\n                {translate('component_viewer.show_all_measures')}\n              </a>\n            )}\n          </div>\n        </div>\n\n        <footer className=\"modal-foot\">\n          <ResetButtonLink onClick={this.props.onClose}>{translate('close')}</ResetButtonLink>\n        </footer>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { stringify } from 'querystring';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { ButtonIcon } from 'sonar-ui-common/components/controls/buttons';\nimport { ClipboardIconButton } from 'sonar-ui-common/components/controls/clipboard';\nimport Dropdown from 'sonar-ui-common/components/controls/Dropdown';\nimport ListIcon from 'sonar-ui-common/components/icons/ListIcon';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { collapsedDirFromPath, fileFromPath } from 'sonar-ui-common/helpers/path';\nimport { omitNil } from 'sonar-ui-common/helpers/request';\nimport { getBaseUrl, getPathUrlAsString } from 'sonar-ui-common/helpers/urls';\nimport { getBranchLikeQuery, isMainBranch } from '../../helpers/branches';\nimport { getBranchLikeUrl, getCodeUrl, getComponentIssuesUrl } from '../../helpers/urls';\nimport Favorite from '../controls/Favorite';\nimport { WorkspaceContextShape } from '../workspace/context';\nimport MeasuresOverlay from './components/MeasuresOverlay';\n\ninterface Props {\n  branchLike: T.BranchLike | undefined;\n  issues?: T.Issue[];\n  openComponent: WorkspaceContextShape['openComponent'];\n  showMeasures?: boolean;\n  sourceViewerFile: T.SourceViewerFile;\n}\n\ninterface State {\n  measuresOverlay: boolean;\n}\n\nexport default class SourceViewerHeader extends React.PureComponent<Props, State> {\n  state: State = { measuresOverlay: false };\n\n  handleShowMeasuresClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    this.setState({ measuresOverlay: true });\n  };\n\n  handleMeasuresOverlayClose = () => {\n    this.setState({ measuresOverlay: false });\n  };\n\n  openInWorkspace = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    const { key } = this.props.sourceViewerFile;\n    this.props.openComponent({ branchLike: this.props.branchLike, key });\n  };\n\n  renderIssueMeasures = () => {\n    const { branchLike, issues, sourceViewerFile } = this.props;\n    return (\n      issues &&\n      issues.length > 0 && (\n        <>\n          <div className=\"source-viewer-header-measure-separator\" />\n\n          {['BUG', 'VULNERABILITY', 'CODE_SMELL', 'SECURITY_HOTSPOT'].map((type: T.IssueType) => {\n            const params = {\n              ...getBranchLikeQuery(branchLike),\n              fileUuids: sourceViewerFile.uuid,\n              resolved: 'false',\n              types: type\n            };\n\n            const total = issues.filter(issue => issue.type === type).length;\n            return (\n              <div className=\"source-viewer-header-measure\" key={type}>\n                <span className=\"source-viewer-header-measure-label\">\n                  {translate('issue.type', type)}\n                </span>\n                <span className=\"source-viewer-header-measure-value\">\n                  <Link to={getComponentIssuesUrl(sourceViewerFile.project, params)}>\n                    {formatMeasure(total, 'INT')}\n                  </Link>\n                </span>\n              </div>\n            );\n          })}\n        </>\n      )\n    );\n  };\n\n  render() {\n    const { showMeasures } = this.props;\n    const {\n      key,\n      measures,\n      path,\n      project,\n      projectName,\n      q,\n      subProject,\n      subProjectName\n    } = this.props.sourceViewerFile;\n    const unitTestsOrLines = q === 'UTS' ? 'tests' : 'lines';\n    const workspace = false;\n    const rawSourcesLink =\n      getBaseUrl() +\n      '/api/sources/raw?' +\n      stringify(omitNil({ key, ...getBranchLikeQuery(this.props.branchLike) }));\n\n    // TODO favorite\n    return (\n      <div className=\"source-viewer-header display-flex-center\">\n        <div className=\"source-viewer-header-component flex-1\">\n          <div className=\"component-name\">\n            <div className=\"component-name-parent\">\n              <a\n                className=\"link-with-icon\"\n                href={getPathUrlAsString(getBranchLikeUrl(project, this.props.branchLike))}>\n                <QualifierIcon qualifier=\"TRK\" /> <span>{projectName}</span>\n              </a>\n            </div>\n\n            {subProject !== undefined && (\n              <div className=\"component-name-parent\">\n                <QualifierIcon qualifier=\"BRC\" /> <span>{subProjectName}</span>\n              </div>\n            )}\n\n            <div className=\"component-name-path\">\n              <QualifierIcon qualifier={q} /> <span>{collapsedDirFromPath(path)}</span>\n              <span className=\"component-name-file\">{fileFromPath(path)}</span>\n              <span className=\"nudged-up spacer-left\">\n                <ClipboardIconButton className=\"button-link link-no-underline\" copyValue={path} />\n              </span>\n              {this.props.sourceViewerFile.canMarkAsFavorite &&\n                (!this.props.branchLike || isMainBranch(this.props.branchLike)) && (\n                  <Favorite\n                    className=\"component-name-favorite spacer-left\"\n                    component={key}\n                    favorite={this.props.sourceViewerFile.fav || false}\n                    qualifier={this.props.sourceViewerFile.q}\n                  />\n                )}\n            </div>\n          </div>\n        </div>\n\n        {this.state.measuresOverlay && (\n          <MeasuresOverlay\n            branchLike={this.props.branchLike}\n            onClose={this.handleMeasuresOverlayClose}\n            sourceViewerFile={this.props.sourceViewerFile}\n          />\n        )}\n\n        {showMeasures && (\n          <div className=\"display-flex-center\">\n            {measures[unitTestsOrLines] && (\n              <div className=\"source-viewer-header-measure\">\n                <span className=\"source-viewer-header-measure-label\">\n                  {translate(`metric.${unitTestsOrLines}.name`)}\n                </span>\n                <span className=\"source-viewer-header-measure-value\">\n                  {formatMeasure(measures[unitTestsOrLines], 'SHORT_INT')}\n                </span>\n              </div>\n            )}\n\n            {measures.coverage !== undefined && (\n              <div className=\"source-viewer-header-measure\">\n                <span className=\"source-viewer-header-measure-label\">\n                  {translate('metric.coverage.name')}\n                </span>\n                <span className=\"source-viewer-header-measure-value\">\n                  {formatMeasure(measures.coverage, 'PERCENT')}\n                </span>\n              </div>\n            )}\n\n            {measures.duplicationDensity !== undefined && (\n              <div className=\"source-viewer-header-measure\">\n                <span className=\"source-viewer-header-measure-label\">\n                  {translate('duplications')}\n                </span>\n                <span className=\"source-viewer-header-measure-value\">\n                  {formatMeasure(measures.duplicationDensity, 'PERCENT')}\n                </span>\n              </div>\n            )}\n\n            {this.renderIssueMeasures()}\n          </div>\n        )}\n\n        <Dropdown\n          className=\"source-viewer-header-actions flex-0\"\n          overlay={\n            <ul className=\"menu\">\n              <li>\n                <a className=\"js-measures\" href=\"#\" onClick={this.handleShowMeasuresClick}>\n                  {translate('component_viewer.show_details')}\n                </a>\n              </li>\n              <li>\n                <Link\n                  className=\"js-new-window\"\n                  rel=\"noopener noreferrer\"\n                  target=\"_blank\"\n                  to={getCodeUrl(this.props.sourceViewerFile.project, this.props.branchLike, key)}>\n                  {translate('component_viewer.new_window')}\n                </Link>\n              </li>\n              {!workspace && (\n                <li>\n                  <a className=\"js-workspace\" href=\"#\" onClick={this.openInWorkspace}>\n                    {translate('component_viewer.open_in_workspace')}\n                  </a>\n                </li>\n              )}\n              <li>\n                <a\n                  className=\"js-raw-source\"\n                  href={rawSourcesLink}\n                  rel=\"noopener noreferrer\"\n                  target=\"_blank\">\n                  {translate('component_viewer.show_raw_source')}\n                </a>\n              </li>\n            </ul>\n          }\n          overlayPlacement={PopupPlacement.BottomRight}>\n          <ButtonIcon className=\"js-actions\">\n            <ListIcon />\n          </ButtonIcon>\n        </Dropdown>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { intersection, uniqBy } from 'lodash';\nimport * as React from 'react';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport {\n  getComponentData,\n  getComponentForSourceViewer,\n  getDuplications,\n  getSources\n} from '../../api/components';\nimport { getBranchLikeQuery, isSameBranchLike } from '../../helpers/branches';\nimport { WorkspaceContext } from '../workspace/context';\nimport DuplicationPopup from './components/DuplicationPopup';\nimport {\n  filterDuplicationBlocksByLine,\n  getDuplicationBlocksForIndex,\n  isDuplicationBlockInRemovedComponent\n} from './helpers/duplications';\nimport getCoverageStatus from './helpers/getCoverageStatus';\nimport {\n  duplicationsByLine,\n  issuesByLine,\n  locationsByLine,\n  symbolsByLine\n} from './helpers/indexing';\nimport defaultLoadIssues from './helpers/loadIssues';\nimport SourceViewerCode from './SourceViewerCode';\nimport { SourceViewerContext } from './SourceViewerContext';\nimport SourceViewerHeader from './SourceViewerHeader';\nimport SourceViewerHeaderSlim from './SourceViewerHeaderSlim';\nimport './styles.css';\n\n// TODO react-virtualized\n\nexport interface Props {\n  aroundLine?: number;\n  branchLike: T.BranchLike | undefined;\n  component: string;\n  displayAllIssues?: boolean;\n  displayLocationMarkers?: boolean;\n  highlightedLine?: number;\n  // `undefined` elements mean they are located in a different file,\n  // but kept to maintaint the location indexes\n  highlightedLocations?: (T.FlowLocation | undefined)[];\n  highlightedLocationMessage?: { index: number; text: string | undefined };\n  loadComponent: (\n    component: string,\n    branchLike: T.BranchLike | undefined\n  ) => Promise<T.SourceViewerFile>;\n  loadIssues: (\n    component: string,\n    from: number,\n    to: number,\n    branchLike: T.BranchLike | undefined\n  ) => Promise<T.Issue[]>;\n  loadSources: (\n    component: string,\n    from: number,\n    to: number,\n    branchLike: T.BranchLike | undefined\n  ) => Promise<T.SourceLine[]>;\n  onLoaded?: (component: T.SourceViewerFile, sources: T.SourceLine[], issues: T.Issue[]) => void;\n  onLocationSelect?: (index: number) => void;\n  onIssueChange?: (issue: T.Issue) => void;\n  onIssueSelect?: (issueKey: string) => void;\n  onIssueUnselect?: () => void;\n  scroll?: (element: HTMLElement) => void;\n  selectedIssue?: string;\n  showMeasures?: boolean;\n  slimHeader?: boolean;\n}\n\ninterface State {\n  component?: T.SourceViewerFile;\n  displayDuplications: boolean;\n  duplicatedFiles?: T.Dict<T.DuplicatedFile>;\n  duplications?: T.Duplication[];\n  duplicationsByLine: { [line: number]: number[] };\n  hasSourcesAfter: boolean;\n  highlightedSymbols: string[];\n  issueLocationsByLine: { [line: number]: T.LinearIssueLocation[] };\n  issuePopup?: { issue: string; name: string };\n  issues?: T.Issue[];\n  issuesByLine: { [line: number]: T.Issue[] };\n  linePopup?: T.LinePopup;\n  loading: boolean;\n  loadingSourcesAfter: boolean;\n  loadingSourcesBefore: boolean;\n  notAccessible: boolean;\n  notExist: boolean;\n  openIssuesByLine: { [line: number]: boolean };\n  selectedIssue?: string;\n  sourceRemoved: boolean;\n  sources?: T.SourceLine[];\n  symbolsByLine: { [line: number]: string[] };\n}\n\nconst LINES = 500;\n\nexport default class SourceViewerBase extends React.PureComponent<Props, State> {\n  node?: HTMLElement | null;\n  mounted = false;\n\n  static defaultProps = {\n    displayAllIssues: false,\n    displayLocationMarkers: true,\n    loadComponent: defaultLoadComponent,\n    loadIssues: defaultLoadIssues,\n    loadSources: defaultLoadSources\n  };\n\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      displayDuplications: false,\n      duplicationsByLine: {},\n      hasSourcesAfter: false,\n      highlightedSymbols: [],\n      issuesByLine: {},\n      issueLocationsByLine: {},\n      loading: true,\n      loadingSourcesAfter: false,\n      loadingSourcesBefore: false,\n      notAccessible: false,\n      notExist: false,\n      openIssuesByLine: {},\n      selectedIssue: props.selectedIssue,\n      sourceRemoved: false,\n      symbolsByLine: {}\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchComponent();\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    // if a component or a branch has changed,\n    // set `loading: true` immediately to avoid unwanted scrolling in `LineCode`\n    if (\n      nextProps.component !== this.props.component ||\n      !isSameBranchLike(nextProps.branchLike, this.props.branchLike)\n    ) {\n      this.setState({ loading: true });\n    }\n    if (\n      nextProps.onIssueSelect !== undefined &&\n      nextProps.selectedIssue !== this.props.selectedIssue\n    ) {\n      this.setState({ selectedIssue: nextProps.selectedIssue });\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (\n      prevProps.component !== this.props.component ||\n      !isSameBranchLike(prevProps.branchLike, this.props.branchLike)\n    ) {\n      this.fetchComponent();\n    } else if (\n      this.props.aroundLine !== undefined &&\n      prevProps.aroundLine !== this.props.aroundLine &&\n      this.isLineOutsideOfRange(this.props.aroundLine)\n    ) {\n      this.fetchSources();\n    } else {\n      const { selectedIssue } = this.props;\n      const { issues } = this.state;\n      if (\n        selectedIssue !== undefined &&\n        issues !== undefined &&\n        issues.find(issue => issue.key === selectedIssue) === undefined\n      ) {\n        this.reloadIssues();\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  computeCoverageStatus(lines: T.SourceLine[]) {\n    return lines.map(line => ({ ...line, coverageStatus: getCoverageStatus(line) }));\n  }\n\n  isLineOutsideOfRange(lineNumber: number) {\n    const { sources } = this.state;\n    if (sources && sources.length > 0) {\n      const firstLine = sources[0];\n      const lastList = sources[sources.length - 1];\n      return lineNumber < firstLine.line || lineNumber > lastList.line;\n    } else {\n      return true;\n    }\n  }\n\n  fetchComponent() {\n    this.setState({ loading: true });\n\n    const to = (this.props.aroundLine || 0) + LINES;\n    const loadIssues = (component: T.SourceViewerFile, sources: T.SourceLine[]) => {\n      this.props.loadIssues(this.props.component, 1, to, this.props.branchLike).then(\n        issues => {\n          if (this.mounted) {\n            const finalSources = sources.slice(0, LINES);\n\n            this.setState(\n              {\n                component,\n                displayDuplications: false,\n                duplicatedFiles: undefined,\n                duplications: undefined,\n                duplicationsByLine: {},\n                hasSourcesAfter: sources.length > LINES,\n                highlightedSymbols: [],\n                issueLocationsByLine: locationsByLine(issues),\n                issues,\n                issuesByLine: issuesByLine(issues),\n                linePopup: undefined,\n                loading: false,\n                notAccessible: false,\n                notExist: false,\n                openIssuesByLine: {},\n                issuePopup: undefined,\n                sourceRemoved: false,\n                sources: this.computeCoverageStatus(finalSources),\n                symbolsByLine: symbolsByLine(sources.slice(0, LINES))\n              },\n              () => {\n                if (this.props.onLoaded) {\n                  this.props.onLoaded(component, finalSources, issues);\n                }\n              }\n            );\n          }\n        },\n        () => {\n          // TODO\n        }\n      );\n    };\n\n    const onFailLoadComponent = (response: Response) => {\n      // TODO handle other statuses\n      if (this.mounted) {\n        if (response.status === 403) {\n          this.setState({ loading: false, notAccessible: true });\n        } else if (response.status === 404) {\n          this.setState({ loading: false, notExist: true });\n        }\n      }\n    };\n\n    const onFailLoadSources = (response: Response, component: T.SourceViewerFile) => {\n      // TODO handle other statuses\n      if (this.mounted) {\n        if (response.status === 403) {\n          this.setState({ component, loading: false, notAccessible: true });\n        } else if (response.status === 404) {\n          this.setState({ component, loading: false, sourceRemoved: true });\n        }\n      }\n    };\n\n    const onResolve = (component: T.SourceViewerFile) => {\n      const sourcesRequest =\n        component.q === 'FIL' || component.q === 'UTS' ? this.loadSources() : Promise.resolve([]);\n      sourcesRequest.then(\n        sources => loadIssues(component, sources),\n        response => onFailLoadSources(response, component)\n      );\n    };\n\n    this.props\n      .loadComponent(this.props.component, this.props.branchLike)\n      .then(onResolve, onFailLoadComponent);\n  }\n\n  fetchSources() {\n    this.loadSources().then(\n      sources => {\n        if (this.mounted) {\n          const finalSources = sources.slice(0, LINES);\n          this.setState(\n            {\n              sources: sources.slice(0, LINES),\n              hasSourcesAfter: sources.length > LINES\n            },\n            () => {\n              if (this.props.onLoaded && this.state.component && this.state.issues) {\n                this.props.onLoaded(this.state.component, finalSources, this.state.issues);\n              }\n            }\n          );\n        }\n      },\n      () => {\n        // TODO\n      }\n    );\n  }\n\n  reloadIssues() {\n    if (!this.state.sources) {\n      return;\n    }\n    const firstSourceLine = this.state.sources[0];\n    const lastSourceLine = this.state.sources[this.state.sources.length - 1];\n    this.props\n      .loadIssues(\n        this.props.component,\n        firstSourceLine && firstSourceLine.line,\n        lastSourceLine && lastSourceLine.line,\n        this.props.branchLike\n      )\n      .then(\n        issues => {\n          if (this.mounted) {\n            this.setState({\n              issues,\n              issuesByLine: issuesByLine(issues),\n              issueLocationsByLine: locationsByLine(issues)\n            });\n          }\n        },\n        () => {\n          // TODO\n        }\n      );\n  }\n\n  loadSources = (): Promise<T.SourceLine[]> => {\n    return new Promise((resolve, reject) => {\n      const onFailLoadSources = (response: Response) => {\n        // TODO handle other statuses\n        if (this.mounted) {\n          if ([403, 404].includes(response.status)) {\n            reject(response);\n          } else {\n            resolve([]);\n          }\n        }\n      };\n\n      const from = this.props.aroundLine ? Math.max(1, this.props.aroundLine - LINES / 2 + 1) : 1;\n\n      let to = this.props.aroundLine ? this.props.aroundLine + LINES / 2 + 1 : LINES + 1;\n      // make sure we try to download `LINES` lines\n      if (from === 1 && to < LINES) {\n        to = LINES;\n      }\n      // request one additional line to define `hasSourcesAfter`\n      to++;\n\n      return this.props\n        .loadSources(this.props.component, from, to, this.props.branchLike)\n        .then(sources => resolve(sources), onFailLoadSources);\n    });\n  };\n\n  loadSourcesBefore = () => {\n    if (!this.state.sources) {\n      return;\n    }\n    const firstSourceLine = this.state.sources[0];\n    this.setState({ loadingSourcesBefore: true });\n    const from = Math.max(1, firstSourceLine.line - LINES);\n    this.props\n      .loadSources(this.props.component, from, firstSourceLine.line - 1, this.props.branchLike)\n      .then(\n        sources => {\n          this.props\n            .loadIssues(this.props.component, from, firstSourceLine.line - 1, this.props.branchLike)\n            .then(\n              issues => {\n                if (this.mounted) {\n                  this.setState(prevState => {\n                    const nextIssues = uniqBy(\n                      [...issues, ...(prevState.issues || [])],\n                      issue => issue.key\n                    );\n                    return {\n                      issues: nextIssues,\n                      issuesByLine: issuesByLine(nextIssues),\n                      issueLocationsByLine: locationsByLine(nextIssues),\n                      loadingSourcesBefore: false,\n                      sources: [\n                        ...this.computeCoverageStatus(sources),\n                        ...(prevState.sources || [])\n                      ],\n                      symbolsByLine: { ...prevState.symbolsByLine, ...symbolsByLine(sources) }\n                    };\n                  });\n                }\n              },\n              () => {\n                // TODO\n              }\n            );\n        },\n        () => {\n          // TODO\n        }\n      );\n  };\n\n  loadSourcesAfter = () => {\n    if (!this.state.sources) {\n      return;\n    }\n    const lastSourceLine = this.state.sources[this.state.sources.length - 1];\n    this.setState({ loadingSourcesAfter: true });\n    const fromLine = lastSourceLine.line + 1;\n    // request one additional line to define `hasSourcesAfter`\n    const toLine = lastSourceLine.line + LINES + 1;\n    this.props.loadSources(this.props.component, fromLine, toLine, this.props.branchLike).then(\n      sources => {\n        this.props.loadIssues(this.props.component, fromLine, toLine, this.props.branchLike).then(\n          issues => {\n            if (this.mounted) {\n              this.setState(prevState => {\n                const nextIssues = uniqBy(\n                  [...(prevState.issues || []), ...issues],\n                  issue => issue.key\n                );\n                return {\n                  issues: nextIssues,\n                  issuesByLine: issuesByLine(nextIssues),\n                  issueLocationsByLine: locationsByLine(nextIssues),\n                  hasSourcesAfter: sources.length > LINES,\n                  loadingSourcesAfter: false,\n                  sources: [\n                    ...(prevState.sources || []),\n                    ...this.computeCoverageStatus(sources.slice(0, LINES))\n                  ],\n                  symbolsByLine: {\n                    ...prevState.symbolsByLine,\n                    ...symbolsByLine(sources.slice(0, LINES))\n                  }\n                };\n              });\n            }\n          },\n          () => {\n            // TODO\n          }\n        );\n      },\n      () => {\n        // TODO\n      }\n    );\n  };\n\n  loadDuplications = (line: T.SourceLine) => {\n    getDuplications({\n      key: this.props.component,\n      ...getBranchLikeQuery(this.props.branchLike)\n    }).then(\n      r => {\n        if (this.mounted) {\n          this.setState(state => ({\n            displayDuplications: true,\n            duplications: r.duplications,\n            duplicationsByLine: duplicationsByLine(r.duplications),\n            duplicatedFiles: r.files,\n            linePopup:\n              r.duplications.length === 1\n                ? { index: 0, line: line.line, name: 'duplications' }\n                : state.linePopup\n          }));\n        }\n      },\n      () => {\n        // TODO\n      }\n    );\n  };\n\n  handleLinePopupToggle = ({ index, line, name, open }: T.LinePopup) => {\n    this.setState((state: State) => {\n      const samePopup =\n        state.linePopup !== undefined &&\n        state.linePopup.name === name &&\n        state.linePopup.line === line &&\n        state.linePopup.index === index;\n      if (open !== false && !samePopup) {\n        return { linePopup: { index, line, name } };\n      } else if (open !== true && samePopup) {\n        return { linePopup: undefined };\n      }\n      return null;\n    });\n  };\n\n  closeLinePopup = () => {\n    this.setState({ linePopup: undefined });\n  };\n\n  handleIssuePopupToggle = (issue: string, popupName: string, open?: boolean) => {\n    this.setState((state: State) => {\n      const samePopup =\n        state.issuePopup && state.issuePopup.name === popupName && state.issuePopup.issue === issue;\n      if (open !== false && !samePopup) {\n        return { issuePopup: { issue, name: popupName } };\n      } else if (open !== true && samePopup) {\n        return { issuePopup: undefined };\n      }\n      return null;\n    });\n  };\n\n  handleSymbolClick = (symbols: string[]) => {\n    this.setState(state => {\n      const shouldDisable = intersection(state.highlightedSymbols, symbols).length > 0;\n      const highlightedSymbols = shouldDisable ? [] : symbols;\n      return { highlightedSymbols };\n    });\n  };\n\n  handleIssueSelect = (issue: string) => {\n    if (this.props.onIssueSelect) {\n      this.props.onIssueSelect(issue);\n    } else {\n      this.setState({ selectedIssue: issue });\n    }\n  };\n\n  handleIssueUnselect = () => {\n    if (this.props.onIssueUnselect) {\n      this.props.onIssueUnselect();\n    } else {\n      this.setState({ selectedIssue: undefined });\n    }\n  };\n\n  handleOpenIssues = (line: T.SourceLine) => {\n    this.setState(state => ({\n      openIssuesByLine: { ...state.openIssuesByLine, [line.line]: true }\n    }));\n  };\n\n  handleCloseIssues = (line: T.SourceLine) => {\n    this.setState(state => ({\n      openIssuesByLine: { ...state.openIssuesByLine, [line.line]: false }\n    }));\n  };\n\n  handleIssueChange = (issue: T.Issue) => {\n    this.setState(({ issues = [] }) => {\n      const newIssues = issues.map(candidate => (candidate.key === issue.key ? issue : candidate));\n      return { issues: newIssues, issuesByLine: issuesByLine(newIssues) };\n    });\n    if (this.props.onIssueChange) {\n      this.props.onIssueChange(issue);\n    }\n  };\n\n  renderDuplicationPopup = (index: number, line: number) => {\n    const { component, duplicatedFiles, duplications } = this.state;\n\n    if (!component || !duplicatedFiles) {\n      return null;\n    }\n\n    const blocks = getDuplicationBlocksForIndex(duplications, index);\n\n    return (\n      <WorkspaceContext.Consumer>\n        {({ openComponent }) => (\n          <DuplicationPopup\n            blocks={filterDuplicationBlocksByLine(blocks, line)}\n            branchLike={this.props.branchLike}\n            duplicatedFiles={duplicatedFiles}\n            inRemovedComponent={isDuplicationBlockInRemovedComponent(blocks)}\n            onClose={this.closeLinePopup}\n            openComponent={openComponent}\n            sourceViewerFile={component}\n          />\n        )}\n      </WorkspaceContext.Consumer>\n    );\n  };\n\n  renderCode(sources: T.SourceLine[]) {\n    const hasSourcesBefore = sources.length > 0 && sources[0].line > 1;\n    return (\n      <SourceViewerCode\n        branchLike={this.props.branchLike}\n        componentKey={this.props.component}\n        displayAllIssues={this.props.displayAllIssues}\n        displayLocationMarkers={this.props.displayLocationMarkers}\n        duplications={this.state.duplications}\n        duplicationsByLine={this.state.duplicationsByLine}\n        hasSourcesAfter={this.state.hasSourcesAfter}\n        hasSourcesBefore={hasSourcesBefore}\n        highlightedLine={this.props.highlightedLine}\n        highlightedLocationMessage={this.props.highlightedLocationMessage}\n        highlightedLocations={this.props.highlightedLocations}\n        highlightedSymbols={this.state.highlightedSymbols}\n        issueLocationsByLine={this.state.issueLocationsByLine}\n        issuePopup={this.state.issuePopup}\n        issues={this.state.issues}\n        issuesByLine={this.state.issuesByLine}\n        linePopup={this.state.linePopup}\n        loadDuplications={this.loadDuplications}\n        loadSourcesAfter={this.loadSourcesAfter}\n        loadSourcesBefore={this.loadSourcesBefore}\n        loadingSourcesAfter={this.state.loadingSourcesAfter}\n        loadingSourcesBefore={this.state.loadingSourcesBefore}\n        onIssueChange={this.handleIssueChange}\n        onIssuePopupToggle={this.handleIssuePopupToggle}\n        onIssueSelect={this.handleIssueSelect}\n        onIssueUnselect={this.handleIssueUnselect}\n        onIssuesClose={this.handleCloseIssues}\n        onIssuesOpen={this.handleOpenIssues}\n        onLinePopupToggle={this.handleLinePopupToggle}\n        onLocationSelect={this.props.onLocationSelect}\n        onSymbolClick={this.handleSymbolClick}\n        openIssuesByLine={this.state.openIssuesByLine}\n        renderDuplicationPopup={this.renderDuplicationPopup}\n        scroll={this.props.scroll}\n        selectedIssue={this.state.selectedIssue}\n        sources={sources}\n        symbolsByLine={this.state.symbolsByLine}\n      />\n    );\n  }\n\n  renderHeader(branchLike: T.BranchLike | undefined, sourceViewerFile: T.SourceViewerFile) {\n    return this.props.slimHeader ? (\n      <SourceViewerHeaderSlim branchLike={branchLike} sourceViewerFile={sourceViewerFile} />\n    ) : (\n      <WorkspaceContext.Consumer>\n        {({ openComponent }) => (\n          <SourceViewerHeader\n            branchLike={this.props.branchLike}\n            issues={this.state.issues}\n            openComponent={openComponent}\n            showMeasures={this.props.showMeasures}\n            sourceViewerFile={sourceViewerFile}\n          />\n        )}\n      </WorkspaceContext.Consumer>\n    );\n  }\n\n  render() {\n    const { component, loading, sources, notAccessible, sourceRemoved } = this.state;\n\n    if (loading) {\n      return null;\n    }\n\n    if (this.state.notExist) {\n      return (\n        <Alert className=\"spacer-top\" variant=\"warning\">\n          {translate('component_viewer.no_component')}\n        </Alert>\n      );\n    }\n\n    if (notAccessible) {\n      return (\n        <Alert className=\"spacer-top\" variant=\"warning\">\n          {translate('code_viewer.no_source_code_displayed_due_to_security')}\n        </Alert>\n      );\n    }\n\n    if (!component) {\n      return null;\n    }\n\n    const className = classNames('source-viewer', {\n      'source-duplications-expanded': this.state.displayDuplications\n    });\n\n    return (\n      <SourceViewerContext.Provider value={{ branchLike: this.props.branchLike, file: component }}>\n        <div className={className} ref={node => (this.node = node)}>\n          {this.renderHeader(this.props.branchLike, component)}\n          {sourceRemoved && (\n            <Alert className=\"spacer-top\" variant=\"warning\">\n              {translate('code_viewer.no_source_code_displayed_due_to_source_removed')}\n            </Alert>\n          )}\n          {!sourceRemoved && sources !== undefined && this.renderCode(sources)}\n        </div>\n      </SourceViewerContext.Provider>\n    );\n  }\n}\n\nfunction defaultLoadComponent(component: string, branchLike: T.BranchLike | undefined) {\n  return Promise.all([\n    getComponentForSourceViewer({ component, ...getBranchLikeQuery(branchLike) }),\n    getComponentData({ component, ...getBranchLikeQuery(branchLike) })\n  ]).then(([sourceViewerComponent, { component }]) => ({\n    ...sourceViewerComponent,\n    leakPeriodDate: component.leakPeriodDate\n  }));\n}\n\nfunction defaultLoadSources(\n  key: string,\n  from: number | undefined,\n  to: number | undefined,\n  branchLike: T.BranchLike | undefined\n) {\n  return getSources({ key, from, to, ...getBranchLikeQuery(branchLike) });\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationIndex.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationIndex.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationIndex.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".location-index{position:relative;display:inline-block;vertical-align:top;line-height:16px;padding-left:6px;padding-right:6px;border-radius:2px;background-color:#d18582;color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;transition:background-color .3s ease;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.location-index.selected{background-color:#a4030f}.location-index.muted{background-color:#cdcdcd}.location-index.is-leading:first-child{margin-left:0}.location-index.is-leading:not(:first-child){margin-left:-22px}.location-index[tabindex]{cursor:pointer}.location-index[tabindex]:hover,a:hover>.location-index{background-color:#a4030f}.location-index[tabindex]:focus{outline:none}.source-line-code-inner .location-index{line-height:16px;margin:1px 4px}.source-line-code-inner .location-index+.location-index{margin-left:0}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport './LocationMessage.css';\n\ninterface Props {\n  children?: React.ReactNode;\n  selected: boolean;\n}\n\nexport default function LocationMessage(props: Props) {\n  return (\n    <div className={classNames('location-message', { selected: props.selected })}>\n      {props.children}\n    </div>\n  );\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationMessage.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationMessage.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationMessage.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".location-message{display:inline-block;vertical-align:top;line-height:16px;padding:0 6px;border-radius:2px;background-color:#9e9e9e;color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;text-overflow:ellipsis;overflow:hidden;transition:background-color .3s ease}.location-message.selected{background-color:#475760}.location-index+.location-message{margin-left:4px}.location-index>.location-message{display:none;position:absolute;bottom:calc(100% + 4px);left:0}.location-index:hover>.location-message{display:block}.location-index>.location-message:after{position:absolute;bottom:-5px;left:4px;width:0;height:0;border-top:5px solid #475760;border-left:5px solid transparent;border-right:5px solid transparent;content:\\\"\\\"}.source-line-code .location-message{padding-top:2px;padding-bottom:2px}\", \"\"]);\n\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Issue.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Issue.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Issue.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".issue{position:relative;padding-top:8px;padding-bottom:8px;background-color:#f2dede;transition:all .3s ease,border 0s ease}.issue.hotspot{background-color:#eeeff4}.issue.selected{box-shadow:none;outline:none;border:2px solid #4b9fd5!important}.issue+.issue,.issue-container+.issue-container{margin-top:5px}.issue.selected+.issue{border-top-color:transparent}.issue-row{display:flex;margin-bottom:5px}.issue-row-meta{flex-grow:0;padding-right:5px;white-space:nowrap}.issue-message{flex-grow:1;padding-left:8px;padding-right:8px;line-height:18px;font-size:13px;font-weight:600;text-overflow:ellipsis}.issue-actions{justify-content:space-between;flex-wrap:wrap;padding-left:8px}.issue-actions,.issue-meta-list{display:flex;align-items:center}.issue-meta{line-height:16px;font-size:12px}.issue-meta+.issue-meta{margin-left:8px}.issue-meta-label{display:inline-block;vertical-align:top;max-width:180px;line-height:16px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.issue-changelog{width:450px;max-height:320px;overflow:auto;white-space:normal}.issue-comments{margin-top:5px;padding-left:8px;font-size:12px}.issue-comment{display:flex}.issue-comment+.issue-comment{margin-top:4px}.issue-comment-author{max-width:130px;font-weight:600;overflow:hidden;text-overflow:ellipsis}.issue-comment-age,.issue-comment-author{flex-shrink:0;line-height:18px;color:#777;white-space:nowrap}.issue-comment-text{flex:1;min-width:0;margin-left:5px;margin-right:5px;line-height:18px;line-height:1.5;overflow:hidden;outline:none;word-break:break-all}.issue-comment-actions{flex-shrink:0;padding-left:5px;line-height:18px;white-space:nowrap}.issue-comment-bubble-popup{width:440px;font-size:12px}.issue-comment-form-text textarea{width:100%;max-width:100%}.issue-comment-form-footer{margin-top:5px;line-height:22px}.issue-comment-form-footer:after,.issue-comment-form-footer:before{display:table;content:\\\"\\\";line-height:0}.issue-comment-form-footer:after{clear:both}.issue-comment-form-actions{float:right}.issue-comment-form-tips{float:left}.issue-with-checkbox{padding-left:24px}.issue-with-checkbox .issue-checkbox-container{display:flex;justify-content:center;align-items:center}.issue-checkbox-container{display:none;position:absolute;width:28px;top:0;bottom:0;left:0;border:none}.issue-checkbox-container:hover{background-color:rgba(0,0,0,.05)}.issue:not(.selected) .location-index{background-color:#cdcdcd}.issue .menu:not(.issues-similar-issues-menu):not(.issue-changelog){max-height:120px;overflow:auto}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { IssueResponse } from '../../api/issues';\nimport { parseIssueFromResponse } from '../../helpers/issues';\n\nexport const updateIssue = (\n  onChange: (issue: T.Issue) => void,\n  resultPromise: Promise<IssueResponse>,\n  oldIssue?: T.Issue,\n  newIssue?: T.Issue\n) => {\n  const optimisticUpdate = oldIssue !== undefined && newIssue !== undefined;\n  if (optimisticUpdate) {\n    onChange(newIssue!);\n  }\n\n  resultPromise.then(\n    response => {\n      if (!optimisticUpdate) {\n        const issue = parseIssueFromResponse(\n          response.issue,\n          response.components,\n          response.users,\n          response.rules\n        );\n        onChange(issue);\n      }\n    },\n    () => {\n      if (optimisticUpdate) {\n        onChange(oldIssue!);\n      }\n    }\n  );\n};\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\n\ninterface Props {\n  active?: string;\n  item: string;\n  onHover?: (item: string) => void;\n  onSelect?: (item: string) => void;\n  title?: string;\n}\n\nexport default class SelectListItem extends React.PureComponent<Props> {\n  handleSelect = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    if (this.props.onSelect) {\n      this.props.onSelect(this.props.item);\n    }\n  };\n\n  handleHover = () => {\n    if (this.props.onHover) {\n      this.props.onHover(this.props.item);\n    }\n  };\n\n  renderLink() {\n    const children = this.props.children || this.props.item;\n    return (\n      <li>\n        <a\n          className={classNames({ active: this.props.active === this.props.item })}\n          href=\"#\"\n          onClick={this.handleSelect}\n          onFocus={this.handleHover}\n          onMouseOver={this.handleHover}>\n          {children}\n        </a>\n      </li>\n    );\n  }\n\n  render() {\n    return (\n      <Tooltip overlay={this.props.title || undefined} placement=\"right\">\n        {this.renderLink()}\n      </Tooltip>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as key from 'keymaster';\nimport { uniqueId } from 'lodash';\nimport * as React from 'react';\nimport SelectListItem from './SelectListItem';\n\ninterface Props {\n  className?: string;\n  items: string[];\n  currentItem: string;\n  onSelect: (item: string) => void;\n}\n\ninterface State {\n  active: string;\n}\n\nexport default class SelectList extends React.PureComponent<Props, State> {\n  currentKeyScope?: string;\n  previousFilter?: (event: any) => void;\n  previousKeyScope?: string;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      active: props.currentItem\n    };\n  }\n\n  componentDidMount() {\n    this.attachShortcuts();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (\n      prevProps.currentItem !== this.props.currentItem &&\n      !this.props.items.includes(this.state.active)\n    ) {\n      this.setState({ active: this.props.currentItem });\n    }\n  }\n\n  componentWillUnmount() {\n    this.detachShortcuts();\n  }\n\n  attachShortcuts = () => {\n    this.previousKeyScope = key.getScope();\n    this.previousFilter = key.filter;\n    this.currentKeyScope = uniqueId('key-scope');\n    key.setScope(this.currentKeyScope);\n\n    // sometimes there is a *focused* search field next to the SelectList component\n    // we need to allow shortcuts in this case, but only for the used keys\n    (key as any).filter = (event: KeyboardEvent & { target: HTMLElement }) => {\n      const { tagName } = event.target || event.srcElement;\n      const isInput = tagName === 'INPUT' || tagName === 'SELECT' || tagName === 'TEXTAREA';\n      return [13, 38, 40].includes(event.keyCode) || !isInput;\n    };\n\n    key('down', this.currentKeyScope, () => {\n      this.setState(this.selectNextElement);\n      return false;\n    });\n\n    key('up', this.currentKeyScope, () => {\n      this.setState(this.selectPreviousElement);\n      return false;\n    });\n\n    key('return', this.currentKeyScope, () => {\n      if (this.state.active != null) {\n        this.handleSelect(this.state.active);\n      }\n      return false;\n    });\n  };\n\n  detachShortcuts = () => {\n    if (this.previousKeyScope) {\n      key.setScope(this.previousKeyScope);\n    }\n    if (this.currentKeyScope) {\n      key.deleteScope(this.currentKeyScope);\n    }\n    (key as any).filter = this.previousFilter;\n  };\n\n  handleSelect = (item: string) => {\n    this.props.onSelect(item);\n  };\n\n  handleHover = (item: string) => {\n    this.setState({ active: item });\n  };\n\n  selectNextElement = (state: State, props: Props) => {\n    const idx = props.items.indexOf(state.active);\n    if (idx < 0) {\n      return { active: props.items[0] };\n    }\n    return { active: props.items[(idx + 1) % props.items.length] };\n  };\n\n  selectPreviousElement = (state: State, props: Props) => {\n    const idx = props.items.indexOf(state.active);\n    if (idx <= 0) {\n      return { active: props.items[props.items.length - 1] };\n    }\n    return { active: props.items[idx - 1] };\n  };\n\n  renderChild = (child: any) => {\n    if (child == null) {\n      return null;\n    }\n    // do not pass extra props to children like `<li className=\"divider\" />`\n    if (child.type !== SelectListItem) {\n      return child;\n    }\n    return React.cloneElement(child, {\n      active: this.state.active,\n      onHover: this.handleHover,\n      onSelect: this.handleSelect\n    });\n  };\n\n  render() {\n    const { children } = this.props;\n    const hasChildren = React.Children.count(children) > 0;\n    return (\n      <ul className={classNames('menu', this.props.className)}>\n        {hasChildren && React.Children.map(children, this.renderChild)}\n        {!hasChildren &&\n          this.props.items.map(item => (\n            <SelectListItem\n              active={this.state.active}\n              item={item}\n              key={item}\n              onHover={this.handleHover}\n              onSelect={this.handleSelect}\n            />\n          ))}\n      </ul>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { map } from 'lodash';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { searchMembers } from '../../../api/organizations';\nimport { searchUsers } from '../../../api/users';\nimport { isSonarCloud } from '../../../helpers/system';\nimport { isLoggedIn, isUserActive } from '../../../helpers/users';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\nimport { withCurrentUser } from '../../hoc/withCurrentUser';\nimport Avatar from '../../ui/Avatar';\n\ninterface Props {\n  currentUser: T.CurrentUser;\n  issue: Pick<T.Issue, 'projectOrganization'>;\n  onSelect: (login: string) => void;\n}\n\ninterface State {\n  currentUser: string;\n  query: string;\n  users: T.UserActive[];\n}\n\nconst LIST_SIZE = 10;\n\nexport class SetAssigneePopup extends React.PureComponent<Props, State> {\n  defaultUsersArray: T.UserActive[];\n\n  constructor(props: Props) {\n    super(props);\n    this.defaultUsersArray = [{ login: '', name: translate('unassigned') }];\n\n    if (isLoggedIn(props.currentUser)) {\n      this.defaultUsersArray = [props.currentUser, ...this.defaultUsersArray];\n    }\n\n    this.state = {\n      query: '',\n      users: this.defaultUsersArray,\n      currentUser: this.defaultUsersArray.length > 0 ? this.defaultUsersArray[0].login : ''\n    };\n  }\n\n  searchMembers = (query: string) => {\n    searchMembers({\n      organization: this.props.issue.projectOrganization,\n      q: query,\n      ps: LIST_SIZE\n    }).then(this.handleSearchResult, () => {});\n  };\n\n  searchUsers = (query: string) => {\n    searchUsers({ q: query, ps: LIST_SIZE }).then(this.handleSearchResult, () => {});\n  };\n\n  handleSearchResult = ({ users }: { users: T.UserBase[] }) => {\n    const activeUsers = users.filter(isUserActive);\n    this.setState({\n      users: activeUsers,\n      currentUser: activeUsers.length > 0 ? activeUsers[0].login : ''\n    });\n  };\n\n  handleSearchChange = (query: string) => {\n    if (query.length === 0) {\n      this.setState({\n        query,\n        users: this.defaultUsersArray,\n        currentUser: this.defaultUsersArray[0].login\n      });\n    } else {\n      this.setState({ query });\n      if (isSonarCloud()) {\n        this.searchMembers(query);\n      } else {\n        this.searchUsers(query);\n      }\n    }\n  };\n\n  render() {\n    return (\n      <DropdownOverlay noPadding={true}>\n        <div className=\"multi-select\">\n          <div className=\"menu-search\">\n            <SearchBox\n              autoFocus={true}\n              className=\"little-spacer-top\"\n              minLength={2}\n              onChange={this.handleSearchChange}\n              placeholder={translate('search.search_for_users')}\n              value={this.state.query}\n            />\n          </div>\n          <SelectList\n            currentItem={this.state.currentUser}\n            items={map(this.state.users, 'login')}\n            onSelect={this.props.onSelect}>\n            {this.state.users.map(user => (\n              <SelectListItem item={user.login} key={user.login}>\n                {!!user.login && (\n                  <Avatar className=\"spacer-right\" hash={user.avatar} name={user.name} size={16} />\n                )}\n                <span className=\"text-middle\" style={{ marginLeft: user.login ? 24 : undefined }}>\n                  {user.name}\n                </span>\n              </SelectListItem>\n            ))}\n          </SelectList>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n\nexport default withCurrentUser(SetAssigneePopup);\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport Avatar from '../../ui/Avatar';\nimport SetAssigneePopup from '../popups/SetAssigneePopup';\n\ninterface Props {\n  isOpen: boolean;\n  issue: Pick<\n    T.Issue,\n    'assignee' | 'assigneeActive' | 'assigneeAvatar' | 'assigneeName' | 'projectOrganization'\n  >;\n  canAssign: boolean;\n  onAssign: (login: string) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueAssign extends React.PureComponent<Props> {\n  toggleAssign = (open?: boolean) => {\n    this.props.togglePopup('assign', open);\n  };\n\n  handleClose = () => {\n    this.toggleAssign(false);\n  };\n\n  renderAssignee() {\n    const { issue } = this.props;\n    const assigneeName = issue.assigneeName || issue.assignee;\n\n    if (assigneeName) {\n      return (\n        <>\n          <span className=\"text-top\">\n            <Avatar\n              className=\"little-spacer-right\"\n              hash={issue.assigneeAvatar}\n              name={issue.assigneeName || issue.assignee}\n              size={16}\n            />\n          </span>\n          <span className=\"issue-meta-label\">\n            {issue.assigneeActive === false\n              ? translateWithParameters('user.x_deleted', assigneeName)\n              : assigneeName}\n          </span>\n        </>\n      );\n    }\n\n    return <span className=\"issue-meta-label\">{translate('unassigned')}</span>;\n  }\n\n  render() {\n    if (this.props.canAssign) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            closeOnEscape={true}\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canAssign}\n            overlay={<SetAssigneePopup issue={this.props.issue} onSelect={this.props.onAssign} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-assign\"\n              onClick={this.toggleAssign}>\n              {this.renderAssignee()}\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return this.renderAssignee();\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button, ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport MarkdownTips from '../../common/MarkdownTips';\n\ninterface Props {\n  comment?: Pick<T.IssueComment, 'markdown'>;\n  onComment: (text: string) => void;\n  toggleComment: (visible: boolean) => void;\n  placeholder: string;\n  placement?: PopupPlacement;\n  autoTriggered?: boolean;\n}\n\ninterface State {\n  textComment: string;\n}\n\nexport default class CommentPopup extends React.PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      textComment: props.comment ? props.comment.markdown : ''\n    };\n  }\n\n  handleCommentChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    this.setState({ textComment: event.target.value });\n  };\n\n  handleCommentClick = () => {\n    if (this.state.textComment.trim().length > 0) {\n      this.props.onComment(this.state.textComment);\n    }\n  };\n\n  handleCancelClick = () => {\n    this.props.toggleComment(false);\n  };\n\n  handleKeyboard = (event: React.KeyboardEvent) => {\n    if (event.keyCode === 13 && (event.metaKey || event.ctrlKey)) {\n      // Ctrl + Enter\n      this.handleCommentClick();\n    } else if ([37, 38, 39, 40].includes(event.keyCode)) {\n      // Arrow keys\n      event.stopPropagation();\n    }\n  };\n\n  render() {\n    const { comment, autoTriggered } = this.props;\n    return (\n      <DropdownOverlay placement={this.props.placement}>\n        <div className=\"issue-comment-bubble-popup\">\n          <div className=\"issue-comment-form-text\">\n            <textarea\n              autoFocus={true}\n              onChange={this.handleCommentChange}\n              onKeyDown={this.handleKeyboard}\n              placeholder={this.props.placeholder}\n              rows={2}\n              value={this.state.textComment}\n            />\n          </div>\n          <div className=\"issue-comment-form-footer\">\n            <div className=\"issue-comment-form-actions\">\n              <Button\n                className=\"js-issue-comment-submit little-spacer-right\"\n                disabled={this.state.textComment.trim().length < 1}\n                onClick={this.handleCommentClick}>\n                {comment && translate('save')}\n                {!comment && translate('issue.comment.submit')}\n              </Button>\n              <ResetButtonLink className=\"js-issue-comment-cancel\" onClick={this.handleCancelClick}>\n                {autoTriggered ? translate('skip') : translate('cancel')}\n              </ResetButtonLink>\n            </div>\n            <div className=\"issue-comment-form-tips\">\n              <MarkdownTips />\n            </div>\n          </div>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { addIssueComment } from '../../../api/issues';\nimport { updateIssue } from '../actions';\nimport CommentPopup from '../popups/CommentPopup';\n\ninterface Props {\n  commentAutoTriggered?: boolean;\n  commentPlaceholder: string;\n  currentPopup?: string;\n  issueKey: string;\n  onChange: (issue: T.Issue) => void;\n  toggleComment: (open?: boolean, placeholder?: string, autoTriggered?: boolean) => void;\n}\n\nexport default class IssueCommentAction extends React.PureComponent<Props> {\n  addComment = (text: string) => {\n    updateIssue(this.props.onChange, addIssueComment({ issue: this.props.issueKey, text }));\n    this.props.toggleComment(false);\n  };\n\n  handleCommentClick = () => {\n    this.props.toggleComment();\n  };\n\n  handleClose = () => {\n    this.props.toggleComment(false);\n  };\n\n  render() {\n    return (\n      <li className=\"issue-meta dropdown\">\n        <Toggler\n          closeOnClickOutside={false}\n          onRequestClose={this.handleClose}\n          open={this.props.currentPopup === 'comment'}\n          overlay={\n            <CommentPopup\n              autoTriggered={this.props.commentAutoTriggered}\n              onComment={this.addComment}\n              placeholder={this.props.commentPlaceholder}\n              toggleComment={this.props.toggleComment}\n            />\n          }>\n          <ButtonLink className=\"issue-action js-issue-comment\" onClick={this.handleCommentClick}>\n            <span className=\"issue-meta-label\">{translate('issue.comment.formlink')}</span>\n          </ButtonLink>\n        </Toggler>\n      </li>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport SeverityIcon from 'sonar-ui-common/components/icons/SeverityIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\n\ntype Props = {\n  issue: Pick<T.Issue, 'severity'>;\n  onSelect: (severity: string) => void;\n};\n\nconst SEVERITY = ['BLOCKER', 'CRITICAL', 'MAJOR', 'MINOR', 'INFO'];\n\nexport default function SetSeverityPopup({ issue, onSelect }: Props) {\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={issue.severity} items={SEVERITY} onSelect={onSelect}>\n        {SEVERITY.map(severity => (\n          <SelectListItem item={severity} key={severity}>\n            <SeverityIcon className=\"little-spacer-right\" severity={severity} />\n            {translate('severity', severity)}\n          </SelectListItem>\n        ))}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport { IssueResponse, setIssueSeverity } from '../../../api/issues';\nimport SeverityHelper from '../../shared/SeverityHelper';\nimport SetSeverityPopup from '../popups/SetSeverityPopup';\n\ninterface Props {\n  canSetSeverity: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'severity'>;\n  setIssueProperty: (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: T.RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueSeverity extends React.PureComponent<Props> {\n  toggleSetSeverity = (open?: boolean) => {\n    this.props.togglePopup('set-severity', open);\n  };\n\n  setSeverity = (severity: string) => {\n    this.props.setIssueProperty('severity', 'set-severity', setIssueSeverity, severity);\n  };\n\n  handleClose = () => {\n    this.toggleSetSeverity(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    if (this.props.canSetSeverity) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canSetSeverity}\n            overlay={<SetSeverityPopup issue={issue} onSelect={this.setSeverity} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-set-severity\"\n              onClick={this.toggleSetSeverity}>\n              <SeverityHelper className=\"issue-meta-label\" severity={issue.severity} />\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return <SeverityHelper className=\"issue-meta-label\" severity={issue.severity} />;\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { difference, without } from 'lodash';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { searchIssueTags } from '../../../api/issues';\nimport TagsSelector from '../../tags/TagsSelector';\n\ninterface Props {\n  organization: string;\n  selectedTags: string[];\n  setTags: (tags: string[]) => void;\n}\n\ninterface State {\n  searchResult: string[];\n}\n\nconst LIST_SIZE = 10;\n\nexport default class SetIssueTagsPopup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { searchResult: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  onSearch = (query: string) => {\n    return searchIssueTags({\n      q: query,\n      ps: Math.min(this.props.selectedTags.length - 1 + LIST_SIZE, 100),\n      organization: this.props.organization\n    }).then(\n      (tags: string[]) => {\n        if (this.mounted) {\n          this.setState({ searchResult: tags });\n        }\n      },\n      () => {}\n    );\n  };\n\n  onSelect = (tag: string) => {\n    this.props.setTags([...this.props.selectedTags, tag]);\n  };\n\n  onUnselect = (tag: string) => {\n    this.props.setTags(without(this.props.selectedTags, tag));\n  };\n\n  render() {\n    const availableTags = difference(this.state.searchResult, this.props.selectedTags);\n    return (\n      <DropdownOverlay placement={PopupPlacement.BottomRight}>\n        <TagsSelector\n          listSize={LIST_SIZE}\n          onSearch={this.onSearch}\n          onSelect={this.onSelect}\n          onUnselect={this.onUnselect}\n          selectedTags={this.props.selectedTags}\n          tags={availableTags}\n        />\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { setIssueTags } from '../../../api/issues';\nimport TagsList from '../../tags/TagsList';\nimport { updateIssue } from '../actions';\nimport SetIssueTagsPopup from '../popups/SetIssueTagsPopup';\n\ninterface Props {\n  canSetTags: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'key' | 'projectOrganization' | 'tags'>;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueTags extends React.PureComponent<Props> {\n  toggleSetTags = (open?: boolean) => {\n    this.props.togglePopup('edit-tags', open);\n  };\n\n  setTags = (tags: string[]) => {\n    const { issue } = this.props;\n    const newIssue = { ...issue, tags };\n    updateIssue(\n      this.props.onChange,\n      setIssueTags({ issue: issue.key, tags: tags.join(',') }),\n      issue as T.Issue,\n      newIssue as T.Issue\n    );\n  };\n\n  handleClose = () => {\n    this.toggleSetTags(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    const { tags = [] } = issue;\n\n    if (this.props.canSetTags) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen}\n            overlay={\n              <SetIssueTagsPopup\n                organization={issue.projectOrganization}\n                selectedTags={tags}\n                setTags={this.setTags}\n              />\n            }>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-edit-tags\"\n              onClick={this.toggleSetTags}>\n              <TagsList\n                allowUpdate={this.props.canSetTags}\n                tags={\n                  issue.tags && issue.tags.length > 0 ? issue.tags : [translate('issue.no_tag')]\n                }\n              />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <TagsList\n          allowUpdate={this.props.canSetTags}\n          className=\"note\"\n          tags={issue.tags && issue.tags.length > 0 ? issue.tags : [translate('issue.no_tag')]}\n        />\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { hasMessage, translate } from 'sonar-ui-common/helpers/l10n';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\n\nexport interface Props {\n  fromHotspot: boolean;\n  onSelect: (transition: string) => void;\n  transitions: string[];\n  type: T.IssueType;\n}\n\nexport default function SetTransitionPopup({ fromHotspot, onSelect, transitions, type }: Props) {\n  const isManualVulnerability = fromHotspot && type === 'VULNERABILITY';\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={transitions[0]} items={transitions} onSelect={onSelect}>\n        {transitions.map(transition => {\n          const [name, description] = translateTransition(transition, isManualVulnerability);\n          return (\n            <SelectListItem item={transition} key={transition} title={description}>\n              {name}\n            </SelectListItem>\n          );\n        })}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n\nfunction translateTransition(transition: string, isManualVulnerability: boolean) {\n  return isManualVulnerability && hasMessage('vulnerability.transition', transition)\n    ? [\n        translate('vulnerability.transition', transition),\n        translate('vulnerability.transition', transition, 'description')\n      ]\n    : [\n        translate('issue.transition', transition),\n        translate('issue.transition', transition, 'description')\n      ];\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport { setIssueTransition } from '../../../api/issues';\nimport StatusHelper from '../../shared/StatusHelper';\nimport { updateIssue } from '../actions';\nimport SetTransitionPopup from '../popups/SetTransitionPopup';\n\ninterface Props {\n  hasTransitions: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'fromHotspot' | 'key' | 'resolution' | 'status' | 'transitions' | 'type'>;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueTransition extends React.PureComponent<Props> {\n  setTransition = (transition: string) => {\n    updateIssue(\n      this.props.onChange,\n      setIssueTransition({ issue: this.props.issue.key, transition })\n    );\n    this.toggleSetTransition();\n  };\n\n  toggleSetTransition = (open?: boolean) => {\n    this.props.togglePopup('transition', open);\n  };\n\n  handleClose = () => {\n    this.toggleSetTransition(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    if (this.props.hasTransitions) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.hasTransitions}\n            overlay={\n              <SetTransitionPopup\n                fromHotspot={issue.fromHotspot}\n                onSelect={this.setTransition}\n                transitions={issue.transitions}\n                type={issue.type}\n              />\n            }>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-transition\"\n              onClick={this.toggleSetTransition}>\n              <StatusHelper\n                className=\"issue-meta-label\"\n                resolution={issue.resolution}\n                status={issue.status}\n              />\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <StatusHelper\n          className=\"issue-meta-label\"\n          resolution={issue.resolution}\n          status={issue.status}\n        />\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\n\ninterface Props {\n  issue: Pick<T.Issue, 'type'>;\n  onSelect: (type: T.IssueType) => void;\n}\n\nconst TYPES = ['BUG', 'VULNERABILITY', 'CODE_SMELL'];\n\nexport default function SetTypePopup({ issue, onSelect }: Props) {\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={issue.type} items={TYPES} onSelect={onSelect}>\n        {TYPES.map(type => (\n          <SelectListItem item={type} key={type}>\n            <IssueTypeIcon className=\"little-spacer-right\" query={type} />\n            {translate('issue.type', type)}\n          </SelectListItem>\n        ))}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { IssueResponse, setIssueType } from '../../../api/issues';\nimport SetTypePopup from '../popups/SetTypePopup';\n\ninterface Props {\n  canSetType: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'type'>;\n  setIssueProperty: (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: T.RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueType extends React.PureComponent<Props> {\n  toggleSetType = (open?: boolean) => {\n    this.props.togglePopup('set-type', open);\n  };\n\n  setType = (type: string) => {\n    this.props.setIssueProperty('type', 'set-type', setIssueType, type);\n  };\n\n  handleClose = () => {\n    this.toggleSetType(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    if (this.props.canSetType) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canSetType}\n            overlay={<SetTypePopup issue={issue} onSelect={this.setType} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-set-type\"\n              onClick={this.toggleSetType}>\n              <IssueTypeIcon className=\"little-spacer-right\" query={issue.type} />\n              {translate('issue.type', issue.type)}\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <span>\n          <IssueTypeIcon className=\"little-spacer-right\" query={issue.type} />\n          {translate('issue.type', issue.type)}\n        </span>\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { IssueResponse } from '../../../api/issues';\nimport { updateIssue } from '../actions';\nimport IssueAssign from './IssueAssign';\nimport IssueCommentAction from './IssueCommentAction';\nimport IssueSeverity from './IssueSeverity';\nimport IssueTags from './IssueTags';\nimport IssueTransition from './IssueTransition';\nimport IssueType from './IssueType';\n\ninterface Props {\n  issue: T.Issue;\n  currentPopup?: string;\n  onAssign: (login: string) => void;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\ninterface State {\n  commentAutoTriggered: boolean;\n  commentPlaceholder: string;\n}\n\nexport default class IssueActionsBar extends React.PureComponent<Props, State> {\n  state: State = {\n    commentAutoTriggered: false,\n    commentPlaceholder: ''\n  };\n\n  setIssueProperty = (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: T.RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => {\n    const { issue } = this.props;\n    if (issue[property] !== value) {\n      const newIssue = { ...issue, [property]: value };\n      updateIssue(\n        this.props.onChange,\n        apiCall({ issue: issue.key, [property]: value }),\n        issue,\n        newIssue\n      );\n    }\n    this.props.togglePopup(popup, false);\n  };\n\n  toggleComment = (open: boolean | undefined, placeholder = '', autoTriggered = false) => {\n    this.setState({\n      commentPlaceholder: placeholder,\n      commentAutoTriggered: autoTriggered\n    });\n    this.props.togglePopup('comment', open);\n  };\n\n  handleTransition = (issue: T.Issue) => {\n    this.props.onChange(issue);\n    if (\n      issue.resolution === 'FALSE-POSITIVE' ||\n      (issue.resolution === 'WONTFIX' && issue.type !== 'SECURITY_HOTSPOT')\n    ) {\n      this.toggleComment(true, translate('issue.comment.explain_why'), true);\n    }\n  };\n\n  render() {\n    const { issue } = this.props;\n    const canAssign = issue.actions.includes('assign');\n    const canComment = issue.actions.includes('comment');\n    const canSetSeverity = issue.actions.includes('set_severity');\n    const canSetType = issue.actions.includes('set_type');\n    const canSetTags = issue.actions.includes('set_tags');\n    const hasTransitions = issue.transitions && issue.transitions.length > 0;\n    const isSecurityHotspot = issue.type === 'SECURITY_HOTSPOT';\n\n    return (\n      <div className=\"issue-actions\">\n        <ul className=\"issue-meta-list\">\n          <li className=\"issue-meta\">\n            <IssueType\n              canSetType={canSetType}\n              isOpen={this.props.currentPopup === 'set-type' && canSetType}\n              issue={issue}\n              setIssueProperty={this.setIssueProperty}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n          {!isSecurityHotspot && (\n            <li className=\"issue-meta\">\n              <IssueSeverity\n                canSetSeverity={canSetSeverity}\n                isOpen={this.props.currentPopup === 'set-severity' && canSetSeverity}\n                issue={issue}\n                setIssueProperty={this.setIssueProperty}\n                togglePopup={this.props.togglePopup}\n              />\n            </li>\n          )}\n          <li className=\"issue-meta\">\n            <IssueTransition\n              hasTransitions={hasTransitions}\n              isOpen={this.props.currentPopup === 'transition' && hasTransitions}\n              issue={issue}\n              onChange={this.handleTransition}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n          <li className=\"issue-meta\">\n            <IssueAssign\n              canAssign={canAssign}\n              isOpen={this.props.currentPopup === 'assign' && canAssign}\n              issue={issue}\n              onAssign={this.props.onAssign}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n          {!isSecurityHotspot && issue.effort && (\n            <li className=\"issue-meta\">\n              <span className=\"issue-meta-label\">\n                {translateWithParameters('issue.x_effort', issue.effort)}\n              </span>\n            </li>\n          )}\n          {canComment && (\n            <IssueCommentAction\n              commentAutoTriggered={this.state.commentAutoTriggered}\n              commentPlaceholder={this.state.commentPlaceholder}\n              currentPopup={this.props.currentPopup}\n              issueKey={issue.key}\n              onChange={this.props.onChange}\n              toggleComment={this.toggleComment}\n            />\n          )}\n        </ul>\n        <ul className=\"list-inline\">\n          <li className=\"issue-meta js-issue-tags\">\n            <IssueTags\n              canSetTags={canSetTags}\n              isOpen={this.props.currentPopup === 'edit-tags' && canSetTags}\n              issue={issue}\n              onChange={this.props.onChange}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n        </ul>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  onDelete: () => void;\n}\n\nexport default function CommentDeletePopup({ onDelete }: Props) {\n  return (\n    <DropdownOverlay placement={PopupPlacement.BottomRight}>\n      <div className=\"menu is-container\">\n        <div className=\"spacer-bottom\">{translate('issue.comment.delete_confirm_message')}</div>\n        <Button className=\"button-red\" onClick={onDelete}>\n          {translate('delete')}\n        </Button>\n      </div>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sanitize } from 'dompurify';\nimport * as React from 'react';\nimport { DeleteButton, EditButton } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport DateFromNow from '../../intl/DateFromNow';\nimport Avatar from '../../ui/Avatar';\nimport CommentDeletePopup from '../popups/CommentDeletePopup';\nimport CommentPopup from '../popups/CommentPopup';\n\ninterface Props {\n  comment: T.IssueComment;\n  onDelete: (comment: string) => void;\n  onEdit: (comment: string, text: string) => void;\n}\n\ninterface State {\n  openPopup: string;\n}\n\nexport default class IssueCommentLine extends React.PureComponent<Props, State> {\n  state: State = {\n    openPopup: ''\n  };\n\n  handleEdit = (text: string) => {\n    this.props.onEdit(this.props.comment.key, text);\n    this.toggleEditPopup(false);\n  };\n\n  handleDelete = () => {\n    this.props.onDelete(this.props.comment.key);\n    this.toggleDeletePopup(false);\n  };\n\n  togglePopup = (popupName: string, force?: boolean) => {\n    this.setState(prevState => {\n      if (prevState.openPopup !== popupName && force !== false) {\n        return { openPopup: popupName };\n      } else if (prevState.openPopup === popupName && force !== true) {\n        return { openPopup: '' };\n      }\n      return prevState;\n    });\n  };\n\n  toggleDeletePopup = (force?: boolean) => {\n    this.togglePopup('delete', force);\n  };\n\n  toggleEditPopup = (force?: boolean) => {\n    this.togglePopup('edit', force);\n  };\n\n  closePopups = () => {\n    this.setState({ openPopup: '' });\n  };\n\n  render() {\n    const { comment } = this.props;\n    const author = comment.authorName || comment.author;\n    const displayName =\n      comment.authorActive === false && author\n        ? translateWithParameters('user.x_deleted', author)\n        : author;\n    return (\n      <div className=\"issue-comment\">\n        <div className=\"issue-comment-author\" title={displayName}>\n          <Avatar\n            className=\"little-spacer-right\"\n            hash={comment.authorAvatar}\n            name={author}\n            size={16}\n          />\n          {displayName}\n        </div>\n        <div\n          className=\"issue-comment-text markdown\"\n          dangerouslySetInnerHTML={{ __html: sanitize(comment.htmlText) }}\n        />\n        <div className=\"issue-comment-age\">\n          <DateFromNow date={comment.createdAt} />\n        </div>\n        <div className=\"issue-comment-actions\">\n          {comment.updatable && (\n            <div className=\"dropdown\">\n              <Toggler\n                closeOnClickOutside={false}\n                onRequestClose={this.closePopups}\n                open={this.state.openPopup === 'edit'}\n                overlay={\n                  <CommentPopup\n                    comment={comment}\n                    onComment={this.handleEdit}\n                    placeholder=\"\"\n                    placement={PopupPlacement.BottomRight}\n                    toggleComment={this.toggleEditPopup}\n                  />\n                }>\n                <EditButton\n                  className=\"js-issue-comment-edit button-small\"\n                  onClick={this.toggleEditPopup}\n                />\n              </Toggler>\n            </div>\n          )}\n          {comment.updatable && (\n            <div className=\"dropdown\">\n              <Toggler\n                onRequestClose={this.closePopups}\n                open={this.state.openPopup === 'delete'}\n                overlay={<CommentDeletePopup onDelete={this.handleDelete} />}>\n                <DeleteButton\n                  className=\"js-issue-comment-delete button-small\"\n                  onClick={this.toggleDeletePopup}\n                />\n              </Toggler>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\n\ninterface Props {\n  diff: T.IssueChangelogDiff;\n}\n\nexport default function IssueChangelogDiff({ diff }: Props) {\n  if (diff.key === 'file') {\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.file_move',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (diff.key === 'from_long_branch') {\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.from_long_branch',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (diff.key === 'from_short_branch') {\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.from_short_branch',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (diff.key === 'line') {\n    return <p>{translateWithParameters('issue.changelog.line_removed_X', diff.oldValue || '')}</p>;\n  }\n\n  let message;\n  if (diff.newValue != null) {\n    let { newValue } = diff;\n    if (diff.key === 'effort') {\n      newValue = formatMeasure(diff.newValue, 'WORK_DUR');\n    }\n    message = translateWithParameters(\n      'issue.changelog.changed_to',\n      translate('issue.changelog.field', diff.key),\n      newValue\n    );\n  } else {\n    message = translateWithParameters(\n      'issue.changelog.removed',\n      translate('issue.changelog.field', diff.key)\n    );\n  }\n\n  if (diff.oldValue != null) {\n    let { oldValue } = diff;\n    if (diff.key === 'effort') {\n      oldValue = formatMeasure(diff.oldValue, 'WORK_DUR');\n    }\n    message += ` (${translateWithParameters('issue.changelog.was', oldValue)})`;\n  }\n  return <p>{message}</p>;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { getIssueChangelog } from '../../../api/issues';\nimport DateTimeFormatter from '../../intl/DateTimeFormatter';\nimport Avatar from '../../ui/Avatar';\nimport IssueChangelogDiff from '../components/IssueChangelogDiff';\n\ninterface Props {\n  issue: Pick<T.Issue, 'author' | 'creationDate' | 'key'>;\n}\n\ninterface State {\n  changelog: T.IssueChangelog[];\n}\n\nexport default class ChangelogPopup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { changelog: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadChangelog();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadChangelog() {\n    getIssueChangelog(this.props.issue.key).then(\n      ({ changelog }) => {\n        if (this.mounted) {\n          this.setState({ changelog });\n        }\n      },\n      () => {}\n    );\n  }\n\n  render() {\n    const { issue } = this.props;\n    const { author } = issue;\n    return (\n      <DropdownOverlay placement={PopupPlacement.BottomRight}>\n        <div className=\"menu is-container issue-changelog\">\n          <table className=\"spaced\">\n            <tbody>\n              <tr>\n                <td className=\"thin text-left text-top nowrap\">\n                  <DateTimeFormatter date={issue.creationDate} />\n                </td>\n                <td className=\"text-left text-top\">\n                  {author ? `${translate('created_by')} ${author}` : translate('created')}\n                </td>\n              </tr>\n\n              {this.state.changelog.map((item, idx) => {\n                const userName = item.userName || item.user;\n\n                return (\n                  <tr key={idx}>\n                    <td className=\"thin text-left text-top nowrap\">\n                      <DateTimeFormatter date={item.creationDate} />\n                    </td>\n                    <td className=\"text-left text-top\">\n                      {userName && (\n                        <p>\n                          <Avatar\n                            className=\"little-spacer-right\"\n                            hash={item.avatar}\n                            name={userName}\n                            size={16}\n                          />\n                          {item.isUserActive\n                            ? userName\n                            : translateWithParameters('user.x_deleted', userName)}\n                        </p>\n                      )}\n                      {item.diffs.map(diff => (\n                        <IssueChangelogDiff diff={diff} key={diff.key} />\n                      ))}\n                    </td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport DateFromNow from '../../intl/DateFromNow';\nimport DateTimeFormatter from '../../intl/DateTimeFormatter';\nimport ChangelogPopup from '../popups/ChangelogPopup';\n\ninterface Props {\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'author' | 'creationDate' | 'key'>;\n  creationDate: string;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueChangelog extends React.PureComponent<Props> {\n  toggleChangelog = (open?: boolean) => {\n    this.props.togglePopup('changelog', open);\n  };\n\n  handleClick = () => {\n    this.toggleChangelog();\n  };\n\n  handleClose = () => {\n    this.toggleChangelog(false);\n  };\n\n  render() {\n    return (\n      <div className=\"dropdown\">\n        <Toggler\n          onRequestClose={this.handleClose}\n          open={this.props.isOpen}\n          overlay={<ChangelogPopup issue={this.props.issue} />}>\n          <Tooltip\n            mouseEnterDelay={0.5}\n            overlay={<DateTimeFormatter date={this.props.creationDate} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-show-changelog\"\n              onClick={this.handleClick}>\n              <span className=\"issue-meta-label\">\n                <DateFromNow date={this.props.creationDate} />\n              </span>\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Tooltip>\n        </Toggler>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { WorkspaceContextShape } from '../../workspace/context';\n\ninterface Props {\n  engine?: string;\n  manualVulnerability: boolean;\n  message: string;\n  openRule: WorkspaceContextShape['openRule'];\n  organization: string;\n  rule: string;\n}\n\nexport default class IssueMessage extends React.PureComponent<Props> {\n  handleClick = () => {\n    this.props.openRule({\n      key: this.props.rule,\n      organization: this.props.organization\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"issue-message\">\n        <span className=\"little-spacer-right\">{this.props.message}</span>\n        <Button\n          aria-label={translate('issue.rule_details')}\n          className=\"button button-grey button-tiny spacer-right text-top\"\n          onClick={this.handleClick}>\n          {translate('issue.see_rule')}\n        </Button>\n        {this.props.engine && (\n          <Tooltip\n            overlay={translateWithParameters('issue.from_external_rule_engine', this.props.engine)}>\n            <div className=\"badge spacer-right text-top\">{this.props.engine}</div>\n          </Tooltip>\n        )}\n        {this.props.manualVulnerability && (\n          <Tooltip overlay={translate('issue.manual_vulnerability.description')}>\n            <div className=\"badge spacer-right text-top\">\n              {translate('issue.manual_vulnerability')}\n            </div>\n          </Tooltip>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { fileFromPath, limitComponentName } from 'sonar-ui-common/helpers/path';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\nimport SeverityHelper from '../../shared/SeverityHelper';\nimport StatusHelper from '../../shared/StatusHelper';\nimport Avatar from '../../ui/Avatar';\n\ninterface Props {\n  issue: T.Issue;\n  onFilter: (property: string, issue: T.Issue) => void;\n}\n\nexport default class SimilarIssuesPopup extends React.PureComponent<Props> {\n  handleSelect = (property: string) => {\n    this.props.onFilter(property, this.props.issue);\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    const items = [\n      'type',\n      'severity',\n      'status',\n      'resolution',\n      'assignee',\n      'rule',\n      ...(issue.tags || []).map(tag => `tag###${tag}`),\n      'project',\n      issue.subProject ? 'module' : undefined,\n      'file'\n    ].filter(item => item) as string[];\n\n    const assignee = issue.assigneeName || issue.assignee;\n\n    return (\n      <DropdownOverlay noPadding={true}>\n        <header className=\"menu-search\">\n          <h6>{translate('issue.filter_similar_issues')}</h6>\n        </header>\n\n        <SelectList\n          className=\"issues-similar-issues-menu\"\n          currentItem={items[0]}\n          items={items}\n          onSelect={this.handleSelect}>\n          <SelectListItem item=\"type\">\n            <IssueTypeIcon className=\"little-spacer-right\" query={issue.type} />\n            {translate('issue.type', issue.type)}\n          </SelectListItem>\n\n          <SelectListItem item=\"severity\">\n            <SeverityHelper severity={issue.severity} />\n          </SelectListItem>\n\n          <SelectListItem item=\"status\">\n            <StatusHelper resolution={undefined} status={issue.status} />\n          </SelectListItem>\n\n          <SelectListItem item=\"resolution\">\n            {issue.resolution != null\n              ? translate('issue.resolution', issue.resolution)\n              : translate('unresolved')}\n          </SelectListItem>\n\n          <SelectListItem item=\"assignee\">\n            {assignee ? (\n              <span>\n                {translate('assigned_to')}\n                <Avatar\n                  className=\"little-spacer-left little-spacer-right\"\n                  hash={issue.assigneeAvatar}\n                  name={assignee}\n                  size={16}\n                />\n                {issue.assigneeActive === false\n                  ? translateWithParameters('user.x_deleted', assignee)\n                  : assignee}\n              </span>\n            ) : (\n              translate('unassigned')\n            )}\n          </SelectListItem>\n\n          <li className=\"divider\" />\n\n          <SelectListItem item=\"rule\">{limitComponentName(issue.ruleName)}</SelectListItem>\n\n          {issue.tags != null &&\n            issue.tags.map(tag => (\n              <SelectListItem item={`tag###${tag}`} key={`tag###${tag}`}>\n                <TagsIcon className=\"icon-half-transparent little-spacer-right text-middle\" />\n                <span className=\"text-middle\">{tag}</span>\n              </SelectListItem>\n            ))}\n\n          <li className=\"divider\" />\n\n          <SelectListItem item=\"project\">\n            <QualifierIcon className=\"little-spacer-right\" qualifier=\"TRK\" />\n            {issue.projectName}\n          </SelectListItem>\n\n          {issue.subProject != null && (\n            <SelectListItem item=\"module\">\n              <QualifierIcon className=\"little-spacer-right\" qualifier=\"BRC\" />\n              {issue.subProjectName}\n            </SelectListItem>\n          )}\n\n          <SelectListItem item=\"file\">\n            <QualifierIcon className=\"little-spacer-right\" qualifier={issue.componentQualifier} />\n            {fileFromPath(issue.componentLongName)}\n          </SelectListItem>\n        </SelectList>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport FilterIcon from 'sonar-ui-common/components/icons/FilterIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SimilarIssuesPopup from '../popups/SimilarIssuesPopup';\n\ninterface Props {\n  isOpen: boolean;\n  issue: T.Issue;\n  togglePopup: (popup: string, show?: boolean) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n}\n\nexport default class SimilarIssuesFilter extends React.PureComponent<Props> {\n  handleFilter = (property: string, issue: T.Issue) => {\n    this.togglePopup(false);\n    if (this.props.onFilter) {\n      this.props.onFilter(property, issue);\n    }\n  };\n\n  togglePopup = (open?: boolean) => {\n    this.props.togglePopup('similarIssues', open);\n  };\n\n  handleClose = () => {\n    this.togglePopup(false);\n  };\n\n  render() {\n    return (\n      <div className=\"dropdown\">\n        <Toggler\n          onRequestClose={this.handleClose}\n          open={this.props.isOpen}\n          overlay={<SimilarIssuesPopup issue={this.props.issue} onFilter={this.handleFilter} />}>\n          <ButtonLink\n            aria-label={translate('issue.filter_similar_issues')}\n            className=\"issue-action issue-action-with-options js-issue-filter\"\n            onClick={this.togglePopup}\n            title={translate('issue.filter_similar_issues')}>\n            <FilterIcon className=\"icon-half-transparent\" />\n            <DropdownIcon className=\"icon-half-transparent\" />\n          </ButtonLink>\n        </Toggler>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport LinkIcon from 'sonar-ui-common/components/icons/LinkIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getBranchLikeQuery } from '../../../helpers/branches';\nimport { getComponentIssuesUrl } from '../../../helpers/urls';\nimport { WorkspaceContext } from '../../workspace/context';\nimport IssueChangelog from './IssueChangelog';\nimport IssueMessage from './IssueMessage';\nimport SimilarIssuesFilter from './SimilarIssuesFilter';\n\ninterface Props {\n  branchLike?: T.BranchLike;\n  currentPopup?: string;\n  issue: T.Issue;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default function IssueTitleBar(props: Props) {\n  const { issue } = props;\n  const hasSimilarIssuesFilter = props.onFilter != null;\n\n  const issueUrl = getComponentIssuesUrl(issue.project, {\n    ...getBranchLikeQuery(props.branchLike),\n    issues: issue.key,\n    open: issue.key,\n    types: issue.type === 'SECURITY_HOTSPOT' ? issue.type : undefined\n  });\n\n  return (\n    <div className=\"issue-row\">\n      <WorkspaceContext.Consumer>\n        {({ openRule }) => (\n          <IssueMessage\n            engine={issue.externalRuleEngine}\n            manualVulnerability={issue.fromHotspot && issue.type === 'VULNERABILITY'}\n            message={issue.message}\n            openRule={openRule}\n            organization={issue.organization}\n            rule={issue.rule}\n          />\n        )}\n      </WorkspaceContext.Consumer>\n\n      <div className=\"issue-row-meta\">\n        <ul className=\"issue-meta-list\">\n          <li className=\"issue-meta\">\n            <IssueChangelog\n              creationDate={issue.creationDate}\n              isOpen={props.currentPopup === 'changelog'}\n              issue={issue}\n              togglePopup={props.togglePopup}\n            />\n          </li>\n          {issue.textRange != null && (\n            <li className=\"issue-meta\">\n              <span className=\"issue-meta-label\" title={translate('line_number')}>\n                L{issue.textRange.endLine}\n              </span>\n            </li>\n          )}\n          <li className=\"issue-meta\">\n            <Link\n              className=\"js-issue-permalink link-no-underline\"\n              target=\"_blank\"\n              title={translate('permalink')}\n              to={issueUrl}>\n              <LinkIcon />\n            </Link>\n          </li>\n          {hasSimilarIssuesFilter && (\n            <li className=\"issue-meta\">\n              <SimilarIssuesFilter\n                isOpen={props.currentPopup === 'similarIssues'}\n                issue={issue}\n                onFilter={props.onFilter}\n                togglePopup={props.togglePopup}\n              />\n            </li>\n          )}\n        </ul>\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport Checkbox from 'sonar-ui-common/components/controls/Checkbox';\nimport { deleteIssueComment, editIssueComment } from '../../api/issues';\nimport { updateIssue } from './actions';\nimport IssueActionsBar from './components/IssueActionsBar';\nimport IssueCommentLine from './components/IssueCommentLine';\nimport IssueTitleBar from './components/IssueTitleBar';\n\ninterface Props {\n  branchLike?: T.BranchLike;\n  checked?: boolean;\n  currentPopup?: string;\n  issue: T.Issue;\n  onAssign: (login: string) => void;\n  onChange: (issue: T.Issue) => void;\n  onCheck?: (issue: string) => void;\n  onClick: (issueKey: string) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  selected: boolean;\n  togglePopup: (popup: string, show: boolean | void) => void;\n}\n\nexport default class IssueView extends React.PureComponent<Props> {\n  handleCheck = () => {\n    if (this.props.onCheck) {\n      this.props.onCheck(this.props.issue.key);\n    }\n  };\n\n  handleClick = (event: React.MouseEvent<HTMLDivElement>) => {\n    if (!isClickable(event.target as HTMLElement) && this.props.onClick) {\n      event.preventDefault();\n      this.props.onClick(this.props.issue.key);\n    }\n  };\n\n  editComment = (comment: string, text: string) => {\n    updateIssue(this.props.onChange, editIssueComment({ comment, text }));\n  };\n\n  deleteComment = (comment: string) => {\n    updateIssue(this.props.onChange, deleteIssueComment({ comment }));\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    const hasCheckbox = this.props.onCheck != null;\n\n    const issueClass = classNames('issue', {\n      hotspot: issue.type === 'SECURITY_HOTSPOT',\n      'issue-with-checkbox': hasCheckbox,\n      selected: this.props.selected\n    });\n\n    return (\n      <div\n        className={issueClass}\n        data-issue={issue.key}\n        onClick={this.handleClick}\n        role=\"listitem\"\n        tabIndex={0}>\n        <IssueTitleBar\n          branchLike={this.props.branchLike}\n          currentPopup={this.props.currentPopup}\n          issue={issue}\n          onFilter={this.props.onFilter}\n          togglePopup={this.props.togglePopup}\n        />\n        <IssueActionsBar\n          currentPopup={this.props.currentPopup}\n          issue={issue}\n          onAssign={this.props.onAssign}\n          onChange={this.props.onChange}\n          togglePopup={this.props.togglePopup}\n        />\n        {issue.comments && issue.comments.length > 0 && (\n          <div className=\"issue-comments\">\n            {issue.comments.map(comment => (\n              <IssueCommentLine\n                comment={comment}\n                key={comment.key}\n                onDelete={this.deleteComment}\n                onEdit={this.editComment}\n              />\n            ))}\n          </div>\n        )}\n        {hasCheckbox && (\n          <>\n            <Checkbox\n              checked={this.props.checked || false}\n              className=\"issue-checkbox-container\"\n              onCheck={this.handleCheck}\n            />\n          </>\n        )}\n      </div>\n    );\n  }\n}\n\nfunction isClickable(node: HTMLElement | undefined | null): boolean {\n  if (!node) {\n    return false;\n  }\n  const clickableTags = ['A', 'BUTTON', 'INPUT', 'TEXTAREA'];\n  const tagName = (node.tagName || '').toUpperCase();\n  return clickableTags.includes(tagName) || isClickable(node.parentElement);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as key from 'keymaster';\nimport * as React from 'react';\nimport { setIssueAssignee } from '../../api/issues';\nimport { updateIssue } from './actions';\nimport './Issue.css';\nimport IssueView from './IssueView';\n\ninterface Props {\n  branchLike?: T.BranchLike;\n  checked?: boolean;\n  issue: T.Issue;\n  onChange: (issue: T.Issue) => void;\n  onCheck?: (issue: string) => void;\n  onClick: (issueKey: string) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  onPopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  openPopup?: string;\n  selected: boolean;\n}\n\nexport default class Issue extends React.PureComponent<Props> {\n  static defaultProps = {\n    selected: false\n  };\n\n  componentDidMount() {\n    if (this.props.selected) {\n      this.bindShortcuts();\n    }\n  }\n\n  componentWillUpdate(nextProps: Props) {\n    if (!nextProps.selected && this.props.selected) {\n      this.unbindShortcuts();\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (!prevProps.selected && this.props.selected) {\n      this.bindShortcuts();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.selected) {\n      this.unbindShortcuts();\n    }\n  }\n\n  bindShortcuts() {\n    key('f', 'issues', () => {\n      this.togglePopup('transition');\n      return false;\n    });\n    key('a', 'issues', () => {\n      this.togglePopup('assign');\n      return false;\n    });\n    key('m', 'issues', () => {\n      if (this.props.issue.actions.includes('assign')) {\n        this.handleAssignement('_me');\n      }\n      return false;\n    });\n    key('i', 'issues', () => {\n      this.togglePopup('set-severity');\n      return false;\n    });\n    key('c', 'issues', () => {\n      this.togglePopup('comment');\n      return false;\n    });\n    key('t', 'issues', () => {\n      this.togglePopup('edit-tags');\n      return false;\n    });\n    key('space', 'issues', () => {\n      if (this.props.onCheck) {\n        this.props.onCheck(this.props.issue.key);\n        return false;\n      }\n      return undefined;\n    });\n  }\n\n  unbindShortcuts() {\n    key.unbind('f', 'issues');\n    key.unbind('a', 'issues');\n    key.unbind('m', 'issues');\n    key.unbind('i', 'issues');\n    key.unbind('c', 'issues');\n    key.unbind('space', 'issues');\n    key.unbind('t', 'issues');\n  }\n\n  togglePopup = (popupName: string, open?: boolean) => {\n    this.props.onPopupToggle(this.props.issue.key, popupName, open);\n  };\n\n  handleAssignement = (login: string) => {\n    const { issue } = this.props;\n    if (issue.assignee !== login) {\n      updateIssue(this.props.onChange, setIssueAssignee({ issue: issue.key, assignee: login }));\n    }\n    this.togglePopup('assign', false);\n  };\n\n  render() {\n    return (\n      <IssueView\n        branchLike={this.props.branchLike}\n        checked={this.props.checked}\n        currentPopup={this.props.openPopup}\n        issue={this.props.issue}\n        onAssign={this.handleAssignement}\n        onChange={this.props.onChange}\n        onCheck={this.props.onCheck}\n        onClick={this.props.onClick}\n        onFilter={this.props.onFilter}\n        selected={this.props.selected}\n        togglePopup={this.togglePopup}\n      />\n    );\n  }\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".source-viewer{width:100%;min-height:200px;border:1px solid #cdcdcd;box-sizing:border-box;background-color:#fff;overflow:hidden}.source-table{width:100%;border:none;border-collapse:collapse}.source-viewer-header{position:relative;padding:2px 10px 4px;border-bottom:1px solid #e6e6e6;background-color:#f3f3f3}.source-viewer-header:after,.source-viewer-header:before{display:table;content:\\\"\\\";line-height:0}.source-viewer-header:after{clear:both}.source-viewer-header-bar+.source-viewer-header-bar{border-top:1px solid #e6e6e6}.source-viewer-header-component{padding-top:4px}.source-viewer-header-component-name,.source-viewer-header-component-project{font-size:12px}.source-viewer-header-favorite{position:relative;top:-2px;margin-left:4px;border-bottom:none}.source-viewer-header-measures-scope{position:relative;float:left}.source-viewer-header-measure{vertical-align:middle;font-size:13px}.source-viewer-header-measure .rating{font-size:18px}.source-viewer-header-measure-separator{margin:0 24px;height:30px;border-right:1px solid #cdcdcd}.source-viewer-header-measure+.source-viewer-header-measure{margin-left:24px}.source-viewer-header-measure-label{display:block;line-height:12px;color:#777;font-size:12px}.source-viewer-header-measure-value{display:block;margin-top:2px;line-height:18px;color:#444;font-size:16px}.source-viewer-header-actions{display:block;margin-left:24px;padding:8px 4px}.source-viewer-header-actions svg{margin-top:2px}.source-viewer-header-more-actions{position:absolute;z-index:7500;right:0;top:100%;padding:10px;border:1px solid #e6e6e6;border-right:none;background-color:#fff;line-height:1.8}.source-viewer-code{overflow-x:auto}.source-viewer-measures-overlay{padding:20px 10px;background-color:#f3f3f3}.source-viewer-measures-overlay,.source-viewer-measures-overlay .modal-foot{width:1100px;left:50%;right:auto;margin-left:-550px}.source-viewer-measures-component{float:none;margin:0 10px 30px}.source-viewer-measures,.source-viewer-measures-modal{background-color:#f3f3f3}.source-viewer-measures{margin:0 -10px}.source-viewer-measures:after,.source-viewer-measures:before{display:table;content:\\\"\\\";line-height:0}.source-viewer-measures:after{clear:both}.source-viewer-measures+.source-viewer-measures{margin-top:40px}.source-viewer-measures-secondary .source-viewer-measures-card{background-color:hsla(0,0%,100%,.6)}.source-viewer-measures-section{float:left;width:25%;margin:-20px 0}.source-viewer-measures-section-big{width:50%}.source-viewer-measures-section-full{width:100%}.source-viewer-measures-section+.source-viewer-measures-section-full{margin-top:20px}.source-viewer-measures-card{margin:20px 10px;padding:10px;border:1px solid #e6e6e6;background-color:#fff}.source-viewer-measures-card-overflow{overflow:auto}.source-viewer-measures-card-fixed-height{max-height:36vh;overflow-y:scroll}.source-viewer-tests-list{width:100%;font-size:13px}.source-viewer-test-covered-lines,.source-viewer-test-duration,.source-viewer-test-status{width:1px}.source-viewer-test-covered-lines,.source-viewer-test-covered-name,.source-viewer-test-duration,.source-viewer-test-status{vertical-align:middle;padding:3px}.source-viewer-test-name{padding-left:10px;word-break:break-all}.source-viewer-test-covered-lines{text-align:right}.source-viewer-issue-location{max-width:200px;margin-right:10px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.source-viewer-flow-location+.source-viewer-flow-location{z-index:504}.source-line-issue-locations{float:right;margin-right:-10px}.source-line-issue-locations:empty{display:none}.source-viewer-more-code{padding:40px 0;border-bottom:1px solid #e6e6e6;background-color:#f3f3f3;text-align:center}.source-viewer-more-code .spinner{top:-1px}.source-table+.source-viewer-more-code{border-bottom:none;border-top:1px solid #e6e6e6}.source-viewer-bubble-popup{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:13px;text-align:left;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.issue-location.highlighted{border-color:#e1e1f2;background-color:#e1e1f2}.issue-location.selected{border-color:#f4b1b0;background-color:#f4b1b0}.measures+.measures{margin-top:15px;padding-top:15px;border-top:1px solid #e6e6e6}.measures-chart{display:inline-block;vertical-align:middle;width:70px;margin-right:20px;text-align:center}.measures-chart .rating{font-size:32px}.measure{line-height:1.3333333333333}.measure-name{display:block;font-size:13px}.measure-value{color:#236a97;font-size:16px;font-weight:400}.measure-big{display:inline-block;vertical-align:middle}.measure-big .measure-name{margin-top:2px;font-size:15px;font-weight:400}.measure-big .measure-value,.measure-big .rating{font-size:22px}.measure-big+.measure-big{margin-left:20px}.measure-one-line:after,.measure-one-line:before{display:table;content:\\\"\\\";line-height:0}.measure-one-line:after{clear:both}.measure-one-line .measure-name{float:left}.measure-one-line .measure-value{float:right}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedDate } from 'react-intl';\nimport { parseDate } from 'sonar-ui-common/helpers/dates';\n\ninterface Props {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n  long?: boolean;\n}\n\nexport const formatterOption = { year: 'numeric', month: 'short', day: '2-digit' };\n\nexport const longFormatterOption = { year: 'numeric', month: 'long', day: 'numeric' };\n\nexport default function DateFormatter({ children, date, long }: Props) {\n  return (\n    <FormattedDate value={parseDate(date)} {...(long ? longFormatterOption : formatterOption)}>\n      {children}\n    </FormattedDate>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedDate } from 'react-intl';\nimport { parseDate } from 'sonar-ui-common/helpers/dates';\n\ninterface Props {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n}\n\nexport const formatterOption = {\n  year: 'numeric',\n  month: 'long',\n  day: 'numeric',\n  hour: 'numeric',\n  minute: 'numeric'\n};\n\nexport default function DateTimeFormatter({ children, date }: Props) {\n  return (\n    <FormattedDate value={parseDate(date)} {...formatterOption}>\n      {children}\n    </FormattedDate>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedRelative } from 'react-intl';\nimport { parseDate } from 'sonar-ui-common/helpers/dates';\n\ninterface Props {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n}\n\nexport default function DateFromNow({ children, date }: Props) {\n  return <FormattedRelative value={parseDate(date)}>{children}</FormattedRelative>;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SeverityIcon from 'sonar-ui-common/components/icons/SeverityIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  className?: string;\n  severity: string;\n}\n\nexport default function SeverityHelper({ className, severity }: Props) {\n  if (!severity) {\n    return null;\n  }\n  return (\n    <span className={className}>\n      <SeverityIcon className=\"little-spacer-right\" severity={severity} />\n      {translate('severity', severity)}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport Level from 'sonar-ui-common/components/ui/Level';\nimport Rating from 'sonar-ui-common/components/ui/Rating';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { getRatingTooltip } from './utils';\n\ninterface Props {\n  className?: string;\n  decimals?: number | null;\n  metricKey: string;\n  metricType: string;\n  small?: boolean;\n  value: string | undefined;\n}\n\nexport default function Measure({\n  className,\n  decimals,\n  metricKey,\n  metricType,\n  small,\n  value\n}: Props) {\n  if (value === undefined) {\n    return <span></span>;\n  }\n\n  if (metricType === 'LEVEL') {\n    return <Level className={className} level={value} small={small} />;\n  }\n\n  if (metricType !== 'RATING') {\n    const formattedValue = formatMeasure(value, metricType, { decimals });\n    return <span className={className}>{formattedValue != null ? formattedValue : ''}</span>;\n  }\n\n  const tooltip = getRatingTooltip(metricKey, Number(value));\n  const rating = <Rating small={small} value={value} />;\n  if (tooltip) {\n    return (\n      <Tooltip overlay={tooltip}>\n        <span className={className}>{rating}</span>\n      </Tooltip>\n    );\n  }\n  return rating;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getRatingTooltip as nextGetRatingTooltip, isDiffMetric } from '../../helpers/measures';\nimport { getLeakPeriod } from '../../helpers/periods';\n\nconst KNOWN_RATINGS = [\n  'sqale_rating',\n  'maintainability_rating', // Needed to provide the label for \"new_maintainability_rating\"\n  'reliability_rating',\n  'security_rating'\n];\n\nexport function enhanceMeasure(measure: T.Measure, metrics: T.Dict<T.Metric>): T.MeasureEnhanced {\n  return {\n    ...measure,\n    metric: metrics[measure.metric],\n    leak: getLeakValue(measure)\n  };\n}\n\nexport function getLeakValue(measure: T.Measure | undefined): string | undefined {\n  if (!measure || !measure.periods) {\n    return undefined;\n  }\n  const period = getLeakPeriod(measure.periods);\n  return period && period.value;\n}\n\nexport function getRatingTooltip(metricKey: string, value: number): string | undefined {\n  const finalMetricKey = isDiffMetric(metricKey) ? metricKey.substr(4) : metricKey;\n  if (KNOWN_RATINGS.includes(finalMetricKey)) {\n    return nextGetRatingTooltip(finalMetricKey, value);\n  }\n  return undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { parseDate } from 'sonar-ui-common/helpers/dates';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\n\nfunction getPeriod<T extends T.Period | T.PeriodMeasure>(periods: T[] | undefined, index: number) {\n  if (!Array.isArray(periods)) {\n    return undefined;\n  }\n  return periods.find(period => period.index === index);\n}\n\nexport function getLeakPeriod<T extends T.Period | T.PeriodMeasure>(periods: T[] | undefined) {\n  return getPeriod(periods, 1);\n}\n\nexport function getPeriodLabel(\n  period: T.Period | undefined,\n  dateFormatter: (date: string) => string\n) {\n  if (!period) {\n    return undefined;\n  }\n\n  let parameter = period.modeParam || period.parameter || '';\n\n  switch (period.mode) {\n    case 'SPECIFIC_ANALYSIS':\n      parameter = dateFormatter(period.date);\n      break;\n    case 'PREVIOUS_VERSION':\n      parameter = parameter || dateFormatter(period.date);\n      break;\n    /*\n     * Handle legacy period modes, that predate MMF-1579\n     */\n    case 'previous_version':\n      if (!parameter) {\n        return translate('overview.period.previous_version_only_date');\n      }\n      break;\n    case 'date':\n      parameter = parameter && dateFormatter(parameter);\n      break;\n    case 'manual_baseline':\n      parameter = parameter || dateFormatter(period.date);\n      break;\n    default: // No change in the parameter\n  }\n\n  return translateWithParameters(`overview.period.${period.mode.toLowerCase()}`, parameter);\n}\n\nexport function getPeriodDate(period?: { date?: string }): Date | undefined {\n  return period && period.date ? parseDate(period.date) : undefined;\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./TagsList.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./TagsList.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./TagsList.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport './TagsList.css';\n\ninterface Props {\n  allowUpdate?: boolean;\n  className?: string;\n  tags: string[];\n}\n\nexport default function TagsList({ allowUpdate = false, className, tags }: Props) {\n  return (\n    <span className={classNames('tags-list', className)} title={tags.join(', ')}>\n      <TagsIcon className=\"text-middle\" />\n      <span className=\"text-ellipsis text-middle\">{tags.join(', ')}</span>\n      {allowUpdate && <DropdownIcon className=\"text-middle\" />}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { lazyLoad } from 'sonar-ui-common/components/lazyLoad';\nimport { colors } from '../../app/theme';\n\nconst DonutChart = lazyLoad(() => import('sonar-ui-common/components/charts/DonutChart'));\n\nconst SIZE_TO_WIDTH_MAPPING = { small: 16, normal: 24, big: 40, huge: 60 };\n\nconst SIZE_TO_THICKNESS_MAPPING = { small: 2, normal: 3, big: 3, huge: 4 };\n\ninterface Props {\n  muted?: boolean;\n  size?: 'small' | 'normal' | 'big' | 'huge';\n  value: number | string | null | undefined;\n}\n\nexport default function CoverageRating({ muted = false, size = 'normal', value }: Props) {\n  let data = [{ value: 100, fill: '#ccc ' }];\n\n  if (value != null) {\n    const numberValue = Number(value);\n    data = [\n      { value: numberValue, fill: muted ? colors.gray71 : colors.green },\n      { value: 100 - numberValue, fill: muted ? colors.barBackgroundColor : colors.red }\n    ];\n  }\n\n  const width = SIZE_TO_WIDTH_MAPPING[size];\n  const thickness = SIZE_TO_THICKNESS_MAPPING[size];\n\n  return <DonutChart data={data} height={width} thickness={thickness} width={width} />;\n}\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".tags-list{white-space:nowrap;line-height:16px}.tags-list i:before{font-size:12px}.tags-list span{display:inline-block;vertical-align:middle;text-align:left;max-width:220px;padding-left:4px;padding-right:4px}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\n\ninterface Props {\n  active?: boolean;\n  custom?: boolean;\n  disabled?: boolean;\n  element: string;\n  onHover: (elem: string) => void;\n  onSelectChange: (elem: string, selected: boolean) => void;\n  renderLabel: (element: string) => React.ReactNode;\n  selected?: boolean;\n}\n\nexport default class MultiSelectOption extends React.PureComponent<Props> {\n  handleSelect = (evt: React.SyntheticEvent<HTMLAnchorElement>) => {\n    evt.stopPropagation();\n    evt.preventDefault();\n    evt.currentTarget.blur();\n\n    if (!this.props.disabled) {\n      this.props.onSelectChange(this.props.element, !this.props.selected);\n    }\n  };\n\n  handleHover = () => this.props.onHover(this.props.element);\n\n  render() {\n    const { selected, disabled } = this.props;\n    const className = classNames('icon-checkbox', {\n      'icon-checkbox-checked': selected,\n      'icon-checkbox-invisible': disabled\n    });\n    const activeClass = classNames({ active: this.props.active, disabled });\n\n    return (\n      <li>\n        <a\n          className={activeClass}\n          href=\"#\"\n          onClick={this.handleSelect}\n          onFocus={this.handleHover}\n          onMouseOver={this.handleHover}>\n          <i className={className} /> {this.props.custom && '+ '}\n          {this.props.renderLabel(this.props.element)}\n        </a>\n      </li>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { difference } from 'lodash';\nimport * as React from 'react';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport MultiSelectOption from './MultiSelectOption';\n\ninterface Props {\n  allowNewElements?: boolean;\n  allowSelection?: boolean;\n  elements: string[];\n  filterSelected?: (query: string, selectedElements: string[]) => string[];\n  footerNode?: React.ReactNode;\n  listSize?: number;\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  placeholder: string;\n  renderLabel?: (element: string) => React.ReactNode;\n  selectedElements: string[];\n  validateSearchInput?: (value: string) => string;\n}\n\ninterface State {\n  activeIdx: number;\n  loading: boolean;\n  query: string;\n  selectedElements: string[];\n  unselectedElements: string[];\n}\n\ninterface DefaultProps {\n  filterSelected: (query: string, selectedElements: string[]) => string[];\n  listSize: number;\n  renderLabel: (element: string) => React.ReactNode;\n  validateSearchInput: (value: string) => string;\n}\n\ntype PropsWithDefault = Props & DefaultProps;\n\nexport default class MultiSelect extends React.PureComponent<Props, State> {\n  container?: HTMLDivElement | null;\n  searchInput?: HTMLInputElement | null;\n  mounted = false;\n\n  static defaultProps: DefaultProps = {\n    filterSelected: (query: string, selectedElements: string[]) =>\n      selectedElements.filter(elem => elem.includes(query)),\n    listSize: 0,\n    renderLabel: (element: string) => element,\n    validateSearchInput: (value: string) => value\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      activeIdx: 0,\n      loading: true,\n      query: '',\n      selectedElements: [],\n      unselectedElements: []\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.onSearchQuery('');\n    this.updateSelectedElements(this.props as PropsWithDefault);\n    this.updateUnselectedElements(this.props as PropsWithDefault);\n    if (this.container) {\n      this.container.addEventListener('keydown', this.handleKeyboard, true);\n    }\n  }\n\n  componentWillReceiveProps(nextProps: PropsWithDefault) {\n    if (\n      this.props.elements !== nextProps.elements ||\n      this.props.selectedElements !== nextProps.selectedElements\n    ) {\n      this.updateSelectedElements(nextProps);\n      this.updateUnselectedElements(nextProps);\n\n      const totalElements = this.getAllElements(nextProps, this.state).length;\n      if (this.state.activeIdx >= totalElements) {\n        this.setState({ activeIdx: totalElements - 1 });\n      }\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.searchInput) {\n      this.searchInput.focus();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    if (this.container) {\n      this.container.removeEventListener('keydown', this.handleKeyboard);\n    }\n  }\n\n  handleSelectChange = (item: string, selected: boolean) => {\n    if (selected) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  handleSearchChange = (value: string) => {\n    this.onSearchQuery((this.props as PropsWithDefault).validateSearchInput(value));\n  };\n\n  handleElementHover = (element: string) => {\n    this.setState((prevState, props) => {\n      return { activeIdx: this.getAllElements(props, prevState).indexOf(element) };\n    });\n  };\n\n  handleKeyboard = (evt: KeyboardEvent) => {\n    switch (evt.keyCode) {\n      case 40: // down\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectNextElement);\n        break;\n      case 38: // up\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectPreviousElement);\n        break;\n      case 37: // left\n      case 39: // right\n        evt.stopPropagation();\n        break;\n      case 13: // enter\n        if (this.state.activeIdx >= 0) {\n          this.toggleSelect(this.getAllElements(this.props, this.state)[this.state.activeIdx]);\n        }\n        break;\n    }\n  };\n\n  onSearchQuery = (query: string) => {\n    this.setState({ activeIdx: 0, loading: true, query });\n    this.props.onSearch(query).then(this.stopLoading, this.stopLoading);\n  };\n\n  onSelectItem = (item: string) => {\n    if (this.isNewElement(item, this.props)) {\n      this.onSearchQuery('');\n    }\n    this.props.onSelect(item);\n  };\n\n  onUnselectItem = (item: string) => this.props.onUnselect(item);\n\n  isNewElement = (elem: string, { selectedElements, elements }: Props) =>\n    elem.length > 0 && selectedElements.indexOf(elem) === -1 && elements.indexOf(elem) === -1;\n\n  updateSelectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (state.query) {\n        return {\n          selectedElements: props.filterSelected(state.query, props.selectedElements)\n        };\n      } else {\n        return { selectedElements: [...props.selectedElements] };\n      }\n    });\n  };\n\n  updateUnselectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (props.listSize === 0) {\n        return { unselectedElements: difference(props.elements, props.selectedElements) };\n      } else if (props.listSize < state.selectedElements.length) {\n        return { unselectedElements: [] };\n      } else {\n        return {\n          unselectedElements: difference(props.elements, props.selectedElements).slice(\n            0,\n            props.listSize - state.selectedElements.length\n          )\n        };\n      }\n    });\n  };\n\n  getAllElements = (props: Props, state: State) => {\n    if (this.isNewElement(state.query, props)) {\n      return [...state.selectedElements, ...state.unselectedElements, state.query];\n    } else {\n      return [...state.selectedElements, ...state.unselectedElements];\n    }\n  };\n\n  setElementActive = (idx: number) => this.setState({ activeIdx: idx });\n\n  selectNextElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx < 0 || activeIdx >= allElements.length - 1) {\n      return { activeIdx: 0 };\n    } else {\n      return { activeIdx: activeIdx + 1 };\n    }\n  };\n\n  selectPreviousElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx <= 0) {\n      const lastIdx = allElements.length - 1;\n      return { activeIdx: lastIdx };\n    } else {\n      return { activeIdx: activeIdx - 1 };\n    }\n  };\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  toggleSelect = (item: string) => {\n    if (this.props.selectedElements.indexOf(item) === -1) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  render() {\n    const { allowSelection = true, allowNewElements = true, footerNode = '' } = this.props;\n    const { renderLabel } = this.props as PropsWithDefault;\n    const { query, activeIdx, selectedElements, unselectedElements } = this.state;\n    const activeElement = this.getAllElements(this.props, this.state)[activeIdx];\n    const showNewElement = allowNewElements && this.isNewElement(query, this.props);\n    const infiniteList = this.props.listSize === 0;\n    const listClasses = classNames('menu', {\n      'menu-vertically-limited': infiniteList,\n      'spacer-top': infiniteList,\n      'with-top-separator': infiniteList,\n      'with-bottom-separator': Boolean(footerNode)\n    });\n\n    return (\n      <div className=\"multi-select\" ref={div => (this.container = div)}>\n        <div className=\"menu-search\">\n          <SearchBox\n            autoFocus={true}\n            className=\"little-spacer-top\"\n            loading={this.state.loading}\n            onChange={this.handleSearchChange}\n            placeholder={this.props.placeholder}\n            value={query}\n          />\n        </div>\n        <ul className={listClasses}>\n          {selectedElements.length > 0 &&\n            selectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n                selected={true}\n              />\n            ))}\n          {unselectedElements.length > 0 &&\n            unselectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                disabled={!allowSelection}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n              />\n            ))}\n          {showNewElement && (\n            <MultiSelectOption\n              active={activeElement === query}\n              custom={true}\n              element={query}\n              key={query}\n              onHover={this.handleElementHover}\n              onSelectChange={this.handleSelectChange}\n              renderLabel={renderLabel}\n            />\n          )}\n          {!showNewElement && selectedElements.length < 1 && unselectedElements.length < 1 && (\n            <li className=\"spacer-left\">{translateWithParameters('no_results_for_x', query)}</li>\n          )}\n        </ul>\n        {footerNode}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getMarkdownHelpUrl } from '../../helpers/urls';\n\ninterface Props {\n  className?: string;\n}\n\nexport default class MarkdownTips extends React.PureComponent<Props> {\n  handleClick(evt: React.SyntheticEvent<HTMLAnchorElement>) {\n    evt.preventDefault();\n    window.open(getMarkdownHelpUrl(), 'Markdown', 'height=300,width=600,scrollbars=1,resizable=1');\n  }\n\n  render() {\n    return (\n      <div className={classNames('markdown-tips', this.props.className)}>\n        <a className=\"little-spacer-right\" href=\"#\" onClick={this.handleClick}>\n          {translate('markdown.helplink')}\n        </a>\n        {':'}\n        <span className=\"spacer-left\">*{translate('bold')}*</span>\n        <span className=\"spacer-left\">\n          ``\n          {translate('code')}\n          ``\n        </span>\n        <span className=\"spacer-left\">* {translate('bulleted_point')}</span>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport MultiSelect from '../common/MultiSelect';\nimport './TagsList.css';\n\ninterface Props {\n  listSize: number;\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  selectedTags: string[];\n  tags: string[];\n}\n\nexport default function TagsSelector(props: Props) {\n  return (\n    <MultiSelect\n      elements={props.tags}\n      listSize={props.listSize}\n      onSearch={props.onSearch}\n      onSelect={props.onSelect}\n      onUnselect={props.onUnselect}\n      placeholder={translate('search.search_for_tags')}\n      selectedElements={props.selectedTags}\n      validateSearchInput={validateTag}\n    />\n  );\n}\n\nexport function validateTag(value: string) {\n  // Allow only a-z, 0-9, '+', '-', '#', '.'\n  return value.toLowerCase().replace(/[^-a-z0-9+#.]/gi, '');\n}\n"],"sourceRoot":""}