(window.webpackJsonp=window.webpackJsonp||[]).push([[320],{1815:function(e,t,n){"use strict";n.r(t);var s=n(2),a=n(325),i=n.n(a),o=n(5),r=n(479),l=n(343),c=n(330),u=n(421),p=n(573),d=n(338),h=n.n(d);class m extends s.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={loading:!1},this.stopLoading=()=>{this.mounted&&this.setState({loading:!1})},this.handleChange=e=>{const t=this.props.gate,n=null==t&&null!=e.value,s=null!=t&&null==e.value,a=null!=t&&t.id!==Number(e.value);(n||s||a)&&(this.setState({loading:!0}),this.props.onChange(t&&t.id,Number(e.value)).then(this.stopLoading,this.stopLoading))},this.renderGateName=e=>e.isDefault?s.createElement("span",null,s.createElement("strong",null,Object(o.translate)("default")),": ",e.label):s.createElement("span",null,e.label)}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}renderSelect(){const e=this.props,t=e.gate,n=e.allGates.map(e=>({value:String(e.id),label:e.name,isDefault:e.isDefault}));return s.createElement(h.a,{clearable:!1,disabled:this.state.loading,onChange:this.handleChange,optionRenderer:this.renderGateName,options:n,style:{width:300},value:t&&String(t.id),valueRenderer:this.renderGateName})}render(){return s.createElement("div",null,this.renderSelect(),this.state.loading&&s.createElement("i",{className:"spinner spacer-left"}))}}var g=n(339);function f(){return s.createElement("header",{className:"page-header"},s.createElement("div",{className:"page-title display-flex-center"},s.createElement("h1",null,Object(o.translate)("project_quality_gate.page")),s.createElement(g.a,{className:"spacer-left",doc:Promise.resolve().then(n.bind(null,951))})),s.createElement("div",{className:"page-description"},Object(o.translate)("project_quality_gate.page.description")))}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],s=!0,a=!1,i=void 0;try{for(var o,r=e[Symbol.iterator]();!(s=(o=r.next()).done)&&(n.push(o.value),!t||n.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==r.return||r.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(t,"default",function(){return y});class y extends s.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={loading:!0},this.handleChangeGate=(e,t)=>{const n=this.state.allGates;if(!e&&!t||!n)return Promise.resolve();const s=this.props.component,a={gateId:t||e,organization:s.organization,projectKey:s.key};return(t?Object(r.a)(a):Object(r.g)(a)).then(()=>{if(this.mounted)if(Object(u.a)(Object(o.translate)("project_quality_gate.successfully_updated")),t){const e=n.find(e=>e.id===t);e&&(this.setState({gate:e}),this.props.onComponentChange({qualityGate:e}))}else this.setState({gate:void 0})})}}componentDidMount(){this.mounted=!0,this.checkPermissions()?this.fetchQualityGates():Object(p.a)()}componentWillUnmount(){this.mounted=!1}checkPermissions(){const e=this.props.component.configuration;return!!(e&&e.showQualityGates)}fetchQualityGates(){const e=this.props.component;this.setState({loading:!0}),Promise.all([Object(r.i)({organization:e.organization}),Object(r.k)({organization:e.organization,project:e.key})]).then(e=>{let t=v(e,2),n=t[0].qualitygates,s=t[1];this.mounted&&this.setState({allGates:n,gate:s,loading:!1})},()=>{this.mounted&&this.setState({loading:!1})})}render(){if(!this.checkPermissions())return null;const e=this.state,t=e.allGates,n=e.gate,a=e.loading;return s.createElement("div",{className:"page page-limited",id:"project-quality-gate"},s.createElement(c.a,{suggestions:"project_quality_gate"}),s.createElement(i.a,{title:Object(o.translate)("project_quality_gate.page")}),s.createElement(l.a,{anchor:"qg_main"}),s.createElement(f,null),a?s.createElement("i",{className:"spinner"}):t&&s.createElement(m,{allGates:t,gate:n,onChange:this.handleChangeGate}))}}},323:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(309),a=n(2),i=n(363),o=n(335);n(336);var r=n(314);t.default=function(e){var t=e.tagName,n=void 0===t?"div":t;return a.createElement(n,{className:s("help-tooltip",e.className)},a.createElement(r.default,{mouseLeaveDelay:.25,onShow:e.onShow,overlay:e.overlay,placement:e.placement},a.createElement("span",{className:"display-inline-flex-center"},e.children||a.createElement(o.ThemeConsumer,null,function(e){return a.createElement(i.default,{fill:e.colors.gray71,size:12})}))))}},330:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var s=n(2),a=n(349);function i(e){let t=e.suggestions;return s.createElement(a.a.Consumer,null,e=>{let n=e.addSuggestions,a=e.removeSuggestions;return s.createElement(o,{addSuggestions:n,removeSuggestions:a,suggestions:t})})}class o extends s.PureComponent{componentDidMount(){this.props.addSuggestions(this.props.suggestions)}componentDidUpdate(e){e.suggestions!==this.props.suggestions&&(this.props.removeSuggestions(this.props.suggestions),this.props.addSuggestions(e.suggestions))}componentWillUnmount(){this.props.removeSuggestions(this.props.suggestions)}render(){return null}}},336:function(e,t,n){var s=n(337);"string"==typeof s&&(s=[[e.i,s,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(313)(s,a);s.locals&&(e.exports=s.locals)},337:function(e,t,n){(e.exports=n(312)(!1)).push([e.i,".help-tooltip{display:inline-flex;align-items:center;vertical-align:middle}.help-toolip-link{display:block;width:12px;height:12px;border:none}",""])},339:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var s=n(2),a=n(323),i=n.n(a),o=n(321),r=n(364);const l=Object(o.lazyLoad)(()=>Promise.all([n.e(6),n.e(19)]).then(n.bind(null,456)));class c extends s.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={open:!1},this.close=()=>{this.mounted&&this.setState({open:!1})}}componentDidMount(){this.mounted=!0,this.props.doc.then(e=>{let t=e.default;this.mounted&&this.setState({content:t})},()=>{}),document.addEventListener("scroll",this.close,!0)}componentWillUnmount(){this.mounted=!1,document.removeEventListener("scroll",this.close,!0)}render(){return this.state.content?s.createElement(i.a,{className:this.props.className,overlay:s.createElement("div",{className:"abs-width-300"},s.createElement(l,{childProps:this.props.overlayProps,className:"cut-margins",content:Object(r.filterContent)(this.state.content),isTooltip:!0}))},this.props.children):this.props.children||null}}},343:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var s=n(2),a=n(5),i=n(399);function o(e){return s.createElement(i.a.Consumer,null,t=>{let n=t.addA11ySkipLink,a=t.removeA11ySkipLink;return s.createElement(r,Object.assign({addA11ySkipLink:n,removeA11ySkipLink:a},e))})}class r extends s.PureComponent{constructor(){super(...arguments),this.getLink=()=>{const e=this.props,t=e.anchor,n=e.label;return{key:t,label:void 0===n?Object(a.translate)("skip_to_content"):n,weight:e.weight}}}componentDidMount(){this.props.addA11ySkipLink(this.getLink())}componentWillUnmount(){this.props.removeA11ySkipLink(this.getLink())}render(){const e=this.props.anchor;return s.createElement("span",{id:"a11y_target__".concat(e)})}}},364:function(e,t,n){"use strict";function s(e){let t,n;for(let s=0;s<e.length;s++){if("---"===e[s].trim()){if(void 0!==t){n=s;break}t=s}}return void 0!==n?{firstLine:t,lastLine:n}:void 0}function a(e){const t={};for(let n=0;n<e.length;n++){const s=e[n].split(":").map(e=>e.trim());2===s.length&&(t[s[0]]=s[1])}return t}function i(e,t){const n="\x3c!-- ".concat(t," --\x3e"),s="\x3c!-- /".concat(t," --\x3e");let a=e,i=a.indexOf(n),o=a.indexOf(s);for(;-1!==i&&-1!==o;)i=(a=a.substring(0,i)+a.substring(o+s.length)).indexOf(n),o=a.indexOf(s);return a}e.exports={getFrontMatter:function(e){const t=e.split("\n"),n=s(t);return n?a(t.slice(n.firstLine+1,n.lastLine)):{}},separateFrontMatter:function(e){const t=e.split("\n"),n=s(t);if(n){const e=a(t.slice(n.firstLine+1,n.lastLine)),s=t.slice(n.lastLine+1).join("\n");return{frontmatter:e,content:s}}return{frontmatter:{},content:e}},filterContent:function(e){const t="\x3c!-- \\/?(sonarqube|sonarcloud|static) --\x3e",s=n(22),a=s.isSonarCloud,o=s.getInstance,r=i(e.replace(/{instance}/gi,o()),"static");return(a()?i(r,"sonarqube"):i(r,"sonarcloud")).replace(new RegExp("^".concat(t,"(\n|\r|\r\n|$)"),"gm"),"").replace(new RegExp("".concat(t),"g"),"")}}},421:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var s=n(378),a=n(381);function i(e){Object(a.default)().dispatch(s.b(e))}},573:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var s=n(34),a=n.n(s),i=n(542),o=n(381);function r(){const e=Object(o.default)(),t=a()(),n=window.location.pathname+window.location.search+window.location.hash;e.dispatch(Object(i.c)()),t.replace({pathname:"/sessions/new",query:{return_to:n}})}},951:function(e,t,n){"use strict";n.r(t),t.default="The Default gate is applied to all projects not explicitly assigned to a gate. Quality Profile and Gate administrators can assign projects to a gate from the Quality Profile page. Project administrators can also choose a non-default gate.\n"}}]);
//# sourceMappingURL=320.m.48304b31.chunk.js.map