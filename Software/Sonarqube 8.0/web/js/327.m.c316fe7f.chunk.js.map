{"version":3,"sources":["webpack:///../sonar-docs/src/tooltips/quality-profiles/activate-rules-in-built-in-profile.md","webpack:///./src/main/js/apps/quality-profiles/details/ProfileExporters.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ChangeParentForm.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileInheritanceBox.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileInheritance.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfilePermissionsFormSelect.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfilePermissionsForm.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfilePermissionsGroup.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfilePermissionsUser.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfilePermissions.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ChangeProjectsForm.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileProjects.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileRulesDeprecatedWarning.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileRulesRowOfType.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileRulesRowTotal.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileRulesSonarWayComparison.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileRules.tsx","webpack:///./src/main/js/apps/quality-profiles/details/ProfileDetails.tsx","webpack:///./src/main/js/components/docs/DocTooltip.tsx","webpack:///./src/main/js/api/quality-profiles.ts","webpack:///./src/main/js/helpers/markdown.js","webpack:///./src/main/js/api/rules.ts","webpack:///./src/main/js/apps/quality-profiles/components/BuiltInQualityProfileBadge.tsx","webpack:///./src/main/js/apps/quality-profiles/components/ProfileLink.tsx","webpack:///../sonar-docs/src/tooltips/quality-profiles/built-in-quality-profile.md"],"names":["__webpack_require__","r","__webpack_exports__","ProfileExporters_ProfileExporters","index_js_exposed","[object Object]","exporter","_this$props","this","props","organization","profile","parameters","exporterKey","key","language","qualityProfile","name","Object","assign","window","baseUrl","querystring_es3","_this$props2","exporters","exportersForLanguage","filter","e","languages","includes","length","className","l10n","map","index","undefined","data-key","href","getExportUrl","target","ChangeParentForm_ChangeParentForm","mounted","state","loading","selected","handleSelectChange","option","setState","value","handleFormSubmit","event","preventDefault","parent","quality_profiles","then","onChange","catch","profiles","options","label","sortBy_default","isBuiltIn","concat","submitDisabled","parentKey","Modal_default","a","contentLabel","onRequestClose","onClose","size","id","onSubmit","htmlFor","Select_default","clearable","buttons","disabled","onClick","ProfileInheritanceBox","depth","extendsBuiltIn","_props$displayLink","displayLink","_props$type","type","offset","data-test","style","paddingLeft","ProfileLink","BuiltInQualityProfileBadge","HelpTooltip_default","overlay","activeRuleCount","overridingRuleCount","ProfileInheritance_ProfileInheritance","formOpen","handleChangeParentClick","closeForm","handleParentChange","updateProfiles","loadData","prevProps","ancestors","children","reverse","highlightCurrent","some","actions","edit","ancestor","classnames","child","p","ProfilePermissionsFormSelect_ProfilePermissionsFormSelect","super","handleSearch","query","onSearch","searchResults","handleInputChange","debounce_default","noResultsText","getStringValue","autoFocus","filterOptions","identity_default","isLoading","onInputChange","optionRenderer","placeholder","searchable","valueRenderer","isUser","login","Avatar","hash","avatar","GroupIcon_default","ProfilePermissionsForm_ProfilePermissionsForm","submitting","stopSubmitting","handleUserAdd","user","onUserAdd","handleGroupAdd","group","onGroupAdd","q","Promise","all","_ref","_ref2","_slicedToArray","usersResponse","groupsResponse","users","groups","handleValueChange","header","ProfilePermissionsGroup_ProfilePermissionsGroup","deleteModal","handleDeleteClick","handleDeleteModalClose","handleDelete","onDelete","renderDeleteModal","index_es","defaultMessage","values","onSubmitClick","onCloseClick","lineHeight","SimpleModal_default","ProfilePermissionsUser_ProfilePermissionsUser","ProfilePermissions_ProfilePermissions","addUserForm","handleAddUserButtonClick","handleAddUserFormClose","addedUser","uniqBy_default","handleUserDelete","removedUser","addedGroup","handleGroupDelete","removedGroup","fetchUsersAndGroups","ProfilePermissions_slicedToArray","ChangeProjectsForm_ChangeProjectsForm","fetchProjects","searchParams","page","ps","pageSize","data","prevState","more","projects","results","newSeletedProjects","project","selectedProjects","lastSearchParams","needToReload","projectsTotalCount","paging","total","handleSelect","handleUnselect","without_default","handleCloseClick","renderElement","find_default","SelectList_default","allowBulkSelection","elements","elementsTotalCount","labelAll","labelSelected","labelUnselected","SelectList","All","onSelect","onUnselect","selectedElements","withPaging","ProfileProjects_ProfileProjects","loadingMore","stopLoading","loadMore","handleChangeClick","loadProjects","isDefault","es","to","pathname","QualifierIcon_default","qualifier","ListFooter_default","count","ready","associateProjects","renderDefault","renderProjects","ProfileRulesDeprecatedWarning","urls","qprofile","activeDeprecatedRules","ProfileRulesRowOfType","activeRulesUrl","activation","types","inactiveRulesUrl","inactiveCount","IssueTypeIcon_default","measures","ProfileRulesRowTotal","ProfileRulesSonarWayComparison","url","compareToProfile","sonarway","sonarWayMissingRules","TYPES","ProfileRules_ProfileRules","activatedTotal","activatedByType","keyBy_default","t","val","allByType","compareToSonarWay","loadRules","resolve","rules","facets","loadAllRules","loadActivatedRules","loadProfile","responses","_responses","ProfileRules_slicedToArray","allRules","activatedRules","showProfile","activateMoreUrl","_profile$actions","getRulesCountForType","getRulesTotalForType","copy","DocTooltip","doc","bind","activeDeprecatedRuleCount","missingRuleCount","ProfileDetails","d","react__WEBPACK_IMPORTED_MODULE_0__","sonar_ui_common_components_controls_HelpTooltip__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_components_controls_HelpTooltip__WEBPACK_IMPORTED_MODULE_1___default","n","sonar_ui_common_components_lazyLoad__WEBPACK_IMPORTED_MODULE_2__","_helpers_markdown__WEBPACK_IMPORTED_MODULE_3__","DocMarkdownBlock","open","close","content","default","document","addEventListener","removeEventListener","childProps","overlayProps","isTooltip","searchQualityProfiles","sonar_ui_common_helpers_request__WEBPACK_IMPORTED_MODULE_2__","_app_utils_throwGlobalError__WEBPACK_IMPORTED_MODULE_3__","getQualityProfile","createQualityProfile","restoreQualityProfile","getProfileProjects","getProfileInheritance","profileKey","setDefaultProfile","renameProfile","copyProfile","fromKey","toName","deleteProfile","changeProfileParent","getImporters","importers","getExporters","getProfileChangelog","compareProfiles","leftKey","rightKey","associateProject","dissociateProject","searchUsers","searchGroups","addUser","removeUser","addGroup","removeGroup","bulkActivateRules","bulkDeactivateRules","activateRule","params","lodash_map__WEBPACK_IMPORTED_MODULE_0___default","sonar_ui_common_helpers_csv__WEBPACK_IMPORTED_MODULE_1__","join","deactivateRule","getFrontMatterPosition","lines","firstLine","lastLine","i","trim","parseFrontMatter","tokens","split","x","cutConditionalContent","tag","beginning","ending","newContent","start","indexOf","end","substring","module","exports","getFrontMatter","position","slice","separateFrontMatter","frontmatter","filterContent","regexBase","_require","isSonarCloud","getInstance","contentWithoutStatic","replace","RegExp","getRulesApp","searchRules","takeFacet","getRuleDetails","getRuleTags","createRule","deleteRule","updateRule","sonar_ui_common_helpers_request__WEBPACK_IMPORTED_MODULE_0__","_app_utils_throwGlobalError__WEBPACK_IMPORTED_MODULE_1__","response","property","facet","find","tags","rule","status","reject","classnames__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_helpers_l10n__WEBPACK_IMPORTED_MODULE_2__","_components_docs_DocTooltip__WEBPACK_IMPORTED_MODULE_3__","_ref$tooltip","tooltip","badge","_a","other","__rest","react_router__WEBPACK_IMPORTED_MODULE_1__","activeClassName","_utils__WEBPACK_IMPORTED_MODULE_2__"],"mappings":"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","file":"js/327.m.c316fe7f.chunk.js","sourcesContent":["export default \"This Quality Profile is built in, and cannot be updated manually. If you want to activate more rules, create a new profile that inherits from this one and add rules there.\\n\"","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { stringify } from 'querystring';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Exporter, Profile } from '../types';\n\ninterface Props {\n  exporters: Exporter[];\n  organization: string | null;\n  profile: Profile;\n}\n\nexport default class ProfileExporters extends React.PureComponent<Props> {\n  getExportUrl(exporter: Exporter) {\n    const { organization, profile } = this.props;\n\n    const path = '/api/qualityprofiles/export';\n    const parameters = {\n      exporterKey: exporter.key,\n      language: profile.language,\n      qualityProfile: profile.name\n    };\n    if (organization) {\n      Object.assign(parameters, { organization });\n    }\n    return (window as any).baseUrl + path + '?' + stringify(parameters);\n  }\n\n  render() {\n    const { exporters, profile } = this.props;\n    const exportersForLanguage = exporters.filter(e => e.languages.includes(profile.language));\n\n    if (exportersForLanguage.length === 0) {\n      return null;\n    }\n\n    return (\n      <div className=\"boxed-group quality-profile-exporters\">\n        <h2>{translate('quality_profiles.exporters')}</h2>\n        <div className=\"boxed-group-inner\">\n          <ul>\n            {exportersForLanguage.map((exporter, index) => (\n              <li\n                className={index > 0 ? 'spacer-top' : undefined}\n                data-key={exporter.key}\n                key={exporter.key}>\n                <a href={this.getExportUrl(exporter)} target=\"_blank\">\n                  {exporter.name}\n                </a>\n              </li>\n            ))}\n          </ul>\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sortBy } from 'lodash';\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { changeProfileParent } from '../../../api/quality-profiles';\nimport { Profile } from '../types';\n\ninterface Props {\n  onChange: () => void;\n  onClose: () => void;\n  profile: Profile;\n  profiles: Profile[];\n}\n\ninterface State {\n  loading: boolean;\n  selected: string | null;\n}\n\nexport default class ChangeParentForm extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = {\n    loading: false,\n    selected: null\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleSelectChange = (option: { value: string }) => {\n    this.setState({ selected: option.value });\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n\n    const parent = this.state.selected;\n\n    if (parent != null) {\n      this.setState({ loading: true });\n      changeProfileParent(this.props.profile.key, parent)\n        .then(this.props.onChange)\n        .catch(() => {\n          if (this.mounted) {\n            this.setState({ loading: false });\n          }\n        });\n    }\n  };\n\n  render() {\n    const { profiles } = this.props;\n\n    const options = [\n      { label: translate('none'), value: '' },\n      ...sortBy(profiles, 'name').map(profile => ({\n        label: profile.isBuiltIn\n          ? `${profile.name} (${translate('quality_profiles.built_in')})`\n          : profile.name,\n        value: profile.key\n      }))\n    ];\n\n    const submitDisabled =\n      this.state.loading ||\n      this.state.selected == null ||\n      this.state.selected === this.props.profile.parentKey;\n\n    return (\n      <Modal\n        contentLabel={translate('quality_profiles.change_parent')}\n        onRequestClose={this.props.onClose}\n        size=\"small\">\n        <form id=\"change-profile-parent-form\" onSubmit={this.handleFormSubmit}>\n          <div className=\"modal-head\">\n            <h2>{translate('quality_profiles.change_parent')}</h2>\n          </div>\n          <div className=\"modal-body\">\n            <div className=\"modal-field\">\n              <label htmlFor=\"change-profile-parent\">\n                {translate('quality_profiles.parent')} <em className=\"mandatory\">*</em>\n              </label>\n              <Select\n                clearable={false}\n                id=\"change-profile-parent\"\n                name=\"parentKey\"\n                onChange={this.handleSelectChange}\n                options={options}\n                value={\n                  this.state.selected != null\n                    ? this.state.selected\n                    : this.props.profile.parentKey || ''\n                }\n              />\n            </div>\n          </div>\n          <div className=\"modal-foot\">\n            {this.state.loading && <i className=\"spinner spacer-right\" />}\n            <SubmitButton disabled={submitDisabled} id=\"change-profile-parent-submit\">\n              {translate('change_verb')}\n            </SubmitButton>\n            <ResetButtonLink id=\"change-profile-parent-cancel\" onClick={this.props.onClose}>\n              {translate('cancel')}\n            </ResetButtonLink>\n          </div>\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport BuiltInQualityProfileBadge from '../components/BuiltInQualityProfileBadge';\nimport ProfileLink from '../components/ProfileLink';\n\ninterface Props {\n  className?: string;\n  depth: number;\n  displayLink?: boolean;\n  extendsBuiltIn?: boolean;\n  language: string;\n  organization: string | null;\n  profile: T.ProfileInheritanceDetails;\n  type?: string;\n}\n\nexport default function ProfileInheritanceBox(props: Props) {\n  const {\n    className,\n    depth,\n    extendsBuiltIn,\n    language,\n    organization,\n    profile,\n    displayLink = true,\n    type = 'current'\n  } = props;\n  const offset = 25 * depth;\n\n  return (\n    <tr className={className} data-test={`quality-profiles__inheritance-${type}`}>\n      <td>\n        <div style={{ paddingLeft: offset }}>\n          {displayLink ? (\n            <ProfileLink\n              className=\"text-middle\"\n              language={language}\n              name={profile.name}\n              organization={organization}>\n              {profile.name}\n            </ProfileLink>\n          ) : (\n            <span className=\"text-middle\">{profile.name}</span>\n          )}\n          {profile.isBuiltIn && <BuiltInQualityProfileBadge className=\"spacer-left\" />}\n          {extendsBuiltIn && (\n            <HelpTooltip\n              className=\"spacer-left\"\n              overlay={translate('quality_profiles.extends_built_in')}\n            />\n          )}\n        </div>\n      </td>\n\n      <td>{translateWithParameters('quality_profile.x_active_rules', profile.activeRuleCount)}</td>\n\n      <td>\n        {profile.overridingRuleCount != null && (\n          <p>\n            {translateWithParameters(\n              'quality_profiles.x_overridden_rules',\n              profile.overridingRuleCount\n            )}\n          </p>\n        )}\n      </td>\n    </tr>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getProfileInheritance } from '../../../api/quality-profiles';\nimport { Profile } from '../types';\nimport ChangeParentForm from './ChangeParentForm';\nimport ProfileInheritanceBox from './ProfileInheritanceBox';\n\ninterface Props {\n  organization: string | null;\n  profile: Profile;\n  profiles: Profile[];\n  updateProfiles: () => Promise<void>;\n}\n\ninterface State {\n  ancestors?: T.ProfileInheritanceDetails[];\n  children?: T.ProfileInheritanceDetails[];\n  formOpen: boolean;\n  loading: boolean;\n  profile?: T.ProfileInheritanceDetails;\n}\n\nexport default class ProfileInheritance extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  state: State = {\n    formOpen: false,\n    loading: true\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadData();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.profile.key !== this.props.profile.key) {\n      this.loadData();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadData() {\n    getProfileInheritance(this.props.profile.key).then(\n      r => {\n        if (this.mounted) {\n          const { ancestors, children } = r;\n          ancestors.reverse();\n\n          this.setState({\n            children,\n            ancestors,\n            profile: r.profile,\n            loading: false\n          });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  }\n\n  handleChangeParentClick = () => {\n    this.setState({ formOpen: true });\n  };\n\n  closeForm = () => {\n    this.setState({ formOpen: false });\n  };\n\n  handleParentChange = () => {\n    this.props.updateProfiles().then(\n      () => {\n        this.loadData();\n      },\n      () => {}\n    );\n    this.closeForm();\n  };\n\n  render() {\n    const { profile, profiles } = this.props;\n    const { ancestors } = this.state;\n\n    const highlightCurrent =\n      !this.state.loading &&\n      ancestors != null &&\n      this.state.children != null &&\n      (ancestors.length > 0 || this.state.children.length > 0);\n\n    const extendsBuiltIn = ancestors != null && ancestors.some(profile => profile.isBuiltIn);\n\n    return (\n      <div className=\"boxed-group quality-profile-inheritance\">\n        {profile.actions && profile.actions.edit && !profile.isBuiltIn && (\n          <div className=\"boxed-group-actions\">\n            <Button className=\"pull-right js-change-parent\" onClick={this.handleChangeParentClick}>\n              {translate('quality_profiles.change_parent')}\n            </Button>\n          </div>\n        )}\n\n        <header className=\"boxed-group-header\">\n          <h2>{translate('quality_profiles.profile_inheritance')}</h2>\n        </header>\n\n        <div className=\"boxed-group-inner\">\n          {this.state.loading ? (\n            <i className=\"spinner\" />\n          ) : (\n            <table className=\"data zebra\">\n              <tbody>\n                {ancestors != null &&\n                  ancestors.map((ancestor, index) => (\n                    <ProfileInheritanceBox\n                      depth={index}\n                      key={ancestor.key}\n                      language={profile.language}\n                      organization={this.props.organization}\n                      profile={ancestor}\n                      type=\"ancestor\"\n                    />\n                  ))}\n\n                {this.state.profile != null && (\n                  <ProfileInheritanceBox\n                    className={classNames({\n                      selected: highlightCurrent\n                    })}\n                    depth={ancestors ? ancestors.length : 0}\n                    displayLink={false}\n                    extendsBuiltIn={extendsBuiltIn}\n                    language={profile.language}\n                    organization={this.props.organization}\n                    profile={this.state.profile}\n                  />\n                )}\n\n                {this.state.children != null &&\n                  this.state.children.map(child => (\n                    <ProfileInheritanceBox\n                      depth={ancestors ? ancestors.length + 1 : 0}\n                      key={child.key}\n                      language={profile.language}\n                      organization={this.props.organization}\n                      profile={child}\n                      type=\"child\"\n                    />\n                  ))}\n              </tbody>\n            </table>\n          )}\n        </div>\n\n        {this.state.formOpen && (\n          <ChangeParentForm\n            onChange={this.handleParentChange}\n            onClose={this.closeForm}\n            profile={profile}\n            profiles={profiles.filter(p => p !== profile && p.language === profile.language)}\n          />\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { debounce, identity } from 'lodash';\nimport * as React from 'react';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport GroupIcon from 'sonar-ui-common/components/icons/GroupIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport Avatar from '../../../components/ui/Avatar';\nimport { Group } from './ProfilePermissions';\n\ntype Option = T.UserSelected | Group;\ntype OptionWithValue = Option & { value: string };\n\ninterface Props {\n  onChange: (option: OptionWithValue) => void;\n  onSearch: (query: string) => Promise<Option[]>;\n  selected?: Option;\n}\n\ninterface State {\n  loading: boolean;\n  query: string;\n  searchResults: Option[];\n}\n\nexport default class ProfilePermissionsFormSelect extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    this.handleSearch = debounce(this.handleSearch, 250);\n    this.state = { loading: false, query: '', searchResults: [] };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.handleSearch(this.state.query);\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleSearch = (query: string) => {\n    this.setState({ loading: true });\n    this.props.onSearch(query).then(\n      searchResults => {\n        if (this.mounted) {\n          this.setState({ loading: false, searchResults });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  handleInputChange = (query: string) => {\n    this.setState({ query });\n    if (query.length > 1) {\n      this.handleSearch(query);\n    }\n  };\n\n  render() {\n    const noResultsText =\n      this.state.query.length === 1\n        ? translateWithParameters('select2.tooShort', 2)\n        : translate('no_results');\n\n    // create a uniq string both for users and groups\n    const options = this.state.searchResults.map(r => ({ ...r, value: getStringValue(r) }));\n\n    return (\n      <Select\n        autoFocus={true}\n        className=\"Select-big\"\n        clearable={false}\n        // disable default react-select filtering\n        filterOptions={identity}\n        isLoading={this.state.loading}\n        noResultsText={noResultsText}\n        onChange={this.props.onChange}\n        onInputChange={this.handleInputChange}\n        optionRenderer={optionRenderer}\n        options={options}\n        placeholder=\"\"\n        searchable={true}\n        value={this.props.selected && getStringValue(this.props.selected)}\n        valueRenderer={optionRenderer}\n      />\n    );\n  }\n}\n\nfunction isUser(option: Option): option is T.UserSelected {\n  return (option as T.UserSelected).login !== undefined;\n}\n\nfunction getStringValue(option: Option) {\n  return isUser(option) ? `user:${option.login}` : `group:${option.name}`;\n}\n\nfunction optionRenderer(option: OptionWithValue) {\n  return isUser(option) ? (\n    <>\n      <Avatar hash={option.avatar} name={option.name} size={16} />\n      <strong className=\"spacer-left\">{option.name}</strong>\n      <span className=\"note little-spacer-left\">{option.login}</span>\n    </>\n  ) : (\n    <>\n      <GroupIcon size={16} />\n      <strong className=\"spacer-left\">{option.name}</strong>\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport {\n  addGroup,\n  addUser,\n  searchGroups,\n  searchUsers,\n  SearchUsersGroupsParameters\n} from '../../../api/quality-profiles';\nimport { Group } from './ProfilePermissions';\nimport ProfilePermissionsFormSelect from './ProfilePermissionsFormSelect';\n\ninterface Props {\n  onClose: () => void;\n  onGroupAdd: (group: Group) => void;\n  onUserAdd: (user: T.UserSelected) => void;\n  organization?: string;\n  profile: { language: string; name: string };\n}\n\ninterface State {\n  selected?: T.UserSelected | Group;\n  submitting: boolean;\n}\n\nexport default class ProfilePermissionsForm extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { submitting: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  stopSubmitting = () => {\n    if (this.mounted) {\n      this.setState({ submitting: false });\n    }\n  };\n\n  handleUserAdd = (user: T.UserSelected) =>\n    addUser({\n      language: this.props.profile.language,\n      login: user.login,\n      organization: this.props.organization,\n      qualityProfile: this.props.profile.name\n    }).then(() => this.props.onUserAdd(user), this.stopSubmitting);\n\n  handleGroupAdd = (group: Group) =>\n    addGroup({\n      group: group.name,\n      language: this.props.profile.language,\n      organization: this.props.organization,\n      qualityProfile: this.props.profile.name\n    }).then(() => this.props.onGroupAdd(group), this.stopSubmitting);\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    const { selected } = this.state;\n    if (selected) {\n      this.setState({ submitting: true });\n      if ((selected as T.UserSelected).login !== undefined) {\n        this.handleUserAdd(selected as T.UserSelected);\n      } else {\n        this.handleGroupAdd(selected as Group);\n      }\n    }\n  };\n\n  handleSearch = (q: string) => {\n    const { organization, profile } = this.props;\n    const parameters: SearchUsersGroupsParameters = {\n      language: profile.language,\n      organization,\n      q,\n      qualityProfile: profile.name,\n      selected: 'deselected'\n    };\n    return Promise.all([searchUsers(parameters), searchGroups(parameters)]).then(\n      ([usersResponse, groupsResponse]) => [...usersResponse.users, ...groupsResponse.groups]\n    );\n  };\n\n  handleValueChange = (selected: T.UserSelected | Group) => {\n    this.setState({ selected });\n  };\n\n  render() {\n    const header = translate('quality_profiles.grant_permissions_to_user_or_group');\n    const submitDisabled = !this.state.selected || this.state.submitting;\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose}>\n        <header className=\"modal-head\">\n          <h2>{header}</h2>\n        </header>\n        <form onSubmit={this.handleFormSubmit}>\n          <div className=\"modal-body\">\n            <div className=\"modal-field\">\n              <label>{translate('quality_profiles.search_description')}</label>\n              <ProfilePermissionsFormSelect\n                onChange={this.handleValueChange}\n                onSearch={this.handleSearch}\n                selected={this.state.selected}\n              />\n            </div>\n          </div>\n          <footer className=\"modal-foot\">\n            {this.state.submitting && <i className=\"spinner spacer-right\" />}\n            <SubmitButton disabled={submitDisabled}>{translate('add_verb')}</SubmitButton>\n            <ResetButtonLink onClick={this.props.onClose}>{translate('cancel')}</ResetButtonLink>\n          </footer>\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Button, DeleteButton, ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport SimpleModal, { ChildrenProps } from 'sonar-ui-common/components/controls/SimpleModal';\nimport GroupIcon from 'sonar-ui-common/components/icons/GroupIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { removeGroup } from '../../../api/quality-profiles';\nimport { Group } from './ProfilePermissions';\n\ninterface Props {\n  group: Group;\n  onDelete: (group: Group) => void;\n  organization?: string;\n  profile: { language: string; name: string };\n}\n\ninterface State {\n  deleteModal: boolean;\n}\n\nexport default class ProfilePermissionsGroup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { deleteModal: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleDeleteClick = () => {\n    this.setState({ deleteModal: true });\n  };\n\n  handleDeleteModalClose = () => {\n    if (this.mounted) {\n      this.setState({ deleteModal: false });\n    }\n  };\n\n  handleDelete = () => {\n    const { group, organization, profile } = this.props;\n\n    return removeGroup({\n      group: group.name,\n      language: profile.language,\n      organization,\n      qualityProfile: profile.name\n    }).then(() => {\n      this.handleDeleteModalClose();\n      this.props.onDelete(group);\n    });\n  };\n\n  renderDeleteModal = (props: ChildrenProps) => (\n    <div>\n      <header className=\"modal-head\">\n        <h2>{translate('groups.remove')}</h2>\n      </header>\n\n      <div className=\"modal-body\">\n        <FormattedMessage\n          defaultMessage={translate('groups.remove.confirmation')}\n          id=\"groups.remove.confirmation\"\n          values={{\n            user: <strong>{this.props.group.name}</strong>\n          }}\n        />\n      </div>\n\n      <footer className=\"modal-foot\">\n        {props.submitting && <i className=\"spinner spacer-right\" />}\n        <Button className=\"button-red\" disabled={props.submitting} onClick={props.onSubmitClick}>\n          {translate('remove')}\n        </Button>\n        <ResetButtonLink onClick={props.onCloseClick}>{translate('cancel')}</ResetButtonLink>\n      </footer>\n    </div>\n  );\n\n  render() {\n    const { group } = this.props;\n\n    return (\n      <div className=\"clearfix big-spacer-bottom\">\n        <DeleteButton\n          className=\"pull-right spacer-top spacer-left spacer-right button-small\"\n          onClick={this.handleDeleteClick}\n        />\n        <GroupIcon className=\"pull-left spacer-right\" size={32} />\n        <div className=\"overflow-hidden\" style={{ lineHeight: '32px' }}>\n          <strong>{group.name}</strong>\n        </div>\n\n        {this.state.deleteModal && (\n          <SimpleModal\n            header={translate('group.remove')}\n            onClose={this.handleDeleteModalClose}\n            onSubmit={this.handleDelete}>\n            {this.renderDeleteModal}\n          </SimpleModal>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport {\n  DeleteButton,\n  ResetButtonLink,\n  SubmitButton\n} from 'sonar-ui-common/components/controls/buttons';\nimport SimpleModal, { ChildrenProps } from 'sonar-ui-common/components/controls/SimpleModal';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { removeUser } from '../../../api/quality-profiles';\nimport Avatar from '../../../components/ui/Avatar';\n\ninterface Props {\n  onDelete: (user: T.UserSelected) => void;\n  organization?: string;\n  profile: { language: string; name: string };\n  user: T.UserSelected;\n}\n\ninterface State {\n  deleteModal: boolean;\n}\n\nexport default class ProfilePermissionsUser extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { deleteModal: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleDeleteClick = () => {\n    this.setState({ deleteModal: true });\n  };\n\n  handleDeleteModalClose = () => {\n    if (this.mounted) {\n      this.setState({ deleteModal: false });\n    }\n  };\n\n  handleDelete = () => {\n    const { organization, profile, user } = this.props;\n\n    return removeUser({\n      language: profile.language,\n      login: user.login,\n      organization,\n      qualityProfile: profile.name\n    }).then(() => {\n      this.handleDeleteModalClose();\n      this.props.onDelete(user);\n    });\n  };\n\n  renderDeleteModal = (props: ChildrenProps) => (\n    <div>\n      <header className=\"modal-head\">\n        <h2>{translate('users.remove')}</h2>\n      </header>\n\n      <div className=\"modal-body\">\n        <FormattedMessage\n          defaultMessage={translate('users.remove.confirmation')}\n          id=\"users.remove.confirmation\"\n          values={{\n            user: <strong>{this.props.user.name}</strong>\n          }}\n        />\n      </div>\n\n      <footer className=\"modal-foot\">\n        {props.submitting && <i className=\"spinner spacer-right\" />}\n        <SubmitButton\n          className=\"button-red\"\n          disabled={props.submitting}\n          onClick={props.onSubmitClick}>\n          {translate('remove')}\n        </SubmitButton>\n        <ResetButtonLink onClick={props.onCloseClick}>{translate('cancel')}</ResetButtonLink>\n      </footer>\n    </div>\n  );\n\n  render() {\n    const { user } = this.props;\n\n    return (\n      <div className=\"clearfix big-spacer-bottom\">\n        <DeleteButton\n          className=\"pull-right spacer-top spacer-left spacer-right button-small\"\n          onClick={this.handleDeleteClick}\n        />\n        <Avatar className=\"pull-left spacer-right\" hash={user.avatar} name={user.name} size={32} />\n        <div className=\"overflow-hidden\">\n          <strong>{user.name}</strong>\n          <div className=\"note\">{user.login}</div>\n        </div>\n\n        {this.state.deleteModal && (\n          <SimpleModal\n            header={translate('users.remove')}\n            onClose={this.handleDeleteModalClose}\n            onSubmit={this.handleDelete}>\n            {this.renderDeleteModal}\n          </SimpleModal>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sortBy, uniqBy } from 'lodash';\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport {\n  searchGroups,\n  searchUsers,\n  SearchUsersGroupsParameters\n} from '../../../api/quality-profiles';\nimport { Profile } from '../types';\nimport ProfilePermissionsForm from './ProfilePermissionsForm';\nimport ProfilePermissionsGroup from './ProfilePermissionsGroup';\nimport ProfilePermissionsUser from './ProfilePermissionsUser';\n\nexport interface Group {\n  name: string;\n}\n\ninterface Props {\n  organization?: string;\n  profile: Pick<Profile, 'key' | 'language' | 'name'>;\n}\n\ninterface State {\n  addUserForm: boolean;\n  groups?: Group[];\n  loading: boolean;\n  users?: T.UserSelected[];\n}\n\nexport default class ProfilePermissions extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { addUserForm: false, loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchUsersAndGroups();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (\n      prevProps.organization !== this.props.organization ||\n      prevProps.profile.key !== this.props.profile.key\n    ) {\n      this.fetchUsersAndGroups();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchUsersAndGroups() {\n    this.setState({ loading: true });\n    const { organization, profile } = this.props;\n    const parameters: SearchUsersGroupsParameters = {\n      language: profile.language,\n      organization,\n      qualityProfile: profile.name,\n      selected: 'selected'\n    };\n    Promise.all([searchUsers(parameters), searchGroups(parameters)]).then(\n      ([usersResponse, groupsResponse]) => {\n        if (this.mounted) {\n          this.setState({\n            groups: groupsResponse.groups,\n            loading: false,\n            users: usersResponse.users\n          });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  }\n\n  handleAddUserButtonClick = () => {\n    this.setState({ addUserForm: true });\n  };\n\n  handleAddUserFormClose = () => {\n    if (this.mounted) {\n      this.setState({ addUserForm: false });\n    }\n  };\n\n  handleUserAdd = (addedUser: T.UserSelected) => {\n    if (this.mounted) {\n      this.setState((state: State) => ({\n        addUserForm: false,\n        users: state.users && uniqBy([...state.users, addedUser], user => user.login)\n      }));\n    }\n  };\n\n  handleUserDelete = (removedUser: T.UserSelected) => {\n    if (this.mounted) {\n      this.setState((state: State) => ({\n        users: state.users && state.users.filter(user => user !== removedUser)\n      }));\n    }\n  };\n\n  handleGroupAdd = (addedGroup: T.Group) => {\n    if (this.mounted) {\n      this.setState((state: State) => ({\n        addUserForm: false,\n        groups: state.groups && uniqBy([...state.groups, addedGroup], group => group.name)\n      }));\n    }\n  };\n\n  handleGroupDelete = (removedGroup: T.Group) => {\n    if (this.mounted) {\n      this.setState((state: State) => ({\n        groups: state.groups && state.groups.filter(group => group !== removedGroup)\n      }));\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"boxed-group\">\n        <h2>{translate('permissions.page')}</h2>\n        <div className=\"boxed-group-inner\">\n          <p className=\"note\">{translate('quality_profiles.default_permissions')}</p>\n\n          {this.state.loading ? (\n            <div className=\"big-spacer-top\">\n              <i className=\"spinner\" />\n            </div>\n          ) : (\n            <div className=\"big-spacer-top\">\n              {this.state.users &&\n                sortBy(this.state.users, 'name').map(user => (\n                  <ProfilePermissionsUser\n                    key={user.login}\n                    onDelete={this.handleUserDelete}\n                    organization={this.props.organization}\n                    profile={this.props.profile}\n                    user={user}\n                  />\n                ))}\n              {this.state.groups &&\n                sortBy(this.state.groups, 'name').map(group => (\n                  <ProfilePermissionsGroup\n                    group={group}\n                    key={group.name}\n                    onDelete={this.handleGroupDelete}\n                    organization={this.props.organization}\n                    profile={this.props.profile}\n                  />\n                ))}\n              <div className=\"text-right\">\n                <Button onClick={this.handleAddUserButtonClick}>\n                  {translate('quality_profiles.grant_permissions_to_more_users')}\n                </Button>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {this.state.addUserForm && (\n          <ProfilePermissionsForm\n            onClose={this.handleAddUserFormClose}\n            onGroupAdd={this.handleGroupAdd}\n            onUserAdd={this.handleUserAdd}\n            organization={this.props.organization}\n            profile={this.props.profile}\n          />\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { find, without } from 'lodash';\nimport * as React from 'react';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport SelectList, {\n  SelectListFilter,\n  SelectListSearchParams\n} from 'sonar-ui-common/components/controls/SelectList';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport {\n  associateProject,\n  dissociateProject,\n  getProfileProjects,\n  ProfileProject\n} from '../../../api/quality-profiles';\nimport { Profile } from '../types';\n\ninterface Props {\n  onClose: () => void;\n  organization: string | null;\n  profile: Profile;\n}\n\ninterface State {\n  needToReload: boolean;\n  lastSearchParams?: SelectListSearchParams;\n  projects: ProfileProject[];\n  projectsTotalCount?: number;\n  selectedProjects: string[];\n}\n\nexport default class ChangeProjectsForm extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      needToReload: false,\n      projects: [],\n      selectedProjects: []\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchProjects = (searchParams: SelectListSearchParams) =>\n    getProfileProjects({\n      key: this.props.profile.key,\n      organization: this.props.organization,\n      p: searchParams.page,\n      ps: searchParams.pageSize,\n      q: searchParams.query !== '' ? searchParams.query : undefined,\n      selected: searchParams.filter\n    }).then(data => {\n      if (this.mounted) {\n        this.setState(prevState => {\n          const more = searchParams.page != null && searchParams.page > 1;\n\n          const projects = more ? [...prevState.projects, ...data.results] : data.results;\n          const newSeletedProjects = data.results\n            .filter(project => project.selected)\n            .map(project => project.key);\n          const selectedProjects = more\n            ? [...prevState.selectedProjects, ...newSeletedProjects]\n            : newSeletedProjects;\n\n          return {\n            lastSearchParams: searchParams,\n            needToReload: false,\n            projects,\n            projectsTotalCount: data.paging.total,\n            selectedProjects\n          };\n        });\n      }\n    });\n\n  handleSelect = (key: string) =>\n    associateProject(this.props.profile.key, key).then(() => {\n      if (this.mounted) {\n        this.setState((state: State) => ({\n          needToReload: true,\n          selectedProjects: [...state.selectedProjects, key]\n        }));\n      }\n    });\n\n  handleUnselect = (key: string) =>\n    dissociateProject(this.props.profile.key, key).then(() => {\n      if (this.mounted) {\n        this.setState((state: State) => ({\n          needToReload: true,\n          selectedProjects: without(state.selectedProjects, key)\n        }));\n      }\n    });\n\n  handleCloseClick = (event: React.SyntheticEvent<HTMLElement>) => {\n    event.preventDefault();\n    this.props.onClose();\n  };\n\n  renderElement = (key: string): React.ReactNode => {\n    const project = find(this.state.projects, { key });\n    return (\n      <div className=\"select-list-list-item\">\n        {project === undefined ? (\n          key\n        ) : (\n          <>\n            {project.name}\n            <br />\n            <span className=\"note\">{project.key}</span>\n          </>\n        )}\n      </div>\n    );\n  };\n\n  render() {\n    const header = translate('projects');\n\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose}>\n        <div className=\"modal-head\">\n          <h2>{header}</h2>\n        </div>\n\n        <div className=\"modal-body modal-container\" id=\"profile-projects\">\n          <SelectList\n            allowBulkSelection={true}\n            elements={this.state.projects.map(project => project.key)}\n            elementsTotalCount={this.state.projectsTotalCount}\n            labelAll={translate('quality_gates.projects.all')}\n            labelSelected={translate('quality_gates.projects.with')}\n            labelUnselected={translate('quality_gates.projects.without')}\n            needToReload={\n              this.state.needToReload &&\n              this.state.lastSearchParams &&\n              this.state.lastSearchParams.filter !== SelectListFilter.All\n            }\n            onSearch={this.fetchProjects}\n            onSelect={this.handleSelect}\n            onUnselect={this.handleUnselect}\n            renderElement={this.renderElement}\n            selectedElements={this.state.selectedProjects}\n            withPaging={true}\n          />\n        </div>\n\n        <div className=\"modal-foot\">\n          <a href=\"#\" onClick={this.handleCloseClick}>\n            {translate('close')}\n          </a>\n        </div>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport ListFooter from 'sonar-ui-common/components/controls/ListFooter';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getProfileProjects } from '../../../api/quality-profiles';\nimport { Profile } from '../types';\nimport ChangeProjectsForm from './ChangeProjectsForm';\n\ninterface Props {\n  organization: string | null;\n  profile: Profile;\n}\n\ninterface State {\n  formOpen: boolean;\n  loading: boolean;\n  loadingMore: boolean;\n  page: number;\n  projects: Array<{ key: string; name: string }>;\n  total: number;\n}\n\nexport default class ProfileProjects extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  state: State = {\n    formOpen: false,\n    loading: true,\n    loadingMore: false,\n    page: 1,\n    projects: [],\n    total: 0\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadProjects();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.profile.key !== this.props.profile.key) {\n      this.loadProjects();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  loadProjects() {\n    if (this.props.profile.isDefault) {\n      this.setState({ loading: false, projects: [] });\n      return;\n    }\n\n    this.setState({ loading: true });\n    const data = { key: this.props.profile.key, page: this.state.page };\n    getProfileProjects(data).then(({ paging, results }) => {\n      if (this.mounted) {\n        this.setState({\n          projects: results,\n          total: paging.total,\n          loading: false\n        });\n      }\n    }, this.stopLoading);\n  }\n\n  loadMore = () => {\n    this.setState({ loadingMore: true });\n    const data = { key: this.props.profile.key, page: this.state.page + 1 };\n    getProfileProjects(data).then(({ paging, results }) => {\n      if (this.mounted) {\n        this.setState(state => ({\n          projects: [...state.projects, ...results],\n          total: paging.total,\n          loadingMore: false\n        }));\n      }\n    }, this.stopLoading);\n  };\n\n  handleChangeClick = () => {\n    this.setState({ formOpen: true });\n  };\n\n  closeForm = () => {\n    this.setState({ formOpen: false });\n    this.loadProjects();\n  };\n\n  renderDefault() {\n    return (\n      <div>\n        <span className=\"badge spacer-right\">{translate('default')}</span>\n        {translate('quality_profiles.projects_for_default')}\n      </div>\n    );\n  }\n\n  renderProjects() {\n    if (this.state.loading) {\n      return <i className=\"spinner\" />;\n    }\n\n    const { projects } = this.state;\n\n    if (projects.length === 0) {\n      return <div>{translate('quality_profiles.no_projects_associated_to_profile')}</div>;\n    }\n\n    return (\n      <>\n        <ul>\n          {projects.map(project => (\n            <li className=\"spacer-top js-profile-project\" data-key={project.key} key={project.key}>\n              <Link\n                className=\"link-with-icon\"\n                to={{ pathname: '/dashboard', query: { id: project.key } }}>\n                <QualifierIcon qualifier=\"TRK\" /> <span>{project.name}</span>\n              </Link>\n            </li>\n          ))}\n        </ul>\n        <ListFooter\n          count={projects.length}\n          loadMore={this.loadMore}\n          ready={!this.state.loadingMore}\n          total={this.state.total}\n        />\n      </>\n    );\n  }\n\n  render() {\n    const { profile } = this.props;\n    return (\n      <div className=\"boxed-group quality-profile-projects\">\n        {profile.actions && profile.actions.associateProjects && (\n          <div className=\"boxed-group-actions\">\n            <Button className=\"js-change-projects\" onClick={this.handleChangeClick}>\n              {translate('quality_profiles.change_projects')}\n            </Button>\n          </div>\n        )}\n\n        <header className=\"boxed-group-header\">\n          <h2>{translate('projects')}</h2>\n        </header>\n\n        <div className=\"boxed-group-inner\">\n          {profile.isDefault ? this.renderDefault() : this.renderProjects()}\n        </div>\n\n        {this.state.formOpen && (\n          <ChangeProjectsForm\n            onClose={this.closeForm}\n            organization={this.props.organization}\n            profile={profile}\n          />\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getDeprecatedActiveRulesUrl } from '../../../helpers/urls';\n\ninterface Props {\n  activeDeprecatedRules: number;\n  organization: string | null;\n  profile: string;\n}\n\nexport default function ProfileRulesDeprecatedWarning(props: Props) {\n  return (\n    <div className=\"quality-profile-rules-deprecated clearfix\">\n      <span className=\"pull-left\">\n        <span className=\"text-middle\">{translate('quality_profiles.deprecated_rules')}</span>\n        <HelpTooltip\n          className=\"spacer-left\"\n          overlay={translate('quality_profiles.deprecated_rules_description')}\n        />\n      </span>\n      <Link\n        className=\"pull-right\"\n        to={getDeprecatedActiveRulesUrl({ qprofile: props.profile }, props.organization)}>\n        {props.activeDeprecatedRules}\n      </Link>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { getRulesUrl } from '../../../helpers/urls';\n\ninterface Props {\n  count: number | null;\n  organization: string | null;\n  qprofile: string;\n  total: number | null;\n  type: string;\n}\n\nexport default function ProfileRulesRowOfType(props: Props) {\n  const activeRulesUrl = getRulesUrl(\n    { qprofile: props.qprofile, activation: 'true', types: props.type },\n    props.organization\n  );\n  const inactiveRulesUrl = getRulesUrl(\n    { qprofile: props.qprofile, activation: 'false', types: props.type },\n    props.organization\n  );\n  let inactiveCount = null;\n  if (props.count != null && props.total != null) {\n    inactiveCount = props.total - props.count;\n  }\n\n  return (\n    <tr>\n      <td>\n        <span>\n          <IssueTypeIcon className=\"little-spacer-right\" query={props.type} />\n          {translate('issue.type', props.type, 'plural')}\n        </span>\n      </td>\n      <td className=\"thin nowrap text-right\">\n        {props.count != null && (\n          <Link to={activeRulesUrl}>{formatMeasure(props.count, 'SHORT_INT', null)}</Link>\n        )}\n      </td>\n      <td className=\"thin nowrap text-right\">\n        {inactiveCount != null &&\n          (inactiveCount > 0 ? (\n            <Link className=\"small text-muted\" to={inactiveRulesUrl}>\n              {formatMeasure(inactiveCount, 'SHORT_INT', null)}\n            </Link>\n          ) : (\n            <span className=\"note text-muted\">0</span>\n          ))}\n      </td>\n    </tr>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { getRulesUrl } from '../../../helpers/urls';\n\ninterface Props {\n  count: number | null;\n  organization: string | null;\n  qprofile: string;\n  total: number | null;\n}\n\nexport default function ProfileRulesRowTotal(props: Props) {\n  const activeRulesUrl = getRulesUrl(\n    { qprofile: props.qprofile, activation: 'true' },\n    props.organization\n  );\n  const inactiveRulesUrl = getRulesUrl(\n    { qprofile: props.qprofile, activation: 'false' },\n    props.organization\n  );\n  let inactiveCount = null;\n  if (props.count != null && props.total != null) {\n    inactiveCount = props.total - props.count;\n  }\n\n  return (\n    <tr>\n      <td>\n        <strong>{translate('total')}</strong>\n      </td>\n      <td className=\"thin nowrap text-right\">\n        {props.count != null && (\n          <Link to={activeRulesUrl}>\n            <strong>{formatMeasure(props.count, 'SHORT_INT', null)}</strong>\n          </Link>\n        )}\n      </td>\n      <td className=\"thin nowrap text-right\">\n        {inactiveCount != null &&\n          (inactiveCount > 0 ? (\n            <Link className=\"small text-muted\" to={inactiveRulesUrl}>\n              <strong>{formatMeasure(inactiveCount, 'SHORT_INT', null)}</strong>\n            </Link>\n          ) : (\n            <span className=\"note text-muted\">0</span>\n          ))}\n      </td>\n    </tr>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getRulesUrl } from '../../../helpers/urls';\n\ninterface Props {\n  language: string;\n  organization: string | null;\n  profile: string;\n  sonarway: string;\n  sonarWayMissingRules: number;\n}\n\nexport default function ProfileRulesSonarWayComparison(props: Props) {\n  const url = getRulesUrl(\n    {\n      qprofile: props.profile,\n      activation: 'false',\n      compareToProfile: props.sonarway,\n      languages: props.language\n    },\n    props.organization\n  );\n\n  return (\n    <div className=\"quality-profile-rules-sonarway-missing clearfix\">\n      <span className=\"pull-left\">\n        <span className=\"text-middle\">{translate('quality_profiles.sonarway_missing_rules')}</span>\n        <HelpTooltip\n          className=\"spacer-left\"\n          overlay={translate('quality_profiles.sonarway_missing_rules_description')}\n        />\n      </span>\n      <Link className=\"pull-right\" data-test=\"rules\" to={url}>\n        {props.sonarWayMissingRules}\n      </Link>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { keyBy } from 'lodash';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getQualityProfile } from '../../../api/quality-profiles';\nimport { searchRules, takeFacet } from '../../../api/rules';\nimport DocTooltip from '../../../components/docs/DocTooltip';\nimport { getRulesUrl } from '../../../helpers/urls';\nimport { Profile } from '../types';\nimport ProfileRulesDeprecatedWarning from './ProfileRulesDeprecatedWarning';\nimport ProfileRulesRowOfType from './ProfileRulesRowOfType';\nimport ProfileRulesRowTotal from './ProfileRulesRowTotal';\nimport ProfileRulesSonarWayComparison from './ProfileRulesSonarWayComparison';\n\nconst TYPES = ['BUG', 'VULNERABILITY', 'CODE_SMELL', 'SECURITY_HOTSPOT'];\n\ninterface Props {\n  organization: string | null;\n  profile: Profile;\n}\n\ninterface ByType {\n  val: string;\n  count: number | null;\n}\n\ninterface State {\n  activatedTotal: number | null;\n  activatedByType: T.Dict<ByType>;\n  allByType: T.Dict<ByType>;\n  compareToSonarWay: { profile: string; profileName: string; missingRuleCount: number } | null;\n  total: number | null;\n}\n\nexport default class ProfileRules extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  state: State = {\n    activatedTotal: null,\n    activatedByType: keyBy(TYPES.map(t => ({ val: t, count: null })), 'val'),\n    allByType: keyBy(TYPES.map(t => ({ val: t, count: null })), 'val'),\n    compareToSonarWay: null,\n    total: null\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadRules();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.profile.key !== this.props.profile.key) {\n      this.loadRules();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadProfile() {\n    if (this.props.profile.isBuiltIn) {\n      return Promise.resolve(null);\n    }\n    return getQualityProfile({\n      compareToSonarWay: true,\n      profile: this.props.profile.key\n    });\n  }\n\n  loadAllRules() {\n    return searchRules({\n      languages: this.props.profile.language,\n      facets: 'types',\n      organization: this.props.organization || undefined,\n      ps: 1\n    });\n  }\n\n  loadActivatedRules() {\n    return searchRules({\n      activation: 'true',\n      facets: 'types',\n      organization: this.props.organization || undefined,\n      ps: 1,\n      qprofile: this.props.profile.key\n    });\n  }\n\n  loadRules() {\n    Promise.all([this.loadAllRules(), this.loadActivatedRules(), this.loadProfile()]).then(\n      responses => {\n        if (this.mounted) {\n          const [allRules, activatedRules, showProfile] = responses;\n          this.setState({\n            activatedTotal: activatedRules.total,\n            allByType: keyBy<ByType>(takeFacet(allRules, 'types'), 'val'),\n            activatedByType: keyBy<ByType>(takeFacet(activatedRules, 'types'), 'val'),\n            compareToSonarWay: showProfile && showProfile.compareToSonarWay,\n            total: allRules.total\n          });\n        }\n      }\n    );\n  }\n\n  getRulesCountForType(type: string) {\n    return this.state.activatedByType && this.state.activatedByType[type]\n      ? this.state.activatedByType[type].count\n      : null;\n  }\n\n  getRulesTotalForType(type: string) {\n    return this.state.allByType && this.state.allByType[type]\n      ? this.state.allByType[type].count\n      : null;\n  }\n\n  render() {\n    const { organization, profile } = this.props;\n    const { compareToSonarWay } = this.state;\n    const activateMoreUrl = getRulesUrl(\n      { qprofile: profile.key, activation: 'false' },\n      organization\n    );\n    const { actions = {} } = profile;\n\n    return (\n      <div className=\"boxed-group quality-profile-rules\">\n        <div className=\"quality-profile-rules-distribution\">\n          <table className=\"data condensed\">\n            <thead>\n              <tr>\n                <th>\n                  <h2>{translate('rules')}</h2>\n                </th>\n                <th>{translate('active')}</th>\n                <th>{translate('inactive')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              <ProfileRulesRowTotal\n                count={this.state.activatedTotal}\n                organization={organization}\n                qprofile={profile.key}\n                total={this.state.total}\n              />\n              {TYPES.map(type => (\n                <ProfileRulesRowOfType\n                  count={this.getRulesCountForType(type)}\n                  key={type}\n                  organization={organization}\n                  qprofile={profile.key}\n                  total={this.getRulesTotalForType(type)}\n                  type={type}\n                />\n              ))}\n            </tbody>\n          </table>\n\n          {actions.edit && !profile.isBuiltIn && (\n            <div className=\"text-right big-spacer-top\">\n              <Link className=\"button js-activate-rules\" to={activateMoreUrl}>\n                {translate('quality_profiles.activate_more')}\n              </Link>\n            </div>\n          )}\n\n          {/* if a user is allowed to `copy` a profile if they are a global or organization admin */}\n          {/* this user could potentially active more rules if the profile was not built-in */}\n          {/* in such cases it's better to show the button but disable it with a tooltip */}\n          {actions.copy && profile.isBuiltIn && (\n            <div className=\"text-right big-spacer-top\">\n              <DocTooltip\n                doc={import(/* webpackMode: \"eager\" */ 'Docs/tooltips/quality-profiles/activate-rules-in-built-in-profile.md')}>\n                <Button className=\"disabled js-activate-rules\">\n                  {translate('quality_profiles.activate_more')}\n                </Button>\n              </DocTooltip>\n            </div>\n          )}\n        </div>\n        {profile.activeDeprecatedRuleCount > 0 && (\n          <ProfileRulesDeprecatedWarning\n            activeDeprecatedRules={profile.activeDeprecatedRuleCount}\n            organization={organization}\n            profile={profile.key}\n          />\n        )}\n        {compareToSonarWay != null && compareToSonarWay.missingRuleCount > 0 && (\n          <ProfileRulesSonarWayComparison\n            language={profile.language}\n            organization={organization}\n            profile={profile.key}\n            sonarWayMissingRules={compareToSonarWay.missingRuleCount}\n            sonarway={compareToSonarWay.profile}\n          />\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Exporter, Profile } from '../types';\nimport ProfileExporters from './ProfileExporters';\nimport ProfileInheritance from './ProfileInheritance';\nimport ProfilePermissions from './ProfilePermissions';\nimport ProfileProjects from './ProfileProjects';\nimport ProfileRules from './ProfileRules';\n\ninterface Props {\n  exporters: Exporter[];\n  organization: string | null;\n  profile: Profile;\n  profiles: Profile[];\n  updateProfiles: () => Promise<void>;\n}\n\nexport default function ProfileDetails(props: Props) {\n  const { organization, profile } = props;\n  return (\n    <div>\n      <div className=\"quality-profile-grid\">\n        <div className=\"quality-profile-grid-left\">\n          <ProfileRules organization={organization} profile={profile} />\n          <ProfileExporters\n            exporters={props.exporters}\n            organization={organization}\n            profile={profile}\n          />\n          {profile.actions && profile.actions.edit && !profile.isBuiltIn && (\n            <ProfilePermissions organization={organization || undefined} profile={profile} />\n          )}\n        </div>\n        <div className=\"quality-profile-grid-right\">\n          <ProfileInheritance\n            organization={organization}\n            profile={profile}\n            profiles={props.profiles}\n            updateProfiles={props.updateProfiles}\n          />\n          <ProfileProjects organization={organization} profile={profile} />\n        </div>\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport { lazyLoad } from 'sonar-ui-common/components/lazyLoad';\nimport { filterContent } from '../../helpers/markdown';\n\nconst DocMarkdownBlock = lazyLoad(() => import('./DocMarkdownBlock'));\n\ninterface Props {\n  className?: string;\n  children?: React.ReactNode;\n  // Use as `import(/* webpackMode: \"eager\" */ 'Docs/tooltips/foo/bar.md')`\n  doc: Promise<{ default: string }>;\n  overlayProps?: T.Dict<string>;\n}\n\ninterface State {\n  content?: string;\n  open: boolean;\n}\n\nexport default class DocTooltip extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { open: false };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.props.doc.then(\n      ({ default: content }) => {\n        if (this.mounted) {\n          this.setState({ content });\n        }\n      },\n      () => {}\n    );\n    document.addEventListener('scroll', this.close, true);\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    document.removeEventListener('scroll', this.close, true);\n  }\n\n  close = () => {\n    if (this.mounted) {\n      this.setState({ open: false });\n    }\n  };\n\n  render() {\n    return this.state.content ? (\n      <HelpTooltip\n        className={this.props.className}\n        overlay={\n          <div className=\"abs-width-300\">\n            <DocMarkdownBlock\n              childProps={this.props.overlayProps}\n              className=\"cut-margins\"\n              content={filterContent(this.state.content)}\n              isTooltip={true}\n            />\n          </div>\n        }>\n        {this.props.children}\n      </HelpTooltip>\n    ) : (\n      this.props.children || null\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { map } from 'lodash';\nimport { csvEscape } from 'sonar-ui-common/helpers/csv';\nimport { getJSON, post, postJSON, RequestData } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport interface ProfileActions {\n  associateProjects?: boolean;\n  copy?: boolean;\n  delete?: boolean;\n  edit?: boolean;\n  setAsDefault?: boolean;\n}\n\nexport interface Actions {\n  create?: boolean;\n}\n\nexport interface Profile {\n  actions?: ProfileActions;\n  key: string;\n  name: string;\n  language: string;\n  languageName: string;\n  isInherited?: boolean;\n  parentKey?: string;\n  parentName?: string;\n  isDefault?: boolean;\n  activeRuleCount: number;\n  activeDeprecatedRuleCount: number;\n  rulesUpdatedAt?: string;\n  lastUsed?: string;\n  userUpdatedAt?: string;\n  organization: string;\n  isBuiltIn?: boolean;\n  projectCount?: number;\n}\n\nexport interface SearchQualityProfilesParameters {\n  defaults?: boolean;\n  language?: string;\n  organization?: string;\n  project?: string;\n  qualityProfile?: string;\n}\n\nexport interface SearchQualityProfilesResponse {\n  actions?: Actions;\n  profiles: Profile[];\n}\n\nexport function searchQualityProfiles(\n  parameters: SearchQualityProfilesParameters\n): Promise<SearchQualityProfilesResponse> {\n  return getJSON('/api/qualityprofiles/search', parameters).catch(throwGlobalError);\n}\n\nexport function getQualityProfile(data: {\n  compareToSonarWay?: boolean;\n  profile: string;\n}): Promise<any> {\n  return getJSON('/api/qualityprofiles/show', data);\n}\n\nexport function createQualityProfile(data: RequestData): Promise<any> {\n  return postJSON('/api/qualityprofiles/create', data).catch(throwGlobalError);\n}\n\nexport function restoreQualityProfile(data: RequestData): Promise<any> {\n  return postJSON('/api/qualityprofiles/restore', data).catch(throwGlobalError);\n}\n\nexport interface ProfileProject {\n  id: number;\n  key: string;\n  name: string;\n  selected: boolean;\n}\n\nexport function getProfileProjects(\n  data: RequestData\n): Promise<{ more: boolean; paging: T.Paging; results: ProfileProject[] }> {\n  return getJSON('/api/qualityprofiles/projects', data).catch(throwGlobalError);\n}\n\nexport function getProfileInheritance(\n  profileKey: string\n): Promise<{\n  ancestors: T.ProfileInheritanceDetails[];\n  children: T.ProfileInheritanceDetails[];\n  profile: T.ProfileInheritanceDetails;\n}> {\n  return getJSON('/api/qualityprofiles/inheritance', { profileKey }).catch(throwGlobalError);\n}\n\nexport function setDefaultProfile(profileKey: string) {\n  return post('/api/qualityprofiles/set_default', { profileKey });\n}\n\nexport function renameProfile(key: string, name: string) {\n  return post('/api/qualityprofiles/rename', { key, name }).catch(throwGlobalError);\n}\n\nexport function copyProfile(fromKey: string, toName: string): Promise<any> {\n  return postJSON('/api/qualityprofiles/copy', { fromKey, toName }).catch(throwGlobalError);\n}\n\nexport function deleteProfile(profileKey: string) {\n  return post('/api/qualityprofiles/delete', { profileKey }).catch(throwGlobalError);\n}\n\nexport function changeProfileParent(profileKey: string, parentKey: string) {\n  return post('/api/qualityprofiles/change_parent', {\n    profileKey,\n    parentKey\n  }).catch(throwGlobalError);\n}\n\nexport function getImporters(): Promise<\n  Array<{ key: string; languages: Array<string>; name: string }>\n> {\n  return getJSON('/api/qualityprofiles/importers').then(r => r.importers, throwGlobalError);\n}\n\nexport function getExporters(): Promise<any> {\n  return getJSON('/api/qualityprofiles/exporters').then(r => r.exporters);\n}\n\nexport function getProfileChangelog(data: RequestData): Promise<any> {\n  return getJSON('/api/qualityprofiles/changelog', data);\n}\n\nexport interface CompareResponse {\n  left: { name: string };\n  right: { name: string };\n  inLeft: Array<{ key: string; name: string; severity: string }>;\n  inRight: Array<{ key: string; name: string; severity: string }>;\n  modified: Array<{\n    key: string;\n    name: string;\n    left: { params: T.Dict<string>; severity: string };\n    right: { params: T.Dict<string>; severity: string };\n  }>;\n}\n\nexport function compareProfiles(leftKey: string, rightKey: string): Promise<CompareResponse> {\n  return getJSON('/api/qualityprofiles/compare', { leftKey, rightKey });\n}\n\nexport function associateProject(key: string, project: string) {\n  return post('/api/qualityprofiles/add_project', { key, project }).catch(throwGlobalError);\n}\n\nexport function dissociateProject(key: string, project: string) {\n  return post('/api/qualityprofiles/remove_project', { key, project }).catch(throwGlobalError);\n}\n\nexport interface SearchUsersGroupsParameters {\n  language: string;\n  organization?: string;\n  qualityProfile: string;\n  q?: string;\n  selected?: 'all' | 'selected' | 'deselected';\n}\n\ninterface SearchUsersResponse {\n  users: T.UserSelected[];\n  paging: T.Paging;\n}\n\nexport function searchUsers(parameters: SearchUsersGroupsParameters): Promise<SearchUsersResponse> {\n  return getJSON('/api/qualityprofiles/search_users', parameters).catch(throwGlobalError);\n}\n\nexport interface SearchGroupsResponse {\n  groups: Array<{ name: string }>;\n  paging: T.Paging;\n}\n\nexport function searchGroups(\n  parameters: SearchUsersGroupsParameters\n): Promise<SearchGroupsResponse> {\n  return getJSON('/api/qualityprofiles/search_groups', parameters).catch(throwGlobalError);\n}\n\nexport interface AddRemoveUserParameters {\n  language: string;\n  login: string;\n  organization?: string;\n  qualityProfile: string;\n}\n\nexport function addUser(parameters: AddRemoveUserParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/add_user', parameters).catch(throwGlobalError);\n}\n\nexport function removeUser(parameters: AddRemoveUserParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/remove_user', parameters).catch(throwGlobalError);\n}\n\nexport interface AddRemoveGroupParameters {\n  group: string;\n  language: string;\n  organization?: string;\n  qualityProfile: string;\n}\n\nexport function addGroup(parameters: AddRemoveGroupParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/add_group', parameters).catch(throwGlobalError);\n}\n\nexport function removeGroup(parameters: AddRemoveGroupParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/remove_group', parameters).catch(throwGlobalError);\n}\n\nexport interface BulkActivateParameters {\n  activation?: boolean;\n  active_severities?: string;\n  asc?: boolean;\n  available_since?: string;\n  compareToProfile?: string;\n  inheritance?: string;\n  is_template?: string;\n  languages?: string;\n  organization: string | undefined;\n  q?: string;\n  qprofile?: string;\n  repositories?: string;\n  rule_key?: string;\n  s?: string;\n  severities?: string;\n  statuses?: string;\n  tags?: string;\n  targetKey: string;\n  targetSeverity?: string;\n  template_key?: string;\n  types?: string;\n}\n\nexport function bulkActivateRules(data: BulkActivateParameters) {\n  return postJSON('/api/qualityprofiles/activate_rules', data);\n}\n\nexport function bulkDeactivateRules(data: BulkActivateParameters) {\n  return postJSON('/api/qualityprofiles/deactivate_rules', data);\n}\n\nexport function activateRule(data: {\n  key: string;\n  organization: string | undefined;\n  params?: T.Dict<string>;\n  reset?: boolean;\n  rule: string;\n  severity?: string;\n}) {\n  const params =\n    data.params && map(data.params, (value, key) => `${key}=${csvEscape(value)}`).join(';');\n  return post('/api/qualityprofiles/activate_rule', { ...data, params }).catch(throwGlobalError);\n}\n\nexport function deactivateRule(data: {\n  key: string;\n  organization: string | undefined;\n  rule: string;\n}) {\n  return post('/api/qualityprofiles/deactivate_rule', data).catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// keep this file in JavaScript, because it is used by a webpack loader\nmodule.exports = { getFrontMatter, separateFrontMatter, filterContent };\n\nfunction getFrontMatter(content) {\n  const lines = content.split('\\n');\n  const position = getFrontMatterPosition(lines);\n  return position ? parseFrontMatter(lines.slice(position.firstLine + 1, position.lastLine)) : {};\n}\n\nfunction separateFrontMatter(content) {\n  const lines = content.split('\\n');\n  const position = getFrontMatterPosition(lines);\n  if (position) {\n    const frontmatter = parseFrontMatter(lines.slice(position.firstLine + 1, position.lastLine));\n    const content = lines.slice(position.lastLine + 1).join('\\n');\n    return { frontmatter, content };\n  } else {\n    return { frontmatter: {}, content };\n  }\n}\n\nfunction getFrontMatterPosition(lines) {\n  let firstLine;\n  let lastLine;\n  for (let i = 0; i < lines.length; i++) {\n    const line = lines[i];\n    if (line.trim() === '---') {\n      if (firstLine === undefined) {\n        firstLine = i;\n      } else {\n        lastLine = i;\n        break;\n      }\n    }\n  }\n  return lastLine !== undefined ? { firstLine, lastLine } : undefined;\n}\n\nfunction parseFrontMatter(lines) {\n  const data = {};\n  for (let i = 0; i < lines.length; i++) {\n    const tokens = lines[i].split(':').map(x => x.trim());\n    if (tokens.length === 2) {\n      data[tokens[0]] = tokens[1];\n    }\n  }\n  return data;\n}\n\n/**\n * @param {string} content\n * @returns {string}\n */\nfunction filterContent(content) {\n  const regexBase = '<!-- \\\\/?(sonarqube|sonarcloud|static) -->';\n  const { isSonarCloud, getInstance } = require('./system');\n  const contentWithInstance = content.replace(/{instance}/gi, getInstance());\n  const contentWithoutStatic = cutConditionalContent(contentWithInstance, 'static');\n  const filteredContent = isSonarCloud()\n    ? cutConditionalContent(contentWithoutStatic, 'sonarqube')\n    : cutConditionalContent(contentWithoutStatic, 'sonarcloud');\n  return filteredContent\n    .replace(new RegExp(`^${regexBase}(\\n|\\r|\\r\\n|$)`, 'gm'), '') // First, remove single-line ones, including ending carriage-returns.\n    .replace(new RegExp(`${regexBase}`, 'g'), ''); // Now remove all remaining ones.\n}\n\n/**\n * @param {string} content\n * @param {string} tag\n * @returns {string}\n */\nfunction cutConditionalContent(content, tag) {\n  const beginning = `<!-- ${tag} -->`;\n  const ending = `<!-- /${tag} -->`;\n\n  let newContent = content;\n  let start = newContent.indexOf(beginning);\n  let end = newContent.indexOf(ending);\n  while (start !== -1 && end !== -1) {\n    newContent = newContent.substring(0, start) + newContent.substring(end + ending.length);\n    start = newContent.indexOf(beginning);\n    end = newContent.indexOf(ending);\n  }\n\n  return newContent;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post, postJSON } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport interface GetRulesAppResponse {\n  canWrite?: boolean;\n  repositories: { key: string; language: string; name: string }[];\n}\n\nexport function getRulesApp(data: {\n  organization: string | undefined;\n}): Promise<GetRulesAppResponse> {\n  return getJSON('/api/rules/app', data).catch(throwGlobalError);\n}\n\nexport interface SearchRulesResponse {\n  actives?: T.Dict<T.RuleActivation[]>;\n  facets?: { property: string; values: { count: number; val: string }[] }[];\n  p: number;\n  ps: number;\n  rules: T.Rule[];\n  total: number;\n}\n\nexport function searchRules(data: {\n  organization: string | undefined;\n  [x: string]: any;\n}): Promise<SearchRulesResponse> {\n  return getJSON('/api/rules/search', data).catch(throwGlobalError);\n}\n\nexport function takeFacet(response: any, property: string) {\n  const facet = response.facets.find((facet: any) => facet.property === property);\n  return facet ? facet.values : [];\n}\n\nexport function getRuleDetails(parameters: {\n  actives?: boolean;\n  key: string;\n  organization: string | undefined;\n}): Promise<{ actives?: T.RuleActivation[]; rule: T.RuleDetails }> {\n  return getJSON('/api/rules/show', parameters).catch(throwGlobalError);\n}\n\nexport function getRuleTags(parameters: {\n  organization: string | undefined;\n  ps?: number;\n  q: string;\n}): Promise<string[]> {\n  return getJSON('/api/rules/tags', parameters).then(r => r.tags, throwGlobalError);\n}\n\nexport function createRule(data: {\n  custom_key: string;\n  markdown_description: string;\n  name: string;\n  organization: string | undefined;\n  params?: string;\n  prevent_reactivation?: boolean;\n  severity?: string;\n  status?: string;\n  template_key: string;\n  type?: string;\n}): Promise<T.RuleDetails> {\n  return postJSON('/api/rules/create', data).then(\n    r => r.rule,\n    response => {\n      // do not show global error if the status code is 409\n      // this case should be handled inside a component\n      if (response && response.status === 409) {\n        return Promise.reject(response);\n      } else {\n        return throwGlobalError(response);\n      }\n    }\n  );\n}\n\nexport function deleteRule(parameters: { key: string; organization: string | undefined }) {\n  return post('/api/rules/delete', parameters).catch(throwGlobalError);\n}\n\nexport function updateRule(data: {\n  key: string;\n  markdown_description?: string;\n  markdown_note?: string;\n  name?: string;\n  organization: string | undefined;\n  params?: string;\n  remediation_fn_base_effort?: string;\n  remediation_fn_type?: string;\n  remediation_fy_gap_multiplier?: string;\n  severity?: string;\n  status?: string;\n  tags?: string;\n}): Promise<T.RuleDetails> {\n  return postJSON('/api/rules/update', data).then(r => r.rule, throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport DocTooltip from '../../../components/docs/DocTooltip';\n\ninterface Props {\n  className?: string;\n  tooltip?: boolean;\n}\n\nexport default function BuiltInQualityProfileBadge({ className, tooltip = true }: Props) {\n  const badge = (\n    <div className={classNames('badge badge-info', className)}>\n      {translate('quality_profiles.built_in')}\n    </div>\n  );\n\n  if (tooltip) {\n    return (\n      <DocTooltip\n        doc={import(/* webpackMode: \"eager\" */ 'Docs/tooltips/quality-profiles/built-in-quality-profile.md')}>\n        {badge}\n      </DocTooltip>\n    );\n  }\n  return badge;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { getProfilePath } from '../utils';\n\ninterface Props {\n  className?: string;\n  children?: React.ReactElement<any> | string;\n  language: string;\n  name: string;\n  organization: string | null;\n}\n\nexport default function ProfileLink({ name, language, organization, children, ...other }: Props) {\n  return (\n    <Link\n      activeClassName=\"link-no-underline\"\n      to={getProfilePath(name, language, organization)}\n      {...other}>\n      {children}\n    </Link>\n  );\n}\n","export default \"Built-in profiles are provided directly by the language analyzers and may be updated with each new analyzer version. They represent best-practice, minimum rule sets.\\n\""],"sourceRoot":""}