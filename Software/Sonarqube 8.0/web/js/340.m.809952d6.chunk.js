(window.webpackJsonp=window.webpackJsonp||[]).push([[340],{1723:function(e,t,a){var o=a(1724);"string"==typeof o&&(o=[[e.i,o,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};a(313)(o,s);o.locals&&(e.exports=o.locals)},1724:function(e,t,a){(e.exports=a(312)(!1)).push([e.i,".badges-list{display:flex;justify-content:space-around;justify-content:space-evenly;flex-wrap:nowrap}.badge-button{display:flex;justify-content:center;padding:8px;min-width:146px;height:116px;background-color:#f3f3f3;border:1px solid #e6e6e6;border-radius:3px;transition:all .3s ease}.badge-button:active,.badge-button:focus,.badge-button:hover{background-color:#f3f3f3;border-color:#4b9fd5;box-shadow:none}.badge-button.selected{background-color:#cae3f2;border-color:#236a97}",""])},1803:function(e,t,a){"use strict";a.r(t);var o,s=a(2),n=a(310),r=a(327),c=a.n(r),i=a(5),l=a(389),p=a(331),d=a(22),u=a(309),m=a(33),b=a(8),h=a(322),g=a(319);function f(e,t){const a=v(e,t),s=t.branch,n=t.format,r=void 0===n?"md":n,c=t.metric,l=void 0===c?"alert_status":c,p=t.project;if("url"===r)return a;{let t,n;switch(e){case o.marketing:t="SonarCloud";break;case o.measure:t=Object(i.getLocalizedMetricName)({key:l});break;case o.qualityGate:default:t="Quality gate"}p&&(n=Object(h.getPathUrlAsString)(Object(g.s)(p,s),!1));const r="![".concat(t,"](").concat(a,")");return n?"[".concat(r,"](").concat(n,")"):r}}function v(e,t){let a=t.branch,s=t.project,n=t.color,r=void 0===n?"white":n,c=t.metric,i=void 0===c?"alert_status":c,l=t.pullRequest;switch(e){case o.marketing:return"".concat(Object(h.getHostUrl)(),"/images/project_badges/sonarcloud-").concat(r,".svg");case o.qualityGate:return"".concat(Object(h.getHostUrl)(),"/api/project_badges/quality_gate?").concat(Object(m.stringify)(Object(b.omitNil)({branch:a,project:s,pullRequest:l})));case o.measure:default:return"".concat(Object(h.getHostUrl)(),"/api/project_badges/measure?").concat(Object(m.stringify)(Object(b.omitNil)({branch:a,project:s,metric:i,pullRequest:l})))}}!function(e){e.measure="measure",e.qualityGate="quality_gate",e.marketing="marketing"}(o||(o={}));class O extends s.PureComponent{constructor(){super(...arguments),this.handleClick=()=>{this.props.onClick(this.props.type)}}render(){const e=this.props,t=e.selected,a=e.type,r=e.url,c=a!==o.measure?"128px":void 0;return s.createElement(n.Button,{className:u("badge-button",{selected:t}),onClick:this.handleClick},s.createElement("img",{alt:Object(i.translate)("overview.badges",a,"alt"),src:r,width:c}))}}var j=a(338),w=a.n(j),y=a(822);class k extends s.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={badgeMetrics:[]},this.getColorOptions=()=>["white","black","orange"].map(e=>({label:Object(i.translate)("overview.badges.options.colors",e),value:e})),this.getFormatOptions=()=>["md","url"].map(e=>({label:Object(i.translate)("overview.badges.options.formats",e),value:e})),this.getMetricOptions=()=>this.state.badgeMetrics.map(e=>{const t=this.props.metrics[e];return{value:e,label:t?Object(i.getLocalizedMetricName)(t):e}}),this.handleColorChange=e=>{let t=e.value;this.props.updateOptions({color:t})},this.handleFormatChange=e=>{let t=e.value;this.props.updateOptions({format:t})},this.handleMetricChange=e=>{let t=e.value;this.props.updateOptions({metric:t})},this.renderBadgeType=(e,t)=>e===o.marketing?s.createElement(s.Fragment,null,s.createElement("label",{className:"spacer-right",htmlFor:"badge-color"},Object(i.translate)("color"),":"),s.createElement(w.a,{className:"input-medium",clearable:!1,name:"badge-color",onChange:this.handleColorChange,options:this.getColorOptions(),searchable:!1,value:t.color})):e===o.measure?s.createElement(s.Fragment,null,s.createElement("label",{className:"spacer-right",htmlFor:"badge-metric"},Object(i.translate)("overview.badges.metric"),":"),s.createElement(w.a,{className:"input-medium",clearable:!1,name:"badge-metric",onChange:this.handleMetricChange,options:this.getMetricOptions(),searchable:!1,value:t.metric})):null}componentDidMount(){this.mounted=!0,this.fetchBadgeMetrics()}componentWillUnmount(){this.mounted=!1}fetchBadgeMetrics(){Object(y.b)(!1).then(e=>{if(this.mounted){const t=e.find(e=>"api/project_badges"===e.path),a=t&&t.actions.find(e=>"measure"===e.key),o=a&&a.params&&a.params.find(e=>"metric"===e.key);o&&o.possibleValues&&this.setState({badgeMetrics:o.possibleValues})}},()=>{})}render(){const e=this.props,t=e.className,a=e.options,n=e.type;return s.createElement("div",{className:t},this.renderBadgeType(n,a),s.createElement("label",{className:u("spacer-right",{"big-spacer-left":n!==o.qualityGate}),htmlFor:"badge-format"},Object(i.translate)("format"),":"),s.createElement(w.a,{className:"input-medium",clearable:!1,name:"badge-format",onChange:this.handleFormatChange,options:this.getFormatOptions(),searchable:!1,value:this.props.options.format||"md"}))}}a(1723);a.d(t,"default",function(){return C});class C extends s.PureComponent{constructor(){super(...arguments),this.state={open:!1,selectedType:o.measure,badgeOptions:{color:"white",metric:"alert_status"}},this.handleClose=()=>{this.setState({open:!1})},this.handleOpen=()=>{this.setState({open:!0})},this.handleSelectBadge=e=>{this.setState({selectedType:e})},this.handleUpdateOptions=e=>{this.setState(t=>({badgeOptions:Object.assign({},t.badgeOptions,e)}))}}render(){const e=this.props,t=e.branchLike,a=e.project,r=e.qualifier,u=this.state,m=u.selectedType,b=u.badgeOptions,h=Object(i.translate)("overview.badges.title"),g=Object.assign({project:a},b,Object(p.d)(t)),j=Object(d.isSonarCloud)()?[o.measure,o.qualityGate,o.marketing]:[o.measure,o.qualityGate];return s.createElement("div",{className:"overview-meta-card"},s.createElement(n.Button,{className:"js-project-badges",onClick:this.handleOpen},Object(i.translate)("overview.badges.get_badge",r)),this.state.open&&s.createElement(c.a,{contentLabel:h,onRequestClose:this.handleClose},s.createElement("header",{className:"modal-head"},s.createElement("h2",null,h)),s.createElement("div",{className:"modal-body"},s.createElement("p",{className:"huge-spacer-bottom"},Object(i.translate)("overview.badges.description",r)),s.createElement("div",{className:"badges-list spacer-bottom"},j.map(e=>s.createElement(O,{key:e,onClick:this.handleSelectBadge,selected:e===m,type:e,url:v(e,g)}))),s.createElement("p",{className:"text-center note huge-spacer-bottom"},Object(i.translate)("overview.badges",m,"description",r)),s.createElement(k,{className:"big-spacer-bottom",metrics:this.props.metrics,options:b,type:m,updateOptions:this.handleUpdateOptions}),s.createElement(l.a,{isOneLine:!0,snippet:f(m,g)})),s.createElement("footer",{className:"modal-foot"},s.createElement(n.ResetButtonLink,{className:"js-modal-close",onClick:this.handleClose},Object(i.translate)("close")))))}}},389:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var o=a(309),s=a(2),n=a(501);a(734);const r=" \\\n  ";function c(e){let t=e.className,a=e.isOneLine,c=e.noCopy,i=e.render,l=e.snippet,p=e.wrap;const d=Array.isArray(l)?l.filter(e=>void 0!==e):[l],u=a?d.join(" "):d.join(r);return s.createElement("div",{className:o("code-snippet",{"code-snippet-oneline":a,"code-snippet-wrap":p},t)},s.createElement("pre",null,i?i():u),!c&&s.createElement(n.ClipboardButton,{copyValue:u}))}},734:function(e,t,a){var o=a(735);"string"==typeof o&&(o=[[e.i,o,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};a(313)(o,s);o.locals&&(e.exports=o.locals)},735:function(e,t,a){(e.exports=a(312)(!1)).push([e.i,".code-snippet{position:relative;margin:8px 0;background:#404040;color:#f0f0f0;border-radius:3px}.code-snippet pre{padding:16px;overflow:auto}.code-snippet>button{position:absolute;top:16px;right:16px;line-height:18px;border:1px solid #fff;color:#fff;font-size:11px;font-weight:400;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.code-snippet>button:active,.code-snippet>button:focus,.code-snippet>button:hover{background-color:#fff;color:#404040}.code-snippet-oneline pre{padding-bottom:40px}.code-snippet-oneline>button{top:auto;bottom:16px}.code-snippet-wrap pre{white-space:pre-wrap;word-break:break-all}.code-snippet .highlight{font-weight:700;color:#f4b1b0}.code-snippet .button-icon{color:#fff!important}.code-snippet .button-icon:active svg,.code-snippet .button-icon:focus svg,.code-snippet .button-icon:hover svg{background-color:#fff;color:#404040}",""])},822:function(e,t,a){"use strict";a.d(t,"b",function(){return n}),a.d(t,"a",function(){return r});var o=a(8),s=a(320);function n(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Object(o.getJSON)("/api/webservices/list",{include_internals:e}).then(e=>e.webServices).catch(s.a)}function r(e,t){return Object(o.getJSON)("/api/webservices/response_example",{controller:e,action:t}).catch(s.a)}}}]);
//# sourceMappingURL=340.m.809952d6.chunk.js.map