{"version":3,"sources":["webpack:///./src/main/js/app/components/notifications/NotificationsSidebar.tsx","webpack:///./src/main/js/components/intl/DateFormatter.tsx","webpack:///./node_modules/date-fns/difference_in_milliseconds/index.js","webpack:///./node_modules/exenv/index.js","webpack:///./node_modules/date-fns/difference_in_seconds/index.js"],"names":["__webpack_require__","r","__webpack_exports__","d","NotificationsSidebar","isUnread","Notification","Feature","classnames__WEBPACK_IMPORTED_MODULE_0__","date_fns_difference_in_seconds__WEBPACK_IMPORTED_MODULE_1__","react__WEBPACK_IMPORTED_MODULE_2__","sonar_ui_common_components_controls_buttons__WEBPACK_IMPORTED_MODULE_3__","sonar_ui_common_components_controls_Modal__WEBPACK_IMPORTED_MODULE_4__","sonar_ui_common_components_controls_Modal__WEBPACK_IMPORTED_MODULE_4___default","n","sonar_ui_common_components_ui_DeferredSpinner__WEBPACK_IMPORTED_MODULE_5__","sonar_ui_common_components_ui_DeferredSpinner__WEBPACK_IMPORTED_MODULE_5___default","sonar_ui_common_helpers_l10n__WEBPACK_IMPORTED_MODULE_6__","_components_intl_DateFormatter__WEBPACK_IMPORTED_MODULE_7__","props","loading","loadingMore","news","notificationsLastReadDate","paging","header","Object","a","contentLabel","onRequestClose","onClose","className","iconProps","size","thin","onClick","timeout","map","slice","index","key","publicationDate","notification","unread","total","length","href","fetchMoreFeatureNews","notificationDate","lastReadDate","_a","date","long","features","feature","categories","category","name","style","backgroundColor","color","description","readMore","rel","target","formatterOption","year","month","day","longFormatterOption","DateFormatter","children","react__WEBPACK_IMPORTED_MODULE_0__","react_intl__WEBPACK_IMPORTED_MODULE_1__","__assign","value","sonar_ui_common_helpers_dates__WEBPACK_IMPORTED_MODULE_2__","parse","module","exports","dirtyDateLeft","dirtyDateRight","dateLeft","dateRight","getTime","__WEBPACK_AMD_DEFINE_RESULT__","canUseDOM","window","document","createElement","ExecutionEnvironment","canUseWorkers","Worker","canUseEventListeners","addEventListener","attachEvent","canUseViewport","screen","undefined","call","differenceInMilliseconds","diff","Math","floor","ceil"],"mappings":"6FAAAA,EAAAC,EAAAC,GAAAF,EAAAG,EAAAD,EAAA,4BAAAE,IAAAJ,EAAAG,EAAAD,EAAA,6BAAAG,IAAAL,EAAAG,EAAAD,EAAA,iCAAAI,IAAAN,EAAAG,EAAAD,EAAA,4BAAAK,IAAA,IAAAC,EAAAR,EAAA,KAAAS,EAAAT,EAAA,KAAAU,EAAAV,EAAA,IAAAW,EAAAX,EAAA,KAAAY,EAAAZ,EAAA,KAAAa,EAAAb,EAAAc,EAAAF,GAAAG,EAAAf,EAAA,KAAAgB,EAAAhB,EAAAc,EAAAC,GAAAE,EAAAjB,EAAA,IAAAkB,EAAAlB,EAAA,KAuCc,SAAUI,EAAqBe,GACnC,IAAAC,EAAAD,EAAAC,QAASC,EAAAF,EAAAE,YAAaC,EAAAH,EAAAG,KAAMC,EAAAJ,EAAAI,0BAA2BC,EAAAL,EAAAK,OACzDC,EAASC,OAAAT,EAAA,UAAAS,CAAU,wBACzB,OACEhB,EAAA,cAACG,EAAAc,EAAK,CAACC,aAAcH,EAAQI,eAAgBV,EAAMW,SACjDpB,EAAA,qBAAKqB,UAAU,yBACbrB,EAAA,qBAAKqB,UAAU,6BACbrB,EAAA,wBAAKe,GACLf,EAAA,cAACC,EAAA,YAAW,CACVoB,UAAU,cACVC,UAAW,CAAEC,KAAM,GAAIC,MAAM,GAC7BC,QAAShB,EAAMW,WAGnBpB,EAAA,qBAAKqB,UAAU,iCACZX,EACCV,EAAA,qBAAKqB,UAAU,eACbrB,EAAA,cAACM,EAAAW,EAAe,CAACI,UAAU,iBAAiBK,QAAS,OAGvDd,EAAKe,IAAI,SAACC,EAAOC,GAAU,OACzB7B,EAAA,cAACJ,EAAY,CACXkC,IAAKF,EAAMG,gBACXC,aAAcJ,EACdK,OAAQtC,EAASkC,EAAOD,EAAMG,gBAJPlB,SAS7BH,GAAWI,GAAUA,EAAOoB,MAAQtB,EAAKuB,QACzCnC,EAAA,qBAAKqB,UAAU,gCACbrB,EAAA,qBAAKqB,UAAU,+BACbrB,EAAA,mBAAGqB,UAAU,cAAce,KAAK,IAAIX,QAAShB,EAAM4B,sBAChDrB,OAAAT,EAAA,UAAAS,CAAU,cAEZL,GACCX,EAAA,cAACM,EAAAW,EAAe,CAACI,UAAU,kDAUrC,SAAU1B,EAASkC,EAAeS,EAA0BC,GAChE,OAAQA,EAA2BxC,EAAoBuC,EAAkBC,GAAgB,EAAlEV,EAAQ,EAQ3B,SAAUjC,EAAa4C,OAAER,EAAAQ,EAAAR,aAAcC,EAAAO,EAAAP,OAC3C,OACEjC,EAAA,qBAAKqB,UAAWvB,EAAW,8BAA+B,CAAEmC,OAAMA,KAChEjC,EAAA,wBACEA,EAAA,cAACQ,EAAA,EAAa,CAACiC,KAAMT,EAAaD,gBAAiBW,MAAM,KAE1DV,EAAaW,SAAShB,IAAI,SAACiB,EAASf,GAAU,OAC7C7B,EAAA,cAACH,EAAO,CAAC+C,QAASA,EAASd,IADkBD,OAW/C,SAAUhC,EAAQ2C,OAAEI,EAAAJ,EAAAI,QACxB,OACE5C,EAAA,qBAAKqB,UAAU,WACbrB,EAAA,oBAAIqB,UAAU,4BACXuB,EAAQC,WAAWlB,IAAI,SAAAmB,GAAY,OAClC9C,EAAA,oBAAI8B,IAAKgB,EAASC,KAAMC,MAAO,CAAEC,gBAAiBH,EAASI,QACxDJ,EAF+BC,SAMtC/C,EAAA,0BAAO4C,EAAQO,aACdP,EAAQQ,UACPpD,EAAA,mBACEqB,UAAU,aACVe,KAAMQ,EAAQQ,SACdC,IAAI,+BACJC,OAAO,UACNtC,OAAAT,EAAA,UAAAS,CAAU,gWCnGRuC,EAAkB,CAAEC,KAAM,UAAWC,MAAO,QAASC,IAAK,WAE1DC,EAAsB,CAAEH,KAAM,UAAWC,MAAO,OAAQC,IAAK,WAE5D,SAAUE,EAAcpB,OAAEqB,EAAArB,EAAAqB,SAAUpB,EAAAD,EAAAC,KAAMC,EAAAF,EAAAE,KACtD,OACEoB,EAAA,cAACC,EAAA,cAAaC,EAAA,CAACC,MAAOjD,OAAAkD,EAAA,UAAAlD,CAAUyB,IAAYC,EAAOiB,EAAsBJ,GACtEM,yBCpCP,IAAAM,EAAY7E,EAAQ,KA4BpB8E,EAAAC,QANA,SAAAC,EAAAC,GACA,IAAAC,EAAAL,EAAAG,GACAG,EAAAN,EAAAI,GACA,OAAAC,EAAAE,UAAAD,EAAAC,gCCzBA,IAAAC;;;;;;;;;;;CAOA,WACA,aAEA,IAAAC,IACA,oBAAAC,SACAA,OAAAC,WACAD,OAAAC,SAAAC,eAGAC,EAAA,CAEAJ,YAEAK,cAAA,oBAAAC,OAEAC,qBACAP,MAAAC,OAAAO,mBAAAP,OAAAQ,aAEAC,eAAAV,KAAAC,OAAAU,aAOGC,KAFDb,EAAA,WACF,OAAAK,GACGS,KAAApB,EAAA/E,EAAA+E,EAAAD,QAAAC,QAAAM,GAzBH,wBCPA,IAAAe,EAA+BpG,EAAQ,KA2BvC8E,EAAAC,QALA,SAAAC,EAAAC,GACA,IAAAoB,EAAAD,EAAApB,EAAAC,GAAA,IACA,OAAAoB,EAAA,EAAAC,KAAAC,MAAAF,GAAAC,KAAAE,KAAAH","file":"js/353.1570825310815.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as differenceInSeconds from 'date-fns/difference_in_seconds';\nimport * as React from 'react';\nimport { ClearButton } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { PrismicFeatureNews } from '../../../api/news';\nimport DateFormatter from '../../../components/intl/DateFormatter';\n\nexport interface Props {\n  fetchMoreFeatureNews: () => void;\n  loading: boolean;\n  loadingMore: boolean;\n  news: PrismicFeatureNews[];\n  onClose: () => void;\n  notificationsLastReadDate?: Date;\n  paging?: T.Paging;\n}\n\nexport default function NotificationsSidebar(props: Props) {\n  const { loading, loadingMore, news, notificationsLastReadDate, paging } = props;\n  const header = translate('embed_docs.whats_new');\n  return (\n    <Modal contentLabel={header} onRequestClose={props.onClose}>\n      <div className=\"notifications-sidebar\">\n        <div className=\"notifications-sidebar-top\">\n          <h3>{header}</h3>\n          <ClearButton\n            className=\"button-tiny\"\n            iconProps={{ size: 12, thin: true }}\n            onClick={props.onClose}\n          />\n        </div>\n        <div className=\"notifications-sidebar-content\">\n          {loading ? (\n            <div className=\"text-center\">\n              <DeferredSpinner className=\"big-spacer-top\" timeout={200} />\n            </div>\n          ) : (\n            news.map((slice, index) => (\n              <Notification\n                key={slice.publicationDate}\n                notification={slice}\n                unread={isUnread(index, slice.publicationDate, notificationsLastReadDate)}\n              />\n            ))\n          )}\n        </div>\n        {!loading && paging && paging.total > news.length && (\n          <div className=\"notifications-sidebar-footer\">\n            <div className=\"spacer-top note text-center\">\n              <a className=\"spacer-left\" href=\"#\" onClick={props.fetchMoreFeatureNews}>\n                {translate('show_more')}\n              </a>\n              {loadingMore && (\n                <DeferredSpinner className=\"text-bottom spacer-left position-absolute\" />\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n    </Modal>\n  );\n}\n\nexport function isUnread(index: number, notificationDate: string, lastReadDate?: Date) {\n  return !lastReadDate ? index < 1 : differenceInSeconds(notificationDate, lastReadDate) > 0;\n}\n\ninterface NotificationProps {\n  notification: PrismicFeatureNews;\n  unread: boolean;\n}\n\nexport function Notification({ notification, unread }: NotificationProps) {\n  return (\n    <div className={classNames('notifications-sidebar-slice', { unread })}>\n      <h4>\n        <DateFormatter date={notification.publicationDate} long={false} />\n      </h4>\n      {notification.features.map((feature, index) => (\n        <Feature feature={feature} key={index} />\n      ))}\n    </div>\n  );\n}\n\ninterface FeatureProps {\n  feature: PrismicFeatureNews['features'][0];\n}\n\nexport function Feature({ feature }: FeatureProps) {\n  return (\n    <div className=\"feature\">\n      <ul className=\"categories spacer-bottom\">\n        {feature.categories.map(category => (\n          <li key={category.name} style={{ backgroundColor: category.color }}>\n            {category.name}\n          </li>\n        ))}\n      </ul>\n      <span>{feature.description}</span>\n      {feature.readMore && (\n        <a\n          className=\"learn-more\"\n          href={feature.readMore}\n          rel=\"noopener noreferrer nofollow\"\n          target=\"_blank\">\n          {translate('learn_more')}\n        </a>\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedDate } from 'react-intl';\nimport { parseDate } from 'sonar-ui-common/helpers/dates';\n\ninterface Props {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n  long?: boolean;\n}\n\nexport const formatterOption = { year: 'numeric', month: 'short', day: '2-digit' };\n\nexport const longFormatterOption = { year: 'numeric', month: 'long', day: 'numeric' };\n\nexport default function DateFormatter({ children, date, long }: Props) {\n  return (\n    <FormattedDate value={parseDate(date)} {...(long ? longFormatterOption : formatterOption)}>\n      {children}\n    </FormattedDate>\n  );\n}\n","var parse = require('../parse/index.js')\n\n/**\n * @category Millisecond Helpers\n * @summary Get the number of milliseconds between the given dates.\n *\n * @description\n * Get the number of milliseconds between the given dates.\n *\n * @param {Date|String|Number} dateLeft - the later date\n * @param {Date|String|Number} dateRight - the earlier date\n * @returns {Number} the number of milliseconds\n *\n * @example\n * // How many milliseconds are between\n * // 2 July 2014 12:30:20.600 and 2 July 2014 12:30:21.700?\n * var result = differenceInMilliseconds(\n *   new Date(2014, 6, 2, 12, 30, 21, 700),\n *   new Date(2014, 6, 2, 12, 30, 20, 600)\n * )\n * //=> 1100\n */\nfunction differenceInMilliseconds (dirtyDateLeft, dirtyDateRight) {\n  var dateLeft = parse(dirtyDateLeft)\n  var dateRight = parse(dirtyDateRight)\n  return dateLeft.getTime() - dateRight.getTime()\n}\n\nmodule.exports = differenceInMilliseconds\n","/*!\n  Copyright (c) 2015 Jed Watson.\n  Based on code that is Copyright 2013-2015, Facebook, Inc.\n  All rights reserved.\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar canUseDOM = !!(\n\t\ttypeof window !== 'undefined' &&\n\t\twindow.document &&\n\t\twindow.document.createElement\n\t);\n\n\tvar ExecutionEnvironment = {\n\n\t\tcanUseDOM: canUseDOM,\n\n\t\tcanUseWorkers: typeof Worker !== 'undefined',\n\n\t\tcanUseEventListeners:\n\t\t\tcanUseDOM && !!(window.addEventListener || window.attachEvent),\n\n\t\tcanUseViewport: canUseDOM && !!window.screen\n\n\t};\n\n\tif (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\tdefine(function () {\n\t\t\treturn ExecutionEnvironment;\n\t\t});\n\t} else if (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = ExecutionEnvironment;\n\t} else {\n\t\twindow.ExecutionEnvironment = ExecutionEnvironment;\n\t}\n\n}());\n","var differenceInMilliseconds = require('../difference_in_milliseconds/index.js')\n\n/**\n * @category Second Helpers\n * @summary Get the number of seconds between the given dates.\n *\n * @description\n * Get the number of seconds between the given dates.\n *\n * @param {Date|String|Number} dateLeft - the later date\n * @param {Date|String|Number} dateRight - the earlier date\n * @returns {Number} the number of seconds\n *\n * @example\n * // How many seconds are between\n * // 2 July 2014 12:30:07.999 and 2 July 2014 12:30:20.000?\n * var result = differenceInSeconds(\n *   new Date(2014, 6, 2, 12, 30, 20, 0),\n *   new Date(2014, 6, 2, 12, 30, 7, 999)\n * )\n * //=> 12\n */\nfunction differenceInSeconds (dirtyDateLeft, dirtyDateRight) {\n  var diff = differenceInMilliseconds(dirtyDateLeft, dirtyDateRight) / 1000\n  return diff > 0 ? Math.floor(diff) : Math.ceil(diff)\n}\n\nmodule.exports = differenceInSeconds\n"],"sourceRoot":""}