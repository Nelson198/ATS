{"version":3,"sources":["webpack:///./src/main/js/components/workspace/WorkspaceComponentTitle.tsx","webpack:///./src/main/js/components/workspace/WorkspaceHeader.tsx","webpack:///./src/main/js/components/workspace/WorkspaceComponentViewer.tsx","webpack:///./node_modules/sonar-ui-common/components/icons/QualifierIcon.js","webpack:///./src/main/js/components/SourceViewer/SourceViewer.tsx"],"names":["__webpack_require__","d","__webpack_exports__","WorkspaceComponentTitle","react__WEBPACK_IMPORTED_MODULE_0__","sonar_ui_common_components_icons_QualifierIcon__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_components_icons_QualifierIcon__WEBPACK_IMPORTED_MODULE_1___default","n","sonar_ui_common_helpers_path__WEBPACK_IMPORTED_MODULE_2__","_ref","component","limited","_component$name","name","qualifier","a","className","Object","WorkspaceHeader","react_draggable__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_components_controls_buttons__WEBPACK_IMPORTED_MODULE_2__","sonar_ui_common_components_icons_ClearIcon__WEBPACK_IMPORTED_MODULE_3__","sonar_ui_common_components_icons_ClearIcon__WEBPACK_IMPORTED_MODULE_3___default","sonar_ui_common_components_icons_CollapseIcon__WEBPACK_IMPORTED_MODULE_4__","sonar_ui_common_components_icons_CollapseIcon__WEBPACK_IMPORTED_MODULE_4___default","sonar_ui_common_components_icons_ExpandIcon__WEBPACK_IMPORTED_MODULE_5__","sonar_ui_common_components_icons_ExpandIcon__WEBPACK_IMPORTED_MODULE_5___default","sonar_ui_common_components_icons_MinimizeIcon__WEBPACK_IMPORTED_MODULE_6__","sonar_ui_common_components_icons_MinimizeIcon__WEBPACK_IMPORTED_MODULE_6___default","sonar_ui_common_helpers_l10n__WEBPACK_IMPORTED_MODULE_7__","[object Object]","this","handleDrag","_event","data","props","onResize","deltaY","children","offsetParent","document","body","onDrag","WorkspaceHeaderButton","icon","onClick","onCollapse","tooltip","maximized","onMinimize","onMaximize","onClose","Icon","color","fill","undefined","WorkspaceComponentViewer","react__WEBPACK_IMPORTED_MODULE_1__","super","handleClose","key","handleIssueChange","_","refreshBranchStatus","handleLoaded","onLoad","path","q","container","line","row","querySelector","concat","sonar_ui_common_helpers_scrolling__WEBPACK_IMPORTED_MODULE_3__","smooth","parent","topOffset","bottomOffset","branchLike","_helpers_branches__WEBPACK_IMPORTED_MODULE_5__","_api_components__WEBPACK_IMPORTED_MODULE_4__","then","parents","length","fetchBranchStatus","pop","lodash_debounce__WEBPACK_IMPORTED_MODULE_0___default","documentElement","classList","add","remove","_WorkspaceHeader__WEBPACK_IMPORTED_MODULE_9__","_WorkspaceComponentTitle__WEBPACK_IMPORTED_MODULE_8__","ref","node","style","height","_SourceViewer_SourceViewer__WEBPACK_IMPORTED_MODULE_7__","aroundLine","highlightedLine","onIssueChange","onLoaded","mapDispatchToProps","_store_rootActions__WEBPACK_IMPORTED_MODULE_6__","react_redux__WEBPACK_IMPORTED_MODULE_2__","defineProperty","exports","value","React","Icon_1","qualifierIcons","app","_a","size","createElement","ThemedIcon","theme","colors","blue","brc","dev","dir","DirectoryIcon","fil","svw","trk","ProjectIcon","uts","UnitTestIcon","vw","cla","dev_prj","lib","pac","orange","default","toLowerCase","FoundIcon","sonar_ui_common_components_lazyLoad__WEBPACK_IMPORTED_MODULE_0__","SourceViewer","Promise","all","e","bind"],"mappings":"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","file":"js/354.m.db2b207f.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport { collapsePath } from 'sonar-ui-common/helpers/path';\nimport { ComponentDescriptor } from './context';\n\ninterface Props {\n  component: ComponentDescriptor;\n  limited?: boolean;\n}\n\nexport default function WorkspaceComponentTitle({ component, limited }: Props) {\n  const { name = '—' } = component;\n  return (\n    <>\n      {component.qualifier && (\n        <QualifierIcon className=\"little-spacer-right\" qualifier={component.qualifier} />\n      )}\n      {limited ? collapsePath(name, 15) : name}\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DraggableCore, DraggableData } from 'react-draggable';\nimport { ButtonIcon } from 'sonar-ui-common/components/controls/buttons';\nimport ClearIcon from 'sonar-ui-common/components/icons/ClearIcon';\nimport CollapseIcon from 'sonar-ui-common/components/icons/CollapseIcon';\nimport ExpandIcon from 'sonar-ui-common/components/icons/ExpandIcon';\nimport { IconProps } from 'sonar-ui-common/components/icons/Icon';\nimport MinimizeIcon from 'sonar-ui-common/components/icons/MinimizeIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\nexport interface Props {\n  children: React.ReactNode;\n  maximized?: boolean;\n  onClose: () => void;\n  onCollapse: () => void;\n  onMaximize: () => void;\n  onMinimize: () => void;\n  onResize: (deltaY: number) => void;\n}\n\nexport default class WorkspaceHeader extends React.PureComponent<Props> {\n  handleDrag = (_event: MouseEvent, data: DraggableData) => {\n    this.props.onResize(data.deltaY);\n  };\n\n  render() {\n    return (\n      <header className=\"workspace-viewer-header\">\n        <h6 className=\"workspace-viewer-name\">{this.props.children}</h6>\n\n        <DraggableCore offsetParent={document.body} onDrag={this.handleDrag}>\n          <div className=\"workspace-viewer-resize js-resize\" />\n        </DraggableCore>\n\n        <div className=\"workspace-viewer-actions\">\n          <WorkspaceHeaderButton\n            icon={MinimizeIcon}\n            onClick={this.props.onCollapse}\n            tooltip=\"workspace.minimize\"\n          />\n\n          {this.props.maximized ? (\n            <WorkspaceHeaderButton\n              icon={CollapseIcon}\n              onClick={this.props.onMinimize}\n              tooltip=\"workspace.normal_size\"\n            />\n          ) : (\n            <WorkspaceHeaderButton\n              icon={ExpandIcon}\n              onClick={this.props.onMaximize}\n              tooltip=\"workspace.full_window\"\n            />\n          )}\n\n          <WorkspaceHeaderButton\n            icon={ClearIcon}\n            onClick={this.props.onClose}\n            tooltip=\"workspace.close\"\n          />\n        </div>\n      </header>\n    );\n  }\n}\n\ninterface WorkspaceHeaderButtonProps {\n  icon: React.SFC<IconProps>;\n  onClick: () => void;\n  tooltip: string;\n}\n\nfunction WorkspaceHeaderButton({ icon: Icon, onClick, tooltip }: WorkspaceHeaderButtonProps) {\n  return (\n    <ButtonIcon\n      className=\"workspace-header-icon\"\n      color=\"#fff\"\n      onClick={onClick}\n      tooltip={translate(tooltip)}>\n      <Icon fill={undefined} />\n    </ButtonIcon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { debounce } from 'lodash';\nimport { scrollToElement } from 'sonar-ui-common/helpers/scrolling';\nimport { getParents } from '../../api/components';\nimport { isPullRequest, isShortLivingBranch } from '../../helpers/branches';\nimport { fetchBranchStatus } from '../../store/rootActions';\nimport SourceViewer from '../SourceViewer/SourceViewer';\nimport { ComponentDescriptor } from './context';\nimport WorkspaceComponentTitle from './WorkspaceComponentTitle';\nimport WorkspaceHeader, { Props as WorkspaceHeaderProps } from './WorkspaceHeader';\n\nexport interface Props extends T.Omit<WorkspaceHeaderProps, 'children' | 'onClose'> {\n  component: ComponentDescriptor;\n  fetchBranchStatus: (branchLike: T.BranchLike, projectKey: string) => Promise<void>;\n  height: number;\n  onClose: (componentKey: string) => void;\n  onLoad: (details: { key: string; name: string; qualifier: string }) => void;\n}\n\nexport class WorkspaceComponentViewer extends React.PureComponent<Props> {\n  container?: HTMLElement | null;\n\n  constructor(props: Props) {\n    super(props);\n    this.refreshBranchStatus = debounce(this.refreshBranchStatus, 1000);\n  }\n\n  componentDidMount() {\n    if (document.documentElement) {\n      document.documentElement.classList.add('with-workspace');\n    }\n  }\n\n  componentWillUnmount() {\n    if (document.documentElement) {\n      document.documentElement.classList.remove('with-workspace');\n    }\n  }\n\n  handleClose = () => {\n    this.props.onClose(this.props.component.key);\n  };\n\n  handleIssueChange = (_: T.Issue) => {\n    this.refreshBranchStatus();\n  };\n\n  handleLoaded = (component: T.SourceViewerFile) => {\n    this.props.onLoad({\n      key: this.props.component.key,\n      name: component.path,\n      qualifier: component.q\n    });\n\n    if (this.container && this.props.component.line) {\n      const row = this.container.querySelector(\n        `.source-line[data-line-number=\"${this.props.component.line}\"]`\n      );\n      if (row) {\n        scrollToElement(row, {\n          smooth: false,\n          parent: this.container,\n          topOffset: 50,\n          bottomOffset: 50\n        });\n      }\n    }\n  };\n\n  refreshBranchStatus = () => {\n    const { component } = this.props;\n    const { branchLike } = component;\n    if (branchLike && (isPullRequest(branchLike) || isShortLivingBranch(branchLike))) {\n      getParents(component.key).then(\n        (parents?: any[]) => {\n          if (parents && parents.length > 0) {\n            this.props.fetchBranchStatus(branchLike, parents.pop().key);\n          }\n        },\n        () => {}\n      );\n    }\n  };\n\n  render() {\n    const { component } = this.props;\n\n    return (\n      <div className=\"workspace-viewer\">\n        <WorkspaceHeader\n          maximized={this.props.maximized}\n          onClose={this.handleClose}\n          onCollapse={this.props.onCollapse}\n          onMaximize={this.props.onMaximize}\n          onMinimize={this.props.onMinimize}\n          onResize={this.props.onResize}>\n          <WorkspaceComponentTitle component={component} />\n        </WorkspaceHeader>\n\n        <div\n          className=\"workspace-viewer-container\"\n          ref={node => (this.container = node)}\n          style={{ height: this.props.height }}>\n          <SourceViewer\n            aroundLine={component.line}\n            branchLike={component.branchLike}\n            component={component.key}\n            highlightedLine={component.line}\n            onIssueChange={this.handleIssueChange}\n            onLoaded={this.handleLoaded}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapDispatchToProps = { fetchBranchStatus: fetchBranchStatus as any };\n\nexport default connect(\n  null,\n  mapDispatchToProps\n)(WorkspaceComponentViewer);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar Icon_1 = require(\"./Icon\");\nvar qualifierIcons = {\n    app: ApplicationIcon,\n    brc: SubProjectIcon,\n    dev: DeveloperIcon,\n    dir: DirectoryIcon,\n    fil: FileIcon,\n    svw: SubPortfolioIcon,\n    trk: ProjectIcon,\n    uts: UnitTestIcon,\n    vw: PortfolioIcon,\n    cla: UnitTestIcon,\n    dev_prj: ProjectIcon,\n    lib: LibraryIcon,\n    pac: DirectoryIcon\n};\nfunction QualifierIcon(props) {\n    if (!props.qualifier) {\n        return null;\n    }\n    var qualifier = props.qualifier.toLowerCase();\n    var FoundIcon = qualifierIcons[qualifier];\n    return FoundIcon ? React.createElement(FoundIcon, { className: props.className, fill: props.fill }) : null;\n}\nexports.default = QualifierIcon;\nfunction ApplicationIcon(_a) {\n    var className = _a.className, fill = _a.fill, size = _a.size;\n    return (React.createElement(Icon_1.ThemedIcon, { className: className, size: size }, function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M3.014 10.986a2 2 0 1 1-.001 4.001 2 2 0 0 1 .001-4.001zm9.984 0a2 2 0 1 1-.001 4.001 2 2 0 0 1 .001-4.001zm-5.004-.021c1.103 0 2 .896 2 2s-.897 2-2 2a2 2 0 0 1 0-4zm-4.98 1.021a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm9.984 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm-5.004-.021a1 1 0 1 1 0 2 1 1 0 0 1 0-2zM2.984 6a2 2 0 1 1-.001 4.001A2 2 0 0 1 2.984 6zm9.984 0a2 2 0 1 1-.001 4.001A2 2 0 0 1 12.968 6zm-5.004-.021c1.103 0 2 .897 2 2a2 2 0 1 1-2-2zM2.984 7a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm9.984 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm-5.004-.021a1.001 1.001 0 0 1 0 2 1 1 0 0 1 0-2zM3 1.025a2 2 0 1 1-.001 4.001A2 2 0 0 1 3 1.025zm9.984 0a2 2 0 1 1-.001 4.001 2 2 0 0 1 .001-4.001zM7.98 1.004c1.103 0 2 .896 2 2s-.897 2-2 2a2 2 0 0 1 0-4zM3 2.025a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm9.984 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2zM7.98 2.004a1.001 1.001 0 0 1 0 2 1 1 0 0 1 0-2z\", style: { fill: fill || theme.colors.blue } }));\n    }));\n}\nfunction DeveloperIcon(_a) {\n    var className = _a.className, fill = _a.fill, size = _a.size;\n    return (React.createElement(Icon_1.ThemedIcon, { className: className, size: size }, function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M7.974 8.02a3.5 3.5 0 0 1-2.482-1.017 3.428 3.428 0 0 1-1.028-2.455c0-.927.365-1.8 1.028-2.455a3.505 3.505 0 0 1 2.482-1.017 3.5 3.5 0 0 1 2.482 1.017 3.434 3.434 0 0 1 1.027 2.455c0 .928-.365 1.8-1.027 2.455A3.504 3.504 0 0 1 7.974 8.02zm0-5.778c-1.286 0-2.332 1.034-2.332 2.306s1.046 2.307 2.332 2.307c1.285 0 2.332-1.035 2.332-2.307S9.258 2.242 7.974 2.242zm3.534 6.418c.127.016.243.045.348.086.17.066.302.146.406.246.132.124.253.282.36.47.126.218.226.442.3.668.08.253.15.535.206.838.056.313.095.604.113.867.02.28.03.57.03.862 0 .532-.174.758-.306.882-.142.132-.397.31-.973.31H3.948c-.233 0-.437-.03-.606-.09-.14-.05-.26-.123-.366-.222-.13-.123-.306-.35-.306-.88 0-.294.01-.584.03-.863.018-.263.056-.554.112-.867a6.5 6.5 0 0 1 .207-.838c.073-.226.173-.45.298-.667.108-.19.23-.347.36-.47.106-.1.238-.18.407-.247.105-.04.22-.07.348-.086.202.13.432.277.683.435.342.217.756.4 1.265.564.523.166 1.06.25 1.59.25a5.25 5.25 0 0 0 1.592-.25c.51-.164.923-.348 1.266-.565.25-.158.48-.304.682-.435l-.002.002zm-.244-1.18c-.055 0-.184.066-.387.196-.202.13-.43.276-.685.437-.255.16-.586.307-.994.437-.408.13-.818.196-1.23.196-.41 0-.82-.065-1.228-.196a4.303 4.303 0 0 1-.993-.437c-.255-.16-.484-.306-.686-.437-.202-.13-.33-.196-.386-.196-.374 0-.716.06-1.026.183-.31.12-.572.283-.787.487a3.28 3.28 0 0 0-.57.737 4.662 4.662 0 0 0-.395.888c-.098.303-.18.633-.244.988a9.652 9.652 0 0 0-.128.992c-.02.306-.032.62-.032.942 0 .73.224 1.304.672 1.726.448.42 1.043.632 1.785.632h8.044c.743 0 1.34-.21 1.787-.633.447-.42.67-.996.67-1.725 0-.32-.01-.635-.03-.942a9.159 9.159 0 0 0-.374-1.98c-.098-.304-.23-.6-.395-.888a3.23 3.23 0 0 0-.57-.737 2.404 2.404 0 0 0-.788-.487 2.779 2.779 0 0 0-1.026-.183h-.004z\", style: { fill: fill || theme.colors.blue } }));\n    }));\n}\nfunction DirectoryIcon(_a) {\n    var className = _a.className, fill = _a.fill, size = _a.size;\n    return (React.createElement(Icon_1.ThemedIcon, { className: className, size: size }, function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M14 12.286V5.703a.673.673 0 0 0-.195-.5.644.644 0 0 0-.49-.203H6.704a.686.686 0 0 1-.5-.214.707.707 0 0 1-.203-.51v-.57c0-.2-.07-.363-.207-.502A.679.679 0 0 0 5.29 3H2.707a.672.672 0 0 0-.5.204.683.683 0 0 0-.206.5v8.582c0 .2.07.367.206.506.137.14.304.208.5.208h10.61a.66.66 0 0 0 .49-.208.685.685 0 0 0 .194-.506H14zm1-6.598v6.65c0 .458-.152.83-.475 1.16-.324.326-.7.502-1.15.502H2.647c-.452 0-.84-.175-1.162-.503a1.572 1.572 0 0 1-.486-1.158V3.654a1.6 1.6 0 0 1 .486-1.17A1.578 1.578 0 0 1 2.648 2h2.7c.45 0 .84.157 1.164.485.324.328.488.714.488 1.17V4h6.373c.452 0 .83.174 1.152.5.323.33.475.73.475 1.187v.001z\", style: { fill: fill || theme.colors.orange } }));\n    }));\n}\nfunction FileIcon(_a) {\n    var className = _a.className, fill = _a.fill, size = _a.size;\n    return (React.createElement(Icon_1.ThemedIcon, { className: className, size: size }, function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M14 15H2V1l7.997.02c1 .034 1.759.758 2.428 1.42.667.663 1.561 1.605 1.574 2.555H14V15zM9 2H3v12h10V6H9V2zm3 10H4v-1h8v1zm0-2H4V9h8v1zm-1.988-5h3.008c-.012-.674-.714-1.443-1.204-1.937-.488-.495-1.039-1.058-1.816-1.055v2.96l.012.032z\", style: { fill: fill || theme.colors.blue } }));\n    }));\n}\nfunction LibraryIcon(_a) {\n    var className = _a.className, fill = _a.fill, size = _a.size;\n    return (React.createElement(Icon_1.ThemedIcon, { className: className, size: size }, function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M1 13h4V3H1v10zm3-1H2v-2h2v2zM2 4h2v4H2V4zm4 9h4V3H6v10zm3-1H7v-2h2v2zM7 4h2v4H7V4zm4 9h4V3h-4v10zm3-1h-2v-2h2v2zm-2-8h2v4h-2V4z\", style: { fill: fill || theme.colors.blue } }));\n    }));\n}\nfunction PortfolioIcon(_a) {\n    var className = _a.className, fill = _a.fill, size = _a.size;\n    return (React.createElement(Icon_1.ThemedIcon, { className: className, size: size }, function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M14.97 14.97H1.016V1.015H14.97V14.97zm-1-12.955H2.015V13.97H13.97V2.015zm-.973 10.982H9V9h3.997v3.997zM7 12.996H3.004V9H7v3.996zM11.997 10H10v1.997h1.997V10zM6 10H4.004v1.996H6V10zm1-3H3.006V3.006H7V7zm5.985 0H9V3.015h3.985V7zM6 4.006H4.006V6H6V4.006zm5.985.009H10V6h1.985V4.015z\", style: { fill: fill || theme.colors.blue } }));\n    }));\n}\nfunction ProjectIcon(_a) {\n    var className = _a.className, fill = _a.fill, size = _a.size;\n    return (React.createElement(Icon_1.ThemedIcon, { className: className, size: size }, function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M14.985 13.988L1 14.005 1.02 5h13.966v8.988h-.001zM1.998 5.995l.006 7.02L14.022 13 14 6.004l-12.002-.01v.001zM3 4.5V4h9.996l.004.5h1l-.005-1.497-11.98.003L2 4.5h1zm1-2v-.504h8.002L12 2.5h1l-.004-1.495H3.003L3 2.5h1z\", style: { fill: fill || theme.colors.blue } }));\n    }));\n}\nfunction SubPortfolioIcon(_a) {\n    var className = _a.className, fill = _a.fill, size = _a.size;\n    return (React.createElement(Icon_1.ThemedIcon, { className: className, size: size }, function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M14 7h2v9H7v-2H0V0h14v7zM8 8v7h7V8H8zm3 6H9v-2h2v2zm3 0h-2v-2h2v2zm-1-7V1H1v12h6V7h6zm-7 5H2V8h4v4zm5-1H9V9h2v2zm3 0h-2V9h2v2zM5 9H3v2h2V9zm1-3H2V2h4v4zm6 0H8V2h4v4zM5 3H3v2h2V3zm6 0H9v2h2V3z\", style: { fill: fill || theme.colors.blue } }));\n    }));\n}\nfunction SubProjectIcon(_a) {\n    var className = _a.className, fill = _a.fill, size = _a.size;\n    return (React.createElement(Icon_1.ThemedIcon, { className: className, size: size }, function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M8 9V8h6v1h1v1h1v6H6v-6h1V9h1zm7 2H7v4h8v-4zm-1-7v3h-1V5H1v7h4v1H0V4h14zm-1-2v1.5h-1V3H2v.5H1V2h12zm-1-2v1.5h-1V1H3v.5H2V0h10z\", style: { fill: fill || theme.colors.blue } }));\n    }));\n}\nfunction UnitTestIcon(_a) {\n    var className = _a.className, fill = _a.fill, size = _a.size;\n    return (React.createElement(Icon_1.ThemedIcon, { className: className, size: size }, function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"path\", { d: \"M14 15H2V1l7.997.02c1.013-.03 1.57.893 2.239 1.555.667.663 1.75 1.47 1.763 2.42H14V15zM9 2H3v12h10V6H9V2zM7 8l-3 2.5L7 13V8zm1 5l3-2.5L8 8v5zm2.012-8h3.008c-.012-.674-.78-1.258-1.27-1.752-.488-.495-.973-1.243-1.75-1.24v2.96l.012.032z\", style: { fill: fill || theme.colors.blue } }));\n    }));\n}\n//# sourceMappingURL=QualifierIcon.js.map","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoad } from 'sonar-ui-common/components/lazyLoad';\n\nconst SourceViewer = lazyLoad(\n  () => import(/* webpackPrefetch: true */ './SourceViewerBase'),\n  'SourceViewer'\n);\nexport default SourceViewer;\n"],"sourceRoot":""}