(window.webpackJsonp=window.webpackJsonp||[]).push([[362],{1458:function(e,t,a){"use strict";a.r(t);var n,r=a(639),i=a(12),l=a(640),o=a(657),s=a.n(o),c=a(668),u=a.n(c),p=a(656),m=a(34),d=a(683),v=a(710),f=a(785),h=a(788),y=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),g=function(){return(g=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},b=function(e){function t(t){var a=e.call(this,t)||this;a.mounted=!1,a.getParams=function(e){var t=void 0===e?a.props:e,n=t.activation,r=t.rule,i={};if(r&&r.params){for(var l=0,o=r.params;l<o.length;l++){i[(u=o[l]).key]=u.defaultValue||""}if(n&&n.params)for(var s=0,c=n.params;s<c.length;s++){var u;i[(u=c[s]).key]=u.value}}return i},a.getQualityProfilesWithDepth=function(e){var t=(void 0===e?a.props:e).profiles;return Object(h.g)(t.filter(function(e){return!e.isBuiltIn&&e.actions&&e.actions.edit&&e.language===a.props.rule.lang})).map(function(e){return g({},e,{depth:e.depth-1})})},a.handleFormSubmit=function(e){e.preventDefault(),a.setState({submitting:!0});var t={key:a.state.profile,organization:a.props.organization,params:a.state.params,rule:a.props.rule.key,severity:a.state.severity};Object(d.a)(t).then(function(){return a.props.onDone(t.severity)}).then(function(){a.mounted&&(a.setState({submitting:!1}),a.props.onClose())},function(){a.mounted&&a.setState({submitting:!1})})},a.handleParameterChange=function(e){var t=e.currentTarget,n=t.name,r=t.value;a.setState(function(e){var t;return{params:g({},e.params,(t={},t[n]=r,t))}})},a.handleProfileChange=function(e){var t=e.value;a.setState({profile:t})},a.handleSeverityChange=function(e){var t=e.value;a.setState({severity:t})},a.renderSeverityOption=function(e){var t=e.value;return i.createElement(v.a,{severity:t})};var n=a.getQualityProfilesWithDepth(t);return a.state={params:a.getParams(t),profile:n.length>0?n[0].key:"",severity:t.activation?t.activation.severity:t.rule.severity,submitting:!1},a}return y(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this,t=this.props,a=t.activation,n=t.rule,o=this.state,c=o.profile,d=o.severity,v=o.submitting,h=n.params,y=void 0===h?[]:h,g=this.getQualityProfilesWithDepth(),b=!!n.templateKey,E=g.length<=0,w=!!a;return i.createElement(s.a,{contentLabel:this.props.modalHeader,onRequestClose:this.props.onClose,size:"small"},i.createElement("form",{onSubmit:this.handleFormSubmit},i.createElement("div",{className:"modal-head"},i.createElement("h2",null,this.props.modalHeader)),i.createElement("div",{className:r("modal-body",{"modal-container":y.length>0})},!w&&E&&i.createElement(p.Alert,{variant:"info"},Object(m.translate)("coding_rules.active_in_all_profiles")),i.createElement("div",{className:"modal-field"},i.createElement("label",null,Object(m.translate)("coding_rules.quality_profile")),i.createElement(u.a,{className:"js-profile",clearable:!1,disabled:v||1===g.length,onChange:this.handleProfileChange,options:g.map(function(e){return{label:"   ".repeat(e.depth)+e.name,value:e.key}}),value:c})),i.createElement("div",{className:"modal-field"},i.createElement("label",null,Object(m.translate)("severity")),i.createElement(u.a,{className:"js-severity",clearable:!1,disabled:v,onChange:this.handleSeverityChange,optionRenderer:this.renderSeverityOption,options:f.e.map(function(e){return{label:Object(m.translate)("severity",e),value:e}}),searchable:!1,value:d,valueRenderer:this.renderSeverityOption})),b?i.createElement("div",{className:"modal-field"},i.createElement("p",{className:"note"},Object(m.translate)("coding_rules.custom_rule.activation_notice"))):y.map(function(t){return i.createElement("div",{className:"modal-field",key:t.key},i.createElement("label",{title:t.key},t.key),"TEXT"===t.type?i.createElement("textarea",{disabled:v,name:t.key,onChange:e.handleParameterChange,placeholder:t.defaultValue,rows:3,value:e.state.params[t.key]||""}):i.createElement("input",{disabled:v,name:t.key,onChange:e.handleParameterChange,placeholder:t.defaultValue,type:"text",value:e.state.params[t.key]||""}),i.createElement("div",{className:"note",dangerouslySetInnerHTML:{__html:t.htmlDesc||""}}))})),i.createElement("footer",{className:"modal-foot"},v&&i.createElement("i",{className:"spinner spacer-right"}),i.createElement(l.SubmitButton,{disabled:v||E},w?Object(m.translate)("save"):Object(m.translate)("coding_rules.activate")),i.createElement(l.ResetButtonLink,{disabled:v,onClick:this.props.onClose},Object(m.translate)("cancel")))))},t}(i.PureComponent);t.default=b},710:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(12),r=a(774),i=a.n(r),l=a(34);function o(e){var t=e.className,a=e.severity;return a?n.createElement("span",{className:t},n.createElement(i.a,{className:"little-spacer-right",severity:a}),Object(l.translate)("severity",a)):null}},789:function(e,t,a){var n;
/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/
/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/
!function(){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),i={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen};void 0===(n=function(){return i}.call(t,a,t,e))||(e.exports=n)}()}}]);
//# sourceMappingURL=362.1570825310815.chunk.js.map