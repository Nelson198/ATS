(window.webpackJsonp=window.webpackJsonp||[]).push([[377],{1796:function(e,t,a){"use strict";a.r(t);var n=a(309),s=a(2),r=a(316),l=a(323),c=a.n(l),i=a(326),o=a(5),m=a(562),u=a(339),p=a(331),d=a(409),v=a(317),b=a(1198),E=(a(1182),a(466)),h=a(318),g=a(348);function f(e){let t=e.className,a=e.measures,r=e.type;const l=E.c[r].afterMergeMetric,c=Object(g.findMeasure)(a,l);return c&&void 0!==c.value?s.createElement("div",{className:n(t,"display-flex-center")},s.createElement("span",{className:"huge"},Object(h.formatMeasure)(c.value,"PERCENT")),s.createElement("span",{className:"label flex-1"},Object(o.translate)("component_measures.facet_category.overall_category.estimated"))):null}var y=a(28),N=a(422),O=a(319);function j(e){let t=e.branchLike,a=e.className,r=e.component,l=e.docTooltip,c=e.measures,i=e.type;const o=E.b[i],m=o.metric,d=o.iconClass,v=Object(g.findMeasure)(c,m);let b;v&&(b=Object(N.b)(v));const f=Object.assign({},Object(p.d)(t),{resolved:"false",types:i});return s.createElement(s.Fragment,null,void 0===b?s.createElement("span",{className:n(a,"measure-empty")},"—"):s.createElement(y.Link,{className:a,to:Object(O.g)(r.key,f)},Object(h.formatMeasure)(b,"SHORT_INT")),s.createElement(d,{className:"big-spacer-left little-spacer-right"}),Object(E.f)(m),l&&s.createElement(u.a,{className:"little-spacer-left",doc:l}))}var w=a(314),k=a.n(w),L=a(385),_=a.n(L),x=a(611);function M(e){let t=e.branchLike,a=e.component,n=e.measures,r=e.type;const l=E.b[r].rating,c=Object(g.findMeasure)(n,l);if(!l||!c)return null;const i=Object(N.b)(c),o=i&&Object(N.c)(l,Number(i));return s.createElement(s.Fragment,null,s.createElement("span",{className:"big-spacer-right flex-1"},Object(E.g)(r)),s.createElement(k.a,{overlay:o},s.createElement("span",null,s.createElement(x.a,{branchLike:t,className:"link-no-underline",component:a.key,metric:l},s.createElement(_.a,{value:i})))))}var T=a(304),C=a(363),S=a.n(C),q=a(334),R=a(22);function B(e){let t=e.component,a=e.level;const r="OK"===a;let l;return l=Object(R.isSonarCloud)()?void 0===t.qualityGate?Object(O.v)(t.organization):Object(O.u)(t.qualityGate.key,t.organization):void 0===t.qualityGate?Object(O.v)():Object(O.u)(t.qualityGate.key),s.createElement("div",{className:n("quality-gate-badge-large small",{failed:!r,success:r})},s.createElement("div",{className:"display-flex-center"},s.createElement("span",null,Object(o.translate)("overview.on_new_code_long")),s.createElement(c.a,{className:"little-spacer-left",overlay:s.createElement(T.FormattedMessage,{defaultMessage:Object(o.translate)("overview.quality_gate.conditions_on_new_code"),id:"overview.quality_gate.conditions_on_new_code",values:{link:s.createElement(y.Link,{to:l},Object(o.translate)("overview.quality_gate"))}})},s.createElement(S.a,{fill:q.colors.transparentWhite,size:12}))),void 0!==a&&s.createElement("h4",{className:"huge-spacer-top huge"},Object(o.translate)("metric.level",a)))}class I extends s.Component{constructor(){super(...arguments),this.getLabelText=()=>{const e=this.props,t=e.branchLike,a=e.component,n=e.measures,r=e.type,l=E.c[r],c=l.expandedLabelKey,i=l.linesMetric,m=l.labelKey,u=Object(g.findMeasure)(n,i);return u?s.createElement(T.FormattedMessage,{defaultMessage:Object(o.translate)(c),id:c,values:{count:s.createElement(x.a,{branchLike:t,component:a.key,metric:i},Object(h.formatMeasure)(Object(N.b)(u),"SHORT_INT"))}}):Object(o.translate)(m)}}render(){const e=this.props,t=e.branchLike,a=e.className,r=e.component,l=e.measures,c=e.type,i=E.c[c],o=i.iconClass,m=i.metric,u=Object(g.findMeasure)(l,m);let p;return u&&(p=Object(N.b)(u)),s.createElement(s.Fragment,null,void 0===p?s.createElement("span",{className:n(a,"measure-empty")},"—"):s.createElement(s.Fragment,null,s.createElement("span",{className:"big-spacer-right"},s.createElement(o,{size:"big",value:Number(p)})),s.createElement(x.a,{branchLike:t,className:a,component:r.key,metric:m},Object(h.formatMeasure)(p,"PERCENT"))),s.createElement("span",{className:"big-spacer-left"},this.getLabelText()))}}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,s=!1,r=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){s=!0,r=e}finally{try{n||null==c.return||c.return()}finally{if(s)throw r}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}a.d(t,"ReviewApp",function(){return P});class P extends s.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={loading:!1,measures:[]},this.fetchBranchData=()=>{const e=this.props,t=e.branchLike,a=e.component;this.setState({loading:!0}),Promise.all([Object(m.d)(Object.assign({component:a.key,metricKeys:E.e.join()},Object(p.d)(t))),this.props.fetchBranchStatus(t,a.key)]).then(e=>{let t=A(e,1)[0];this.mounted&&t&&this.setState({loading:!1,measures:t})},()=>{this.mounted&&this.setState({loading:!1})})}}componentDidMount(){this.mounted=!0,this.fetchBranchData()}componentWillUnmount(){this.mounted=!1}render(){const e=this.props,t=e.branchLike,r=e.component,l=e.conditions,m=e.ignoredConditions,p=e.status,d=this.state,v=d.loading,E=d.measures;if(v||!l)return s.createElement("div",{className:"page page-limited"},s.createElement("i",{className:"spinner"}));const h=l.filter(e=>"ERROR"===e.level);return s.createElement("div",{className:"page page-limited"},s.createElement("div",{className:n("pr-overview",{"has-conditions":h.length>0})},m&&s.createElement(i.Alert,{className:"big-spacer-bottom",display:"inline",variant:"info"},s.createElement("span",{className:"text-middle"},Object(o.translate)("overview.quality_gate.ignored_conditions")),s.createElement(c.a,{className:"spacer-left",overlay:Object(o.translate)("overview.quality_gate.ignored_conditions.tooltip")})),s.createElement("div",{className:"display-flex-row"},s.createElement("div",{className:"pr-overview-quality-gate big-spacer-right"},s.createElement("h3",{className:"spacer-bottom small"},Object(o.translate)("overview.quality_gate"),s.createElement(u.a,{className:"spacer-left",doc:Promise.resolve().then(a.bind(null,960))})),s.createElement(B,{component:r,level:p})),h.length>0&&s.createElement("div",{className:"pr-overview-failed-conditions big-spacer-right"},s.createElement("h3",{className:"spacer-bottom small"},Object(o.translate)("overview.failed_conditions")),s.createElement(b.a,{branchLike:t,collapsible:!0,component:r,conditions:h})),s.createElement("div",{className:"pr-overview-measurements flex-1"},s.createElement("h3",{className:"spacer-bottom small"},Object(o.translate)("overview.metrics")),["BUG","VULNERABILITY","CODE_SMELL"].map(e=>s.createElement("div",{className:"pr-overview-measurements-row display-flex-row",key:e},s.createElement("div",{className:"pr-overview-measurements-value flex-1 small display-flex-center"},s.createElement(j,{branchLike:t,className:"overview-domain-measure-value",component:r,measures:E,type:e})),"VULNERABILITY"===e&&s.createElement("div",{className:"pr-overview-measurements-value flex-1 small display-flex-center"},s.createElement(j,{branchLike:t,className:"overview-domain-measure-value",component:r,docTooltip:Promise.resolve().then(a.bind(null,1181)),measures:E,type:"SECURITY_HOTSPOT"})),s.createElement("div",{className:"pr-overview-measurements-rating display-flex-center"},s.createElement(M,{branchLike:t,component:r,measures:E,type:e})))),["COVERAGE","DUPLICATION"].map(e=>s.createElement("div",{className:"pr-overview-measurements-row display-flex-row",key:e},s.createElement("div",{className:"pr-overview-measurements-value flex-1 small display-flex-center"},s.createElement(I,{branchLike:t,className:"overview-domain-measure-value",component:r,measures:E,type:e})),s.createElement(f,{className:"pr-overview-measurements-estimate",measures:E,type:e})))))))}}const F={fetchBranchStatus:d.c};t.default=Object(r.connect)((e,t)=>{let a=t.branchLike,n=t.component;const s=Object(v.getBranchStatusByBranchLike)(e,n.key,a);return{conditions:s.conditions,ignoredConditions:s.ignoredConditions,status:s.status}},F)(P)}}]);
//# sourceMappingURL=377.m.9c84a3db.chunk.js.map